# ä¸º Atom æ–‡æœ¬ç¼–è¾‘å™¨å¸¦æ¥è§¦æ‘¸æ¡æ”¯æŒ

> åŸæ–‡ï¼š<https://medium.com/hackernoon/bringing-touch-bar-support-to-the-atom-text-editor-eade4f8dd491>

å…­å‘¨å‰ï¼Œæˆ‘ä¸€å¤´æ‰è¿›äº† USB-C å’Œ Touch Bars çš„å¤æ€ªä¸–ç•Œï¼Œè®¢è´­äº†ä¸€å°é—ªäº®çš„æ–° MacBook Proã€‚å¤§çº¦ä» 1997 å¹´å¼€å§‹ï¼Œæˆ‘å°±æˆä¸ºäº†è‹¹æœçš„ç”¨æˆ·ï¼Œè·Ÿéšè‹¹æœèµ°è¿‡äº†é»‘æš—çš„æ—¥å­ï¼Œç»å†äº† CPU çš„å˜åŒ–å’Œæ“ä½œç³»ç»Ÿçš„å˜åŒ–ã€‚ä½†æœ€è¿‘çš„è¿™ä¸€æ³¢æœºå™¨ä¼¼ä¹æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½å¼•å‘äº†æ›´å¤šçš„æŠ—è®®ï¼Œæˆ‘è®¤ä¸ºä¸»è¦æ˜¯å› ä¸ºè®¸å¤šç”¨æˆ·è®¤ä¸ºè‹¹æœæ˜¾ç¤ºå‡ºæ”¾å¼ƒå…¶â€œä¸“ä¸šâ€ç”¨æˆ·ç¾¤çš„å¼ºçƒˆè¿¹è±¡ã€‚æˆ‘æœ€ç»ˆä¼šå¾—åˆ°ä¸€ä¸ªå®Œæ•´çš„ MacBook Pro è¯„æµ‹ï¼Œä½†åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³ä¸“æ³¨äºç‰¹å®šåº”ç”¨ç¨‹åºä½¿ç”¨çš„ç‰¹å®šç¡¬ä»¶åŠŸèƒ½ã€‚

æ‰¹è¯„è€…å’Œå®¢æˆ·æ™®éè®¤ä¸ºä¸€äº›æ–° MacbBook Pro æœºå‹é¡¶éƒ¨çš„ touch bar æ˜¯ä¸€ä¸ªæ„šè ¢å’Œå¤±è´¥çš„æƒ³æ³•ï¼Œä½†å°±åƒè®¸å¤šæ–°åŠŸèƒ½ä¸€æ ·ï¼Œå¦‚æœåšå¾—å¥½ï¼Œå®ƒæœ‰å®ƒçš„ç”¨é€”ã€‚éšç€æ”¯æŒå®ƒçš„åº”ç”¨ç¨‹åºæ•°é‡çš„å¢é•¿ï¼Œå®ƒçš„ä½¿ç”¨ä¹Ÿåœ¨å¢é•¿ï¼Œæˆ‘æ¯å¤©ä½¿ç”¨çš„ä¸€äº›åº”ç”¨ç¨‹åºä»ç„¶åœ¨ç­‰å¾…æ”¯æŒå®ƒã€‚

æˆ‘ç»å¸¸åœ¨å·¥ä½œä¸­ä½¿ç”¨ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼ŒGitHub çš„æ–‡æœ¬ç¼–è¾‘å™¨ [Atom](https://atom.io/) ï¼Œå®ƒåŸºäº [Electron](https://electron.atom.io/) æ¡†æ¶ã€‚æœ€è¿‘ç‰ˆæœ¬çš„æ¡†æ¶[å¼•å…¥äº†å¯¹è§¦æ‘¸æ¡](https://electron.atom.io/docs/api/touch-bar/)çš„æ”¯æŒï¼Œè€Œ Atom çš„ 1.19 ç‰ˆæœ¬ä¹Ÿä¸º Atom å¸¦æ¥äº†è¿™ç§æ”¯æŒã€‚ä¸€äº›å‹‡æ•¢çš„å¼€å‘è€…å·²ç»å‘å¸ƒäº†å¢åŠ  touch bar åŠŸèƒ½çš„åŒ…ï¼Œæ‰€ä»¥æˆ‘å†³å®šå»çœ‹çœ‹ã€‚

# Touchbar æ³¨å†Œè¡¨

æˆ‘å°†ä»è¿™ä¸ªåŒ…å¼€å§‹ï¼Œå› ä¸ºå®ƒæ˜¯å¦ä¸€ä¸ªåŒ…çš„ä¾èµ–é¡¹ï¼Œå°†ç”µå­ API æŠ½è±¡ä¸º Atomã€‚æ‚¨å°†å®ƒåŒ…å«åœ¨æ‚¨çš„åŒ… *package.json* æ–‡ä»¶ä¸­ï¼Œå¹¶æ·»åŠ å¦‚ä¸‹æŒ‰é’®:

```
consumeTouchBar(touchbarRegistry){ touchbarRegistry.addItem( newTouchBarButton({ label:'Hello Dzone', backgroundColor:'#0288d1', click:()=>console.log('Hey there!') }) ); }
```

è¿™å°†(æ— ç›Šåœ°)æ·»åŠ ä¸€ä¸ªæ ‡ç­¾ä¸ºâ€œHello Dzoneâ€çš„æŒ‰é’®ï¼Œå•å‡»è¯¥æŒ‰é’®ä¼šå‘ Atom çš„æ§åˆ¶å°è®°å½•ä¸€æ¡æ¶ˆæ¯ã€‚å½“ç„¶ï¼Œè¿™ä¸ªåŒ…è¿˜æœ‰æ›´æœ‰ç”¨çš„ç”¨ä¾‹ï¼Œæˆ‘æƒ³ä½œè€…å¸Œæœ›å…¶ä»–å¼€å‘è€…ä¼šåœ¨ä»–ä»¬çš„åŒ…ä¸­ä½¿ç”¨å®ƒï¼Œä½†æ˜¯åˆ°ç›®å‰ä¸ºæ­¢ï¼Œå¾ˆå°‘æœ‰äººè¿™æ ·åšã€‚

[https://atom.io/packages/touchbar-registry](https://atom.io/packages/touchbar-registry)

# Linter ç”¨æˆ·ç•Œé¢

æˆ‘å–œæ¬¢ Atom [linter](https://atom.io/packages/linter) åŒ…ï¼Œä»¥åŠå®ƒæ”¯æŒçš„æ‰€æœ‰ linterã€‚åœ¨ä¸€ä¸ªçª—æ ¼ä¸­ï¼Œæˆ‘å¯ä»¥çœ‹åˆ°æˆ‘çš„ä»£ç &æ–‡æœ¬çš„å„ç§å„æ ·çš„é—®é¢˜ï¼Œå¹¶å¯ä»¥é€šè¿‡æˆ‘çš„æ–¹å¼ä¿®å¤å®ƒä»¬ã€‚è¿™ä¸ªåŒ…å°†è­¦å‘Šç±»å‹çš„æ‘˜è¦æ·»åŠ åˆ° touch bar ä¸­ï¼Œä½†æ˜¯æ­¤æ—¶æŒ‰ä¸‹æŒ‰é’®æ²¡æœ‰ä»»ä½•ä½œç”¨ã€‚

æ·±å…¥ç ”ç©¶ [*touchbarUI.js*](https://github.com/haklop/linter-ui-touchbar/blob/master/lib/touchbarUI.js) æ–‡ä»¶ï¼Œçœ‹çœ‹è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚

![](img/0454a8dcae70af3a71abaf6f00951d12.png)

ã€https://atom.io/packages/linter-ui-touchbar 

# è§¦æ‘¸æ å®ç”¨ç¨‹åº

è¿™ä¸ªåŒ…å…è®¸æ‚¨åœ¨ä¸€ä¸ªæ•°ç»„ä¸­æ·»åŠ ä¸€ç³»åˆ—æŒ‰é’®ã€æ ‡ç­¾å’Œ Atom åŠ¨ä½œï¼Œä¾‹å¦‚ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯:

```
[{ "type":"label", "label":"touch-bar-utility rocks! ï¿½ï¿½ï¿½ï¿½" },{ "type":"button", "label":"ï¿½ï¿½", "clickDispatchAction":"atom-beautify:beautify-editor", "backgroundColor":"#b355d6" },{ "type":"button", "label":"//", "clickDispatchAction":"editor:toggle-line-comments", "backgroundColor":"#4899a8" }]
```

![](img/9a1dfe91bfd51cebf4232e2afb8fb14c.png)

ç¬¬ä¸€ä¸ªé™¤äº†æ˜¾ç¤ºä¸€ä¸ªå¸¦æœ‰å›¾æ ‡çš„æ ‡ç­¾ä¹‹å¤–ä»€ä¹ˆä¹Ÿä¸åšï¼Œç¬¬äºŒä¸ªåˆ†é…ä¸€ä¸ªå¸¦æœ‰å½©è‰²èƒŒæ™¯çš„è¡¨æƒ…å›¾æ ‡ï¼Œç‚¹å‡»åè¿è¡Œâ€œç¾åŒ–â€åŠ¨ä½œï¼Œç¬¬ä¸‰ä¸ªåˆ‡æ¢ä»£ç ä¸­çš„æ³¨é‡Šã€‚å®ƒè¿˜å¯ä»¥è®©ä½ ä¸ºå›¾æ ‡ï¼Œå¼¹å‡ºçª—å£ï¼Œæ»‘å—ï¼Œé—´éš”ç­‰ç­‰åˆ†é…æ–‡ä»¶ã€‚æˆ‘æ”¹å˜äº†æˆ‘çš„ï¼Œä¸ºè‡ªå·±åˆ›é€ äº†æ›´å¤šæœ‰ç”¨çš„å¿«æ·æ–¹å¼:

```
[{ "type":"button", "label":"ğŸ”—", "clickDispatchAction":"markdown-writer:insert-link" },{ "type":"button", "label":"ğŸ’…", "clickDispatchAction":"atom-beautify:beautify-editor" },{ "type":"button", "label":"//", "clickDispatchAction":"editor:toggle-line-comments" }]
```

![](img/cccfbd5c8a88fa9aacdd45828bbfdeb0.png)

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™æ˜¯å¯¹æˆ‘æœ€æœ‰ç”¨çš„åŒ…ï¼Œä½†æˆ‘å¸Œæœ›èƒ½å¤Ÿæ·»åŠ å®ç”¨æŒ‰é’®ï¼Œå¦‚å­—æ•°ç»Ÿè®¡ã€‚

[https://atom.io/packages/touch-bar-utility](https://atom.io/packages/touch-bar-utility)

# è§¦æ‘¸æ 

è¿™ä¸ä¸Šä¸€ä¸ªåŒ…çš„å·¥ä½œæ–¹å¼ç±»ä¼¼ï¼Œæ·»åŠ äº†ä¸€ä¸ªåˆ‡æ¢é”®ç›˜å¿«æ·é”®( *ctrl-alt-o* )ï¼Œç›®å‰ç¼ºå°‘ä¸€ä¸ªè®¾ç½®çª—æ ¼ï¼Œå°†é…ç½®ç§»åŠ¨åˆ°ä¸€ä¸ª *lib/config.json* æ–‡ä»¶ä¸­ï¼Œè¿™æ„å‘³ç€æ‚¨éœ€è¦ç›´æ¥åœ¨ *~/ä¸­æ‰¾åˆ°å®ƒã€‚atom/packages/touchbar* æ–‡ä»¶å¤¹ï¼Œæˆ‘ä¸ç¡®å®šè½¯ä»¶åŒ…æ›´æ–°å°†å¦‚ä½•å·¥ä½œã€‚ä¸€æ—¦è¿›å…¥ï¼Œé€‰é¡¹æ˜¯ç›¸ä¼¼çš„ï¼Œä½†æ˜¯ç¨å¾®æ¸…æ™°ä¸€äº›ï¼Œé»˜è®¤æ–‡ä»¶ç»™å‡ºäº†æ›´å¤šçš„ä¾‹å­ã€‚ä¸ºäº†åˆ›å»ºç±»ä¼¼æˆ‘ä¸Šé¢åˆ›å»ºçš„ä¸œè¥¿ï¼Œæˆ‘ä½¿ç”¨äº†ä¸‹é¢çš„ JSONï¼Œå®ƒä¹Ÿæ·»åŠ äº†ä¸€ä¸ªè¡¨æƒ…æ»‘å—å’Œä¸€ä¸ªé¢œè‰²é€‰æ‹©å™¨ã€‚

![](img/26260db11bfef01c818c31c71bec42c8.png)![](img/585db7057a6907232b4d0fa6d1c31ab0.png)![](img/f865d0f76f4b2f6118e7b303f8c54c78.png)

```
{ "elements":[ { "name":"comment-button", "type":"button", "label":"//", "command":"editor:toggle-line-comments" }, { "name":"beautify-button", "type":"button", "label":"ğŸ’…", "command":"atom-beautify:beautify-editor" }, { "name":"color-picker", "type":"color-picker" }, { "type":"popover", "label":"ğŸ˜", "elements":[{ "name":"emoji-scrubber", "type":"scrubber", "label":"ğŸ˜Š", "items":"emojis"}] }, { "name":"markdown-links", "type":"button", "label":"ğŸ”—", "command":"markdown-writer:insert-link" } ] }
```

[https://atom.io/packages/touchbar](https://atom.io/packages/touchbar)

# åŸå­è§¦æ‘¸æ 

å¦ä¸€ä¸ªåŒ…éµå¾ªä¸å‰ä¸¤ä¸ªåŒ…ç›¸ä¼¼çš„æ€æƒ³ï¼Œä½†æ˜¯è¾ƒå°‘è¢«è®°å½•ï¼Œå®ƒå®šä¹‰äº† *~/ä¸­çš„åŠ¨ä½œã€‚atom/packages/atoms-touch bar/lib/touch bars/action . js*å¹¶ä¸”éœ€è¦ä»£ç å’Œ JSON é…ç½®ã€‚è¿™æä¾›äº†æ›´å¤šçš„çµæ´»æ€§(å’Œæ›´å¥½çš„åŠŸèƒ½)ï¼Œä½†æ˜¯éœ€è¦æ›´å¤šçš„å…³äºä½ åœ¨åšä»€ä¹ˆçš„åˆæ­¥çŸ¥è¯†ã€‚æˆ‘ä»æ–‡æ¡£ä¸­å¾—åˆ°çš„å°è±¡æ˜¯ï¼Œè¯¥è®¾ç½®å…è®¸æ‚¨æ·»åŠ ä¸åŒçš„â€œæ â€å¹¶æ ¹æ®ä¸Šä¸‹æ–‡åŠ¨æ€è°ƒç”¨å®ƒä»¬ï¼Œè¿™æ˜¯å”¯ä¸€å…è®¸è¿™æ ·åšçš„åŒ…ï¼Œå¹¶ä¸”æ›´ç¬¦åˆ touch bar çš„ç²¾ç¥ï¼Œä½†éœ€è¦ä¸€ç§æ–¹æ³•è®©å…¶ä»–åŒ…å®ç°å®ƒï¼Œä½¿å®ƒçœŸæ­£æœ‰ç”¨ã€‚

![](img/d98abcc7a415ee1805ad542f9881a9ac.png)

[https://atom.io/packages/atoms-touchbar](https://atom.io/packages/atoms-touchbar)

# Atom touchbar

è¿™ä¸ªåŒ…å¹¶æ²¡æœ‰å£°ç§°æ˜¯å¯é…ç½®çš„ï¼Œä½ åº”è¯¥æŠŠå®ƒå½“ä½œä¸€ä¸ªå¦‚ä½•åˆ›å»ºä½ è‡ªå·±çš„å®šåˆ¶åŒ…çš„ä¾‹å­(å°½ç®¡ä½ å¯ä»¥çœ‹åˆ°ï¼Œå·²ç»æœ‰è¶³å¤Ÿå¤šçš„ Atom touch bar åŒ…äº†)ã€‚å®ƒæä¾›äº†ç”¨äºåˆ‡æ¢å‘½ä»¤é¢æ¿ã€æ¨¡ç³ŠæŸ¥æ‰¾å™¨ã€linter é¢æ¿ã€Git é¢æ¿å’Œæ³¨é‡Š/å–æ¶ˆæ³¨é‡Šé€‰æ‹©çš„æŒ‰é’®ã€‚å¦‚æœæ‚¨æ²¡æœ‰å¯ç”¨ä»»ä½•è¿™äº›åŠŸèƒ½ï¼Œé‚£ä¹ˆæŒ‰é’®å°†ä¸èµ·ä½œç”¨ã€‚

![](img/95aaaa784dcda3194164f714f7e9e6db.png)

[https://atom.io/packages/atom-touchbar](https://atom.io/packages/atom-touchbar)

# Touchbar Git

å°† git ä¿¡æ¯æ·»åŠ åˆ° touch barï¼Œä½†å®ƒå¯¹æˆ‘ä¸èµ·ä½œç”¨ï¼Œå¦‚æœè¿™æ˜¯ä½ æƒ³è¦çš„ï¼Œè¯·æŸ¥çœ‹å­˜å‚¨åº“ã€‚

[https://atom.io/packages/touchbar-git](https://atom.io/packages/touchbar-git)

# æé«˜æ ‡å‡†

touch bar çš„è¦ç‚¹æ˜¯å¯¹ä¸Šä¸‹æ–‡æ•æ„Ÿï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œé™¤äº†`atoms-touchbar`(æ®æˆ‘æ‰€çŸ¥)ä¹‹å¤–ï¼Œæ‰€æœ‰çš„åŒ…éƒ½æ˜¯åŸºäºç‰¹å®šçš„ç”¨ä¾‹æ¥ä¿®å¤æŒ‰é’®ï¼Œè€Œä¸æ˜¯åŸºäºåŠ¨æ€ç”¨ä¾‹ã€‚åˆä¹é€»è¾‘çš„ä¸‹ä¸€æ­¥æ˜¯è®©åŒ…å¼€å‘è€…éƒ½åˆ©ç”¨ä¸€ä¸ªä¾èµ–åŒ…ï¼Œå¹¶å‘ä»–ä»¬çš„åŒ…æ·»åŠ åŠŸèƒ½ï¼Œç„¶åå…è®¸ç”¨æˆ·ä»è®¾ç½®çª—æ ¼åˆ‡æ¢ä»–ä»¬æƒ³è¦ä½¿ç”¨çš„æŒ‰é’®ã€‚ç”±äºæ–‡æœ¬ç¼–è¾‘å™¨ç”¨æˆ·é€šå¸¸æ˜¯é‡åº¦é”®ç›˜ç”¨æˆ·ï¼Œä»ç†è®ºä¸Šè®²ï¼Œtouch bar å¯èƒ½æ˜¯æœ‰ç”¨çš„ï¼Œä½†å®ƒä»¬é«˜åº¦å¯å®šåˆ¶çš„ç‰¹æ€§æ„å‘³ç€è¿™å°†æ˜¯å¤šä¹ˆçœŸå®è¿˜æœ‰å¾…è§‚å¯Ÿã€‚

*åŸè½½äº*[](https://dzone.com/articles/bringing-touch-bar-support-to-the-atom-text-editor)**ã€‚**