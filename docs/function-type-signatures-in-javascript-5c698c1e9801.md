# Javascript ä¸­çš„å‡½æ•°ç±»å‹ç­¾å

> åŸæ–‡ï¼š<https://medium.com/hackernoon/function-type-signatures-in-javascript-5c698c1e9801>

![](img/c5170818244bdfe73b196840dfc9b9ee.png)

å½“ä¸€ä¸ª Javascript å¼€å‘äººå‘˜å¼€å§‹æ¢ç´¢å‡½æ•°å¼ç¼–ç¨‹çš„æœ€æ·±å±‚ç§˜å¯†æ—¶ï¼Œä»–ç»å¸¸ä¼šå‘ç°è¿™äº›å¥‡æ€ªçš„*ç®­å¤´ç¬¦å·ï¼Œä¸Šé¢å†™ç€ç±»å‹*ï¼Œç„¶åæ„Ÿè§‰*â€˜è¿™åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿâ€™*ã€‚æ¯•ç«Ÿï¼Œä»–æ˜¯åŠ¨æ€ç±»å‹åŒ– Javascript çš„å¤§å¸ˆï¼Œæ‘†è„±äº†ç±»å‹çš„ç•Œé™ã€‚

è¿™äº›ç±»å‹ç¬¦å·æ˜¯ä¸€ç§å«åš**ç±»å‹ç­¾å**çš„å…ƒè¯­è¨€ï¼Œå®ƒè®²è¿°äº†å¾ˆå¤šå…³äºçº¯å‡½æ•°çš„äº‹æƒ…ï¼Œå¹¶ä¸”åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„é‡è¦æ€§*è¿œè¿œè¶…å‡ºäº†æˆ‘ä»¬æœ€åˆçš„é¢„æœŸ*ã€‚

![](img/a283951efdc63183a246ae1c5ca502da.png)

Screenshot from [http://ramdajs.com/docs/](http://ramdajs.com/docs/)

*è®©æˆ‘ä»¬çœ‹çœ‹è¿™äº›ç±»å‹ç­¾åæ˜¯ä»€ä¹ˆï¼Œä»¥åŠä¸ºä»€ä¹ˆæˆ‘ä»¬åº”è¯¥åœ¨ä»£ç ä¸­ä½¿ç”¨å®ƒä»¬ã€‚*

> ç±»å‹ç­¾åå®šä¹‰å‡½æ•°çš„è¾“å…¥å’Œè¾“å‡ºï¼Œæœ‰æ—¶åŒ…æ‹¬å‚æ•°çš„æ•°é‡ã€å‚æ•°çš„ç±»å‹ä»¥åŠå‡½æ•°åŒ…å«çš„å‚æ•°çš„é¡ºåºã€‚

è¿™äº›ç±»å‹ç­¾åæ˜¯å†™åœ¨çº¯å‡½æ•°ä¹‹ä¸Šçš„é«˜åº¦è¡¨è¾¾çš„è¯­å¥ï¼Œç”¨äºæ¨æ–­å®ƒçš„å·¥ä½œã€‚

ç±»å‹ç­¾ååŸºäºä½œä¸ºæ ‡å‡†ç±»å‹ç³»ç»Ÿçš„ [Hindley-Milner](https://en.wikipedia.org/wiki/Hindley%E2%80%93Milner_type_system) ç±»å‹ç³»ç»Ÿï¼Œè¿™ä¹Ÿæ˜¯å— [ML](https://en.wikipedia.org/wiki/ML_(programming_language)) å½±å“çš„è¯­è¨€æ‰€éµå¾ªçš„ï¼ŒåŒ…æ‹¬ Haskellã€‚

è¿™äº›è¯­å¥é€šè¿‡**å½¢å¼åŒ–**ç±»å‹æ¨æ–­ç®—æ³•*(Haskell é€šå¸¸ä½¿ç”¨)*ä¸­çš„å‡½æ•°è¡¨è¾¾å¼è¾¾åˆ°äº†æ›´å¤§çš„ç›®çš„ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬å°†ä½¿ç”¨å®ƒä»¬æ¥æ›´å¥½åœ°è®°å½•æˆ‘ä»¬çš„ Javascript ä»£ç ï¼Œå¹¶ä»ä¸­æ¨å¯¼å‡º**è‡ªç”±å®šç†**ã€‚

å¦‚æœæ‚¨å‘ç°ä»»ä½•ç”¨è¿™äº›ç±»å‹ç­¾åè®°å½•çš„çº¯å‡½æ•°ï¼Œè§£ç å®ƒä»¬çš„èƒ½åŠ›å°†è®©æ‚¨æå‰äº†è§£è¯¥å‡½æ•°çš„å·¥ä½œæ–¹å¼ã€‚

![](img/f452a7b5bf58972a98fbc8da95c2518d.png)

Just like He-man

æˆ‘ä»¬å°†æŠŠç±»å‹ç­¾åå®šä¹‰ä¸ºå‡½æ•°ä¸Šæ–¹çš„æ³¨é‡Šã€‚ä½¿ç”¨å‡½æ•°æ—¶è¿˜å¯ä»¥ä½¿ç”¨ [*æµ*](https://flow.org/) æ¥æ¨æ–­ç±»å‹ã€‚è¦å¼€å§‹å¿ƒæµï¼Œä½ å¯ä»¥è·Ÿéšè¿™ä¸ªï¼Œ

[](/@lunasunkaiser/type-checking-with-flow-4db5ef9b3095) [## ä½¿ç”¨æµç¨‹è¿›è¡Œç±»å‹æ£€æŸ¥

### JavaScript å¯èƒ½æ˜¯å¿«é€Ÿçš„ã€å¯Œäºè¡¨ç°åŠ›çš„ã€è½»é‡çº§çš„ã€åŠŸèƒ½æ€§çš„ã€ä»¤äººæ•¬ç•çš„ç¼–ç¨‹è¯­è¨€ï¼Œæœ‰ä¸€ä¸ªå·¨å¤§çš„ç¤¾åŒºâ€¦

medium.com](/@lunasunkaiser/type-checking-with-flow-4db5ef9b3095) 

# ç®€å•åŠŸèƒ½

```
// length :: String â†’ Number
const length = s => s.length;
```

æ‰€ä»¥ä¸Šé¢çš„å‡½æ•°æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›ä¸€ä¸ªæ•°å­—ã€‚å¦‚æœæˆ‘ä»¬ä»”ç»†è§‚å¯Ÿï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°

```
1\. The function name is written first followed by `::`.2\. The input type of the function is written before the arrow.3\. The return type of the function is written after the arrow or at last.
```

è®°ä½ï¼Œåªå†™è¾“å…¥å’Œè¾“å‡ºçš„ç±»å‹ï¼Œè¿™æ ·å°±å¯ä»¥è¯»æˆ ***â€œä¸€ä¸ªä»å­—ç¬¦ä¸²åˆ°æ•°å­—çš„å‡½æ•°é•¿åº¦â€ã€‚***

ä¸Šè¿°é•¿åº¦å‡½æ•°ä¹Ÿå¯ä»¥å†™æˆ

```
// length :: [Number] â†’ Number
const length = arr => arr.length
```

åªè¦å®ç”¨ï¼Œå‡½æ•°æœ‰å¤šç§ç±»å‹ç­¾åæ˜¯æ­£å¸¸çš„ï¼Œå¦‚æœå‡½æ•°çš„å‚æ•°ç±»å‹è¿‡äºçµæ´»ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥ä½¿ç”¨***HM-ä»»æ„å˜é‡*** ï¼Œæˆ‘ä»¬ç¨åå°†è®¨è®ºå®ƒä»¬ã€‚

## å¤šå‚æ•°

åœ¨ Javascript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰å¸¦è®¸å¤šå‚æ•°çš„å‡½æ•°ï¼Œä¸åƒå…¶ä»– FP è¯­è¨€ï¼Œè®©è¿™äº›å‡½æ•°ä¸€æ¬¡åªå¸¦ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä»ç„¶æƒ³åœ¨å‡½æ•°ä¸­ä½¿ç”¨å¤šä¸ªå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšã€‚

```
// join :: (String, [String]) â†’ String
const join = (separator, arr) => arr.join(separator)
```

# é«˜é˜¶å‡½æ•°

å¦‚æœæˆ‘ä»¬æ²¡æœ‰å‡½æ•°æ¥å¤„ç†å‡½æ•°ï¼Œé‚£å°±ä¸æ˜¯å‡½æ•°å¼ç¼–ç¨‹ã€‚

```
// addOneToAll :: ((Number â†’ Number),[Number]) â†’ [Number]const addOneToAll = (addOne = x=>x+1 , arr) => arr.map(addOne)
```

å½“ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒçš„ç­¾åæ”¾åœ¨ä¸€ä¸ªæ‹¬å·ä¸­ï¼Œä»¥è¡¨ç¤ºä¸€ä¸ªæ›´æœ‰æ„ä¹‰çš„æ•´ä½“ç±»å‹ç­¾åã€‚

ä¸Šé¢çš„å‡½æ•°æ˜¯ä¸€ä¸ª' *map* å‡½æ•°ï¼Œä¸æ˜¯æ¯æ¬¡è¿™ä¸ªå‡½æ•°éƒ½ä½œç”¨äºå®šä¹‰çš„æ•°æ®ç±»å‹ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥ä½œç”¨äºä»»ä½•ç±»å‹çš„æ•°ç»„ã€‚æ‰€ä»¥ä¸ºäº†æè¿°è¿™ç§å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›åˆ«çš„ä¸œè¥¿ã€‚

# è¾›å¾·é›·-ç±³å°”çº³ä»»æ„å˜é‡

*åƒ identityã€mapã€filter å’Œ reduce è¿™æ ·çš„å‡½æ•°æ¥å—çš„å‚æ•°è¿‡äºçµæ´»ï¼Œæ— æ³•ç”±ç‰¹å®šç±»å‹å®šä¹‰ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ç»å…¸çš„ Hindley-Milner å˜é‡* `*a*` *å’Œ* `*b*` *ã€‚*

```
// identity :: a â†’ a
const identity = a => a
```

å› ä¸ºå¯¹äºç›¸åŒçš„è¾“å…¥ç±»å‹ï¼Œidentity æ€»æ˜¯ç»™æˆ‘ä»¬ç›¸åŒçš„è¾“å‡ºç±»å‹ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ç”¨`a â†’ a`æ¥ä»£è¡¨å®ƒçš„ç­¾åã€‚

![](img/b9f225c4b565be0f5ffe082183a3e1fb.png)

I know!

æˆ‘ä»¬çš„é•¿åº¦å‡½æ•°ä¹Ÿå¯ä»¥å†™æˆ

```
// length :: [a] â†’ Number
const length = arr => arr.length
```

åŒæ ·çš„ï¼Œ

```
// head :: [a] â†’ a
const head = arr => arr[0]
```

# Thunks æˆ– Curried å‡½æ•°

*æœ€çº¯ç²¹çš„çº¯å‡½æ•°çš„ç±»å‹ç­¾å* âœ¨

å¯¹äºä¸€ä¸ªæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°æ¥è¯´ï¼Œå¤„ç†å®ƒä»¬æ€»æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ï¼Œè¿™æ ·å®ƒä»¬å°±å¯ä»¥åœ¨æˆ‘ä»¬ä»£ç çš„åé¢è¢«ç»„åˆã€‚æ­¤å¤–ï¼Œåœ¨å¸¦æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°ä¸­ä½¿ç”¨ä»»æ„çš„ HM å˜é‡ä¹Ÿä¸æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ã€‚

å¦‚æœä½ å¯¹ [***æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦ curry æˆ‘ä»¬çš„å‡½æ•°***](https://hackernoon.com/partial-application-of-functions-dbe7d9b80760) æ„Ÿåˆ°å¥½å¥‡ï¼Œè¯·é€šè¿‡è¿™ä¸ªï¼Œ

[](https://hackernoon.com/partial-application-of-functions-dbe7d9b80760) [## å‡½æ•°çš„éƒ¨åˆ†åº”ç”¨

### ä¸ºå‡½æ•°æä¾›æ¯”é¢„æœŸæ›´å°‘çš„å‚æ•°ç§°ä¸ºå‡½æ•°çš„éƒ¨åˆ†åº”ç”¨ã€‚

hackernoon.com](https://hackernoon.com/partial-application-of-functions-dbe7d9b80760) 

```
// map :: (a â†’ b) â†’ [a] â†’ [b]
const map = fn => arr => arr.map(fn)
```

ä¸€ä¸ªæ ‡å‡†çš„æ˜ å°„å‡½æ•°å°†å…·æœ‰ä¸Šè¿°ç±»å‹çš„ç­¾åã€‚ä½†æ˜¯ï¼Œå¾ˆå¤šæ—¶å€™ï¼Œæ˜ å°„ä¹Ÿå¯ä»¥ç”±è¿™ç§ç±»å‹çš„ç­¾åæ¥å®šä¹‰

```
map :: [a] â†’ [b]
```

æœ‰æ—¶æˆ‘ä»¬çŸ¥é“ map è¿”å›çš„æ•°ç»„çš„ç±»å‹ï¼Œå°±åƒè¿™æ ·ã€‚

```
// allToString :: [a] â†’ [String]
const allToString = arr => arr.map(toString)
```

è®©æˆ‘ä»¬çœ‹çœ‹æ ‡å‡†æ»¤æ³¢å™¨å’Œ reduce

```
// filter :: (a â†’ bool) â†’ [a] â†’ [a]
const filter = fn => arr => arr.filter(fn)// reduce :: (b â†’ a â†’ b) â†’ b â†’ [a] â†’ b
const reduce = fn => init => arr => arr.reduce(fn, init)
```

æ˜¾ç„¶ï¼Œreduce å‡½æ•°çš„ç±»å‹ç­¾åæœ‰ç‚¹å¤æ‚ï¼Œå¦‚æœæˆ‘ä»¬èƒ½ç†è§£å¦‚ä½•ç¼–å†™ reduce å‡½æ•°çš„ç±»å‹ç­¾åï¼Œæˆ‘ä»¬å°±èƒ½ä¸ºå‡ ä¹ä»»ä½•å‡½æ•°ç¼–å†™ç±»å‹ç­¾åã€‚

å¥½çš„ï¼Œæ‰€ä»¥ reduce çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ª ***reducing å‡½æ•°*** ï¼Œå®ƒä½¿ç”¨`b`å’Œ`a`ç»™å‡º`b`ï¼Œè¿™æ„å‘³ç€è¿™ä¸ªå‡½æ•°å°†æŠŠæ‰€æœ‰ä¸œè¥¿éƒ½å½’çº¦ä¸ºç±»å‹`b`ï¼Œæ‰€ä»¥ä» *reduce()* è·å¾—çš„æœ€ç»ˆå€¼å’Œæä¾›çš„åˆå§‹å€¼å°†æ˜¯`b`ç±»å‹ã€‚å¹¶ä¸”ç”±äºç±»å‹`a`åˆ—è¡¨ä¸­çš„æ¯ä¸ªå•ä¸ªå€¼éƒ½å°†è¢«é¦ˆé€åˆ°è¿™ä¸ª*å½’çº¦å‡½æ•°ï¼Œæ‰€ä»¥ ***å½’çº¦å‡½æ•°*** çš„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯`a`ç±»å‹ï¼Œå®ƒå°±æ˜¯è¿™æ ·ã€‚å› æ­¤ï¼Œ *reduce()* çš„ç±»å‹ç­¾åæ˜¯æ­£å½“çš„ã€‚*

*![](img/52c0cb7ecbd329bd8d64863660c10278.png)*

# *è‡ªç”±å®šç†*

*è¿™äº›ç­¾åçš„å¦ä¸€ä¸ªç”¨é€”æ˜¯äº§ç”Ÿ*è‡ªç”±å®šç†ã€‚å½“æˆ‘ä»¬å¤„ç†çº¯å‡½æ•°çš„**ç»„åˆæ—¶ï¼Œè¿™äº›å®šç†éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬å¸®åŠ©æˆ‘ä»¬ä¼˜åŒ–å’Œé‡æ„ä»£ç ã€‚****

```
*// Type signature of head says
// head :: [a] â†’ acompose(map(fn), head) == compose(head, fn)*
```

*è¿™æ˜¯æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªè‡ªç”±å®šç†ï¼Œä»…æ¥æºäº head å’Œ map å‡½æ•°çš„ç±»å‹ç­¾åï¼Œå…¶é™ˆè¿°*

*å¦‚æœæˆ‘ä»¬å¯¹æ¯ä¸ªå…ƒç´ ä½¿ç”¨å‡½æ•°`map`ï¼Œç„¶åå¯¹ç»“æœæ•°ç»„ä½¿ç”¨å‡½æ•°`head`ï¼Œé‚£ä¹ˆè¿™å°±ç›¸å½“äºå¯¹æ•°ç»„çš„`head`ä½¿ç”¨å‡½æ•°`fn`ã€‚*

*è®©æˆ‘ä»¬è¯æ˜è¿™ä¸ªå®šç†*

```
*compose(map(fn), head) == compose(head, fn)*--Converting to Type Signatures--*[a] â†’ [b] â†’ b == [a] â†’ a â†’ b*-- Removing Intermediates --*[a] â†’ b == [a] â†’ b*
```

*ç”±äºä¸¤ä¸ªå‡½æ•°çš„æ€»ä½“ç±»å‹ç­¾åæ˜¯ç›¸åŒçš„ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œå¯¹äºç›¸åŒçš„è¾“å…¥ï¼Œä¸¤ä¸ªç»„åˆå°†è¿”å›ç›¸åŒçš„ç»“æœã€‚*

*![](img/0e43d03b3e40ca9a275464e7ed87bd57.png)*

*ä¸Šé¢çš„æ¨å¯¼è¢«ç®€åŒ–äº†ï¼Œå› ä¸ºå®ƒéœ€è¦ Lambda Calculas æ¥è¿›è¡Œè‡ªç”±å®šç†çš„å®é™…æ¨å¯¼ï¼Œè¿™ä¸åœ¨æœ¬æ–‡çš„èŒƒå›´ä¹‹å†…ã€‚*

*å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°ç ”ç©¶ï¼Œä½ å¯ä»¥ä¸€ç›´æµè§ˆç“¦å¾·å‹’å…³äºè‡ªç”±å®šç†çš„è®ºæ–‡ã€‚*

*è¯·æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨çš„ Compose å‡½æ•°å®é™…ä¸Šä¸æƒ¯ç”¨çš„ Compose ç›¸åã€‚æ›´å¤šä¿¡æ¯[ç‚¹å‡»è¿™é‡Œ](https://github.com/rajatsharma305/compose-r#compose-r)ã€‚*

*è§£å¯†å’Œä½¿ç”¨ç±»å‹ç­¾åçš„èƒ½åŠ›ä¸ä»…åœ¨ Javascript ä¸­æœ‰ç”¨ï¼Œåœ¨å…¶ä»– FP è¯­è¨€ä¸­ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬éœ€è¦å€Ÿç”¨ Javascript çš„ä»»ä½•çº¯å‡½æ•°ï¼Œæˆ‘ä»¬åªéœ€å¼•ç”¨å®ƒçš„ç±»å‹ç­¾åï¼Œæˆ‘ä»¬å°±çŸ¥é“åœ¨ä»£ç ä¸­çš„ä»€ä¹ˆåœ°æ–¹æ”¾ç½®è¯¥å‡½æ•°ã€‚*

*æ„Ÿè°¢é˜…è¯»*

*ç”¨...ä¹¦å†™ğŸ’–*

*[![](img/50ef4044ecd4e250b5d50f368b775d38.png)](http://bit.ly/HackernoonFB)**[![](img/979d9a46439d5aebbdcdca574e21dc81.png)](https://goo.gl/k7XYbx)**[![](img/2930ba6bd2c12218fdbbf7e02c8746ff.png)](https://goo.gl/4ofytp)*

> *[é»‘å®¢ä¸­åˆ](http://bit.ly/Hackernoon)æ˜¯é»‘å®¢å¦‚ä½•å¼€å§‹ä»–ä»¬çš„ä¸‹åˆã€‚æˆ‘ä»¬æ˜¯ [@AMI](http://bit.ly/atAMIatAMI) å®¶åº­çš„ä¸€å‘˜ã€‚æˆ‘ä»¬ç°åœ¨[æ¥å—æŠ•ç¨¿](http://bit.ly/hackernoonsubmission)ï¼Œå¹¶ä¹æ„[è®¨è®ºå¹¿å‘Š&èµåŠ©](mailto:partners@amipublications.com)æœºä¼šã€‚*
> 
> *å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•…äº‹ï¼Œæˆ‘ä»¬æ¨èä½ é˜…è¯»æˆ‘ä»¬çš„[æœ€æ–°ç§‘æŠ€æ•…äº‹](http://bit.ly/hackernoonlatestt)å’Œ[è¶‹åŠ¿ç§‘æŠ€æ•…äº‹](https://hackernoon.com/trending)ã€‚ç›´åˆ°ä¸‹ä¸€æ¬¡ï¼Œä¸è¦æŠŠä¸–ç•Œçš„ç°å®æƒ³å½“ç„¶ï¼*

*![](img/be0ca55ba73a573dce11effb2ee80d56.png)*