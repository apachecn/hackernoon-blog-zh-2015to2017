# ç”¨ Node.js åˆ›å»ºä¸€ä¸ªç®€å•çš„ Twitter Bot

> åŸæ–‡ï¼š<https://medium.com/hackernoon/create-a-simple-twitter-bot-with-node-js-5b14eb006c08>

![](img/1d7992427872c57a1b6667b100f6394b.png)

ä¸€ä¸ªåŸºäºæ ‡ç­¾è½¬å‘å’Œå›å¤å…¶ä»–ç”¨æˆ·çš„æ¨ç‰¹æœºå™¨äººæ€ä¹ˆæ ·ï¼Ÿæˆ‘åšäº†ä¸€ä¸ªç±»ä¼¼çš„ Twitter æœºå™¨äºº(@ [nodejstweet](https://twitter.com/nodejstweet) )ï¼Œå®ƒåœ¨ä¸€ç³»åˆ—æ ‡ç­¾ä¸Šä¸ºæˆ‘æä¾›æœ€æ–°æˆ–æ­£åœ¨è¿›è¡Œçš„æ–°é—»/æ–‡ç« /æ“ä½œæ–¹æ³•ï¼Œæ¯”å¦‚#Nodejsã€#MongoDBã€#AngularJSã€#IonicFramework ç­‰ç­‰ã€‚å½“æ—¶æˆ‘ä»æ²¡æƒ³è¿‡å®ƒä¼šæœ‰æ¯”æˆ‘æ›´å¤šçš„è¿½éšè€…ï¼Œä½†è¿™å·²ç»è¢«è¶…è¶Šäº†ã€‚

![](img/cd4343e675699ba61be025628681793e.png)

A glimpse of a Twitter Bot that I made for sole purpose of information

# è¿™ä¸ªæœºå™¨äººä¼šåšä»€ä¹ˆï¼Ÿ

è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ Twitter æœºå™¨äººï¼Œå°†æ ¹æ® hashtags éšæœºè½¬å‘ã€æ”¶è—/å–œæ¬¢ä½œä¸ºæŸ¥è¯¢ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å¹¶åœ¨ä¸€å®šæ—¶é—´é—´éš”åç»§ç»­è¿™æ ·åšã€‚

# ä½ éœ€è¦ä»€ä¹ˆï¼Ÿ

*   æ‚¨çš„ç³»ç»Ÿä¸Šå¿…é¡»å®‰è£…æœ‰ [Node.js](http://nodejs.org) ã€‚
*   ä¸€ä¸ªæ¨ç‰¹è´¦å·ã€‚
*   ä½ çš„æœºå™¨äººå°†ä½¿ç”¨ npm æ¨¡å—`[twit](https://www.npmjs.com/package/twit)`æ¥æ“ä½œæ¨æ–‡å’Œæµï¼Œå¹¶ä¸ Twitter API è¿›è¡Œé€šä¿¡ã€‚

# æˆ‘ä»¬å¼€å§‹å§

å»ºç«‹ä¸€ä¸ªç©ºç›®å½•å¹¶ç”¨`$ npm init`åˆå§‹åŒ–ï¼Œç”¨`package.json`æ–‡ä»¶é…ç½®è¿™ä¸ª web åº”ç”¨ç¨‹åºã€‚ç„¶ååœ¨é‚£ä¸ªç›®å½•ä¸‹æ–°å»ºä¸¤ä¸ªæ–‡ä»¶:`bot.js` & `config.js`ã€‚

`bot.js`å°†æ˜¯æˆ‘ä»¬çš„ä¸»è¦åº”ç”¨ç¨‹åºæ–‡ä»¶ï¼Œæˆ‘ä»¬å°†åœ¨å…¶ä¸­ç¼–å†™æˆ‘ä»¬çš„ Twitter æœºå™¨äººçš„æºä»£ç ï¼Œå› æ­¤åœ¨`package.json`ä¸­ç¼–è¾‘`main`å­—æ®µ:

```
{  
  "main": "bot.js",  
},
```

æ‚¨å½“å‰çš„ç›®å½•ç»“æ„åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:

```
root/project-name
|- bot.js
|- config.js
|- package.json
```

## ä» Twitter API é…ç½®å’Œæˆäºˆæƒé™

ç™»å½•æ‚¨çš„ Twitter è´¦æˆ·åï¼Œè¯·ç‚¹å‡»æ­¤é“¾æ¥:[https://apps.twitter.com/app/new](https://apps.twitter.com/app/new)åˆ›å»ºä¸€ä¸ªæ–°çš„åº”ç”¨ç¨‹åºã€‚å¡«å†™è¡¨æ ¼ä¸­çš„å¿…è¦å­—æ®µï¼Œç‚¹å‡»æŒ‰é’®*åˆ›å»ºæ‚¨çš„ Twitter åº”ç”¨ç¨‹åºã€‚*åˆ›å»ºåº”ç”¨ç¨‹åºåï¼Œåœ¨å¯¼èˆªçª—æ ¼ä¸‹æŸ¥æ‰¾â€œå¯†é’¥å’Œè®¿é—®ä»¤ç‰Œâ€,ç‚¹å‡»â€œç”Ÿæˆä»¤ç‰Œæ“ä½œâ€,ç„¶åå¤åˆ¶:

*   æ¶ˆè´¹è€…å¯†é’¥
*   æ¶ˆè´¹è€…ç§˜å¯†
*   è®¿é—®ä»¤ç‰Œ
*   è®¿é—®ä»¤ç‰Œç§˜å¯†

æ‰“å¼€`config.js` æ–‡ä»¶ï¼Œå°†æ‰€æœ‰å››ä¸ªå€¼ç²˜è´´åˆ°å…¶ä¸­ã€‚ä½¿ç”¨`module.export`å…¬å¼€è¿™äº›å€¼:

```
//config.js
/** TWITTER APP CONFIGURATION
 * consumer_key
 * consumer_secret
 * access_token
 * access_token_secret
 */module.exports = {
  consumer_key: '',  
  consumer_secret: '',
  access_token: '',  
  access_token_secret: ''
}
```

ç°åœ¨ï¼ŒTwitter æœºå™¨äººçš„é…ç½®æ­¥éª¤å·²ç»å®Œæˆã€‚*è¯·æ³¨æ„ï¼Œ*å¯¹äºæ¯ä¸ªä¸åŒçš„åº”ç”¨ï¼Œ`consumer key`ã€`consumer secret`ã€`access_token`å’Œ`access_token_secret`ä¼šæœ‰æ‰€ä¸åŒã€‚

# å»ºé€ æœºå™¨äºº

æ—¢ç„¶é…ç½®æ­¥éª¤å·²ç»å®Œæˆï¼Œç°åœ¨è®©æˆ‘ä»¬å®‰è£…ç¬¬ä¸‰ä¸ªå¿…å¤‡ç»„ä»¶ï¼Œå³èŠ‚ç‚¹çš„ [Twitter API å®¢æˆ·ç«¯ï¼Œå®ƒå°†å¸®åŠ©æˆ‘ä»¬ä¸ Twitter API é€šä¿¡ï¼Œå¹¶ä¸ºæ‰€æœ‰å¿…è¦çš„æ“ä½œ*æä¾›ä¸€ä¸ª API(ä¾‹å¦‚è½¬å‘å’Œæ”¶è—ä¸€æ¡æ¨æ–‡)ã€‚*](https://www.npmjs.com/package/twit)

æˆ‘ä»¬å°†ä»å®‰è£…åº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¾èµ–é¡¹å¼€å§‹ã€‚

```
$ npm install --save twit
```

ä¾èµ–é¡¹å®‰è£…å®Œæˆåï¼Œè½¬åˆ°`bot.js`æ–‡ä»¶ï¼Œéœ€è¦ä¾èµ–é¡¹å’Œ`config.js`æ–‡ä»¶ã€‚

```
var twit = require(â€™twitâ€™);
var config = require(â€™./config.jsâ€™);
```

å°†æˆ‘ä»¬çš„ Twitter åº”ç”¨ç¨‹åºçš„é…ç½®(*æ¶ˆè´¹è€…å’Œè®¿é—®ä»¤ç‰Œ*)ä»`config.js`ä¼ é€’åˆ°`twit:`

```
var Twitter = new twit(config);
```

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€åˆ‡é¡ºåˆ©å—ï¼Ÿ

**è¯·æ³¨æ„:æ·±åº¦å‚è€ƒå¿…é¡»å‚è€ƒ** `[**twit**](https://www.npmjs.com/package/twit)` [**æ–‡æ¡£**](https://www.npmjs.com/package/twit) **ã€‚**

## è½¬å‘æœºå™¨äºº

è®©æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œæ ¹æ®ä½œä¸ºå‚æ•°ä¼ é€’çš„æŸ¥è¯¢æ¥æŸ¥æ‰¾æœ€æ–°çš„ tweetsã€‚æˆ‘ä»¬å°†åˆå§‹åŒ–ä¸€ä¸ªåŒ…å«å„ç§å±æ€§çš„`params`å¯¹è±¡æ¥æœç´¢ä¸€æ¡ tweetï¼Œä½†æœ€é‡è¦çš„æ˜¯`query`æˆ–`q`å±æ€§ï¼Œå®ƒä»¬å°†ç»†åŒ–æˆ‘ä»¬çš„æœç´¢ã€‚æ— è®ºä½ åœ¨è¿™ä¸ªå±æ€§ä¸­è¾“å…¥ä»€ä¹ˆå€¼ï¼Œæˆ‘ä»¬çš„æœºå™¨äººéƒ½ä¼šæ ¹æ®è¿™ä¸ªæ ‡å‡†æœç´¢è¦è½¬å‘çš„æ¨æ–‡ã€‚æ‚¨å¯ä»¥åƒ twitter å¤„ç†ç¨‹åºä¸€æ ·æä¾›è¿™ä¸ªå±æ€§å€¼ï¼Œä»¥ç›‘æ§ç‰¹å®šçš„ twitter å¸æˆ·æˆ–#hashtagã€‚å¯¹äºæˆ‘ä»¬çš„ç¤ºä¾‹æœºå™¨äººï¼Œæˆ‘ä»¬å¯ä»¥åœ¨#nodejs ä¸Šæ‰¾åˆ°æœ€æ–°çš„æ¨æ–‡ã€‚

è½¬å‘æœºå™¨äººçš„åŠŸèƒ½æ˜¯è¿™æ ·å¯åŠ¨çš„:

```
var retweet = function() {
  var params = {
    q: '#nodejs, #Nodejs',
    result_type: 'recent',
    lang: 'en'    
  } 
```

å¦å¤–ä¸¤ä¸ªå±æ€§:`result_type`å’Œ`lang`æ˜¯å¯é€‰çš„ã€‚åœ¨å®šä¹‰æ—¶,`result_type: 'recent'` é€šçŸ¥ bot åªæœç´¢æœ€æ–°çš„ tweetï¼Œå³è‡ªæˆ‘ä»¬çš„ bot å¯åŠ¨æˆ–å®ƒå‘å‡ºæœ€åä¸€æ¡è½¬å‘ä»¥æ¥çš„æ—¶é—´æ®µå†…å‘ç”Ÿçš„ tweetã€‚

[Twitter API](// for more parametes, see: https://dev.twitter.com/rest/reference/get/search/tweets)æä¾›äº†ä¸€ä¸ªå‚æ•°åˆ—è¡¨ã€‚

æˆ‘ä»¬çš„ä¸‹ä¸€æ­¥æ˜¯æ ¹æ®æˆ‘ä»¬çš„å‚æ•°æœç´¢æ¨æ–‡ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç”±`twit` API æä¾›çš„`Twitter.get`å‡½æ•°æ¥è·å–ä»»ä½• REST API ç«¯ç‚¹ã€‚REST API ç«¯ç‚¹æ˜¯å¯¹ T [witter API ç«¯ç‚¹](https://dev.twitter.com/docs)çš„å¼•ç”¨ï¼Œæˆ‘ä»¬å°†è°ƒç”¨å®ƒæ¥æœç´¢ tweetsã€‚`Twitter.get`å‡½æ•°æ¥å—ä¸‰ä¸ªå‚æ•°:API ç«¯ç‚¹ã€params å¯¹è±¡(ç”±æˆ‘ä»¬å®šä¹‰)å’Œä¸€ä¸ªå›è°ƒã€‚

ä¸ºäº†å‘å¸ƒæˆ–è½¬å‘æˆ‘ä»¬çš„æœºå™¨äººå‘ç°çš„ tweetï¼Œæˆ‘ä»¬ä½¿ç”¨`Twitter.post()`æ–¹æ³•*å‘å¸ƒä»»ä½• REST API ç«¯ç‚¹*ã€‚å®ƒä¹Ÿéœ€è¦å’Œ`Twitter.get()`ä¸€æ ·å¤šçš„å‚æ•°ã€‚

ç°åœ¨ï¼Œä¸ºäº†è‡ªåŠ¨åŒ–æˆ‘ä»¬ä¸Šé¢å®šä¹‰çš„è¿™ä¸ªåŠ¨ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ JavaScript çš„å®šæ—¶å™¨å‡½æ•°`setInterval()` æ¥æœç´¢å¹¶åœ¨ç‰¹å®šçš„æ—¶é—´æ®µåè½¬å‘ã€‚

```
// grab & retweet as soon as program is running...
retweet();
// retweet in every 50 minutes
setInterval(retweet, 3000000);
```

è¯·æ³¨æ„ï¼Œæ‰€æœ‰ JavaScript çš„å®šæ—¶å™¨å‡½æ•°éƒ½é‡‡ç”¨ä»¥æ¯«ç§’ä¸ºå•ä½çš„*æ—¶é—´é‡*å‚æ•°ã€‚

## æœ€å–œæ¬¢çš„æœºå™¨äºº

ç±»ä¼¼äº`retweet` botï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å¹¶åˆå§‹åŒ–å¦ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼ï¼Œè¯¥è¡¨è¾¾å¼å°†éšæœºæœç´¢å¹¶*æ”¶è—*ä¸€æ¡æ¨æ–‡ã€‚æ˜¯çš„ï¼Œè¿™é‡Œçš„åŒºåˆ«æ˜¯æœç´¢å’ŒéšæœºæŠ“å–æ¨æ–‡ã€‚æˆ‘ä»¬å°†ä»åˆ›å»ºä¸€ä¸ªå‚æ•°å¯¹è±¡`params`å¼€å§‹ï¼Œå®ƒå°†ç”±ä¸‰ä¸ªå±æ€§ç»„æˆï¼Œå¦‚`retweet()`å‡½æ•°è¡¨è¾¾å¼æ‰€ç¤ºã€‚æœºå™¨äººå°†ä½¿ç”¨ç”±`twit` API æä¾›çš„ç›¸åŒçš„`.get()`å‡½æ•°æ¥æœç´¢æ¨æ–‡ï¼Œä»¥è·å¾—ä»»ä½• Twitter API ç«¯ç‚¹ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬éœ€è¦`search/tweets`ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†åœ¨ä¸€ä¸ªå˜é‡ä¸­å­˜å‚¨æœç´¢ tweet åˆ° *favorite* çš„çŠ¶æ€ï¼Œåœ¨å¦ä¸€ä¸ªå˜é‡ä¸­ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¼ é€’â€œæœç´¢çŠ¶æ€â€å˜é‡ä½œä¸ºå‚æ•°æ¥åº”ç”¨éšæœºå‡½æ•°ã€‚

æ³¨æ„ï¼Œæˆ‘ä»¬çš„ bot æœç´¢åˆ°çš„ tweets éƒ½å­˜å‚¨åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ã€‚åŒæ ·ï¼Œæˆ‘ä»¬ä½¿ç”¨ JavaScript çš„å®šæ—¶å™¨å‡½æ•°`setInterval()`åœ¨ç‰¹å®šçš„æ—¶é—´æ®µ(ä»¥æ¯«ç§’ä¸ºå•ä½)åæœç´¢å’Œæ”¶è—æ¨æ–‡ã€‚

å®Œæ•´æ¨¡å—:`bot.js`:

## ä½¿ç”¨

è‹¥è¦è¿è¡Œæ­¤ botï¼Œè¯·è½¬åˆ°æ‚¨çš„ç»ˆç«¯:

```
$ node bot.js
```

ä¸ºäº†é¿å…è¿™ç§å•è°ƒçš„è¿‡ç¨‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`npm scripts`æˆ–`nodemon.`ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨`Heroku`ä¸Šéƒ¨ç½²è¯¥åº”ç”¨ç¨‹åºä»¥å®ç°æŒç»­é›†æˆã€‚

è¦ä½¿ç”¨ npm è„šæœ¬ï¼Œè¯·åœ¨`package.json`ä¸­çš„`scripts`ä¸‹è¿›è¡Œç¼–è¾‘:

```
{
  "scripts": {    
    "start": "node bot.js",  
  }
}
```

ç„¶åä»ç»ˆç«¯:

```
$ npm start
```

æœ‰å„ç§æ–¹æ³•æ¥ç¼–å†™ä¸€ä¸ª Twitter æœºå™¨äººï¼Œè¿™åªæ˜¯å…¶ä¸­ä¸€ç§æ–¹æ³•ã€‚ä½ çš„æœºå™¨äººå¯ä»¥å¾ˆèªæ˜ï¼Œä½ å¯ä»¥ç”¨å®ƒåšå„ç§äº‹æƒ…ã€‚ä½ åªéœ€è¦å‚è€ƒ`[twit](https://www.npmjs.com/package/twit)` [æ–‡æ¡£](https://www.npmjs.com/package/twit)ä¸­å…¶ä»– RESTful API æ–¹æ³•æ¥æ“ä½œ [Twitter API ç«¯ç‚¹](http://REST API Endpoints: https://dev.twitter.com/rest/public)ã€‚

å¦‚éœ€è¿›ä¸€æ­¥é˜…è¯»ï¼Œè¯·æŸ¥çœ‹å¤§é‡å¹³å°ä¸Šå„ç§ç±»å‹çš„æœºå™¨äººçš„[Botwiki.org](https://botwiki.org/bots/twitterbots/)ã€‚å¯¹äºé«˜çº§é˜…è¯»ï¼Œè¯·æŸ¥çœ‹ [Botwiki çš„ä¸åŒç¼–ç¨‹è¯­è¨€çš„ Twitter æœºå™¨äººæ•™ç¨‹åˆ—è¡¨](https://botwiki.org/tutorials/twitterbots/)ã€‚

å¦‚æœæ‚¨å·²ç»èµ°äº†è¿™ä¹ˆè¿œï¼Œå¹¶ä¸”å–œæ¬¢é˜…è¯»å®ƒï¼Œè¯·ç‚¹å‡»ğŸ’šæŒ‰é’®ã€‚

**æƒ³æ”¶åˆ°æ›´å¤šåƒè¿™æ ·çš„æ–‡ç« å—ï¼Ÿè®¢é˜…æˆ‘** [**è¿™é‡Œ**](https://patreon.us17.list-manage.com/subscribe?u=ad4c168a6d5bb975f2f282d54&id=39e959cecd) **ã€‚æœ‰æ—¶ï¼Œæˆ‘ä¼šå‘æˆ‘çš„è®¢æˆ·å‘é€â€œä»æœªè§è¿‡â€çš„å†…å®¹ã€‚**

æˆ‘å¸Œæœ›è¿™æœ‰æ‰€å¸®åŠ©ï¼æ¨ç‰¹[è§](https://twitter.com/amanhimself)ã€‚

[![](img/50ef4044ecd4e250b5d50f368b775d38.png)](http://bit.ly/HackernoonFB)[![](img/979d9a46439d5aebbdcdca574e21dc81.png)](https://goo.gl/k7XYbx)[![](img/2930ba6bd2c12218fdbbf7e02c8746ff.png)](https://goo.gl/4ofytp)

> [é»‘å®¢ä¸­åˆ](http://bit.ly/Hackernoon)æ˜¯é»‘å®¢å¦‚ä½•å¼€å§‹ä»–ä»¬çš„ä¸‹åˆã€‚æˆ‘ä»¬æ˜¯è¿™ä¸ªå®¶åº­çš„ä¸€å‘˜ã€‚æˆ‘ä»¬ç°åœ¨[æ¥å—æŠ•ç¨¿](http://bit.ly/hackernoonsubmission)å¹¶ä¹æ„[è®¨è®ºå¹¿å‘Š&èµåŠ©](mailto:partners@amipublications.com)æœºä¼šã€‚
> 
> å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•…äº‹ï¼Œæˆ‘ä»¬æ¨èä½ é˜…è¯»æˆ‘ä»¬çš„[æœ€æ–°ç§‘æŠ€æ•…äº‹](http://bit.ly/hackernoonlatestt)å’Œ[è¶‹åŠ¿ç§‘æŠ€æ•…äº‹](https://hackernoon.com/trending)ã€‚ç›´åˆ°ä¸‹ä¸€æ¬¡ï¼Œä¸è¦æŠŠä¸–ç•Œçš„ç°å®æƒ³å½“ç„¶ï¼

![](img/be0ca55ba73a573dce11effb2ee80d56.png)