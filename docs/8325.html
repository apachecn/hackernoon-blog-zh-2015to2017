<html>
<head>
<title>Decide on dinner with an Ethereum arbitration contract</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨ä»¥å¤ªåŠä»²è£åˆåŒå†³å®šæ™šé¤</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/decide-on-dinner-with-an-ethereum-arbitration-contract-c59c13a28d5?source=collection_archive---------19-----------------------#2017-11-28">https://medium.com/hackernoon/decide-on-dinner-with-an-ethereum-arbitration-contract-c59c13a28d5?source=collection_archive---------19-----------------------#2017-11-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/ddef4b02550e9cb758504385dfb8fb72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_4ctSjJIIbOTHTqyHB2kLw.png"/></div></div></figure><div class=""/><p id="2829" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ°å…‹å’Œå‰å°”å†³å®šä¸äº†æ™šé¤ï¼Œæ‰€ä»¥ä»–ä»¬è¯·äº†ä¸€ä½ä»²è£äººæ¥å®¡ç†ä»–ä»¬çš„äº‰æ‰§ã€‚é—®é¢˜æ˜¯ä»–ä»¬ä¸ç›¸ä¿¡å¯¹æ–¹èƒ½ç‹¬ç«‹é€‰æ‹©ä»²è£äººã€‚</p><p id="e92f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è®©æˆ‘ä»¬å†™ä¸€ä»½ä»¥å¤ªåŠå¥‘çº¦æ¥å¤„ç†ä»–ä»¬çš„çº çº·å§ï¼</p><blockquote class="ka kb kc"><p id="dd04" class="jc jd kd je b jf jg jh ji jj jk jl jm ke jo jp jq kf js jt ju kg jw jx jy jz hn dt translated">æœ¬æ–‡å‡è®¾æ‚¨å¯¹ä»¥å¤ªåŠæœ‰åŸºæœ¬çš„äº†è§£ã€‚å¦‚æœä½ è¿˜ä¸ç¡®å®šï¼Œå°±ä»Preethi Kasireddy çš„è¿™ç¯‡<a class="ae kh" rel="noopener" href="/@preethikasireddy/how-does-ethereum-work-anyway-22d1df506369">ç²¾å½©æ–‡ç« </a>å¼€å§‹å§ã€‚</p></blockquote></div><div class="ab cl kk kl hc km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hn ho hp hq hr"><h2 id="c436" class="kr ks if bd kt ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll dt translated">æˆ‘ä»¬çš„åˆåŒå°†å¦‚ä½•è¿ä½œ</h2><p id="1307" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated"><strong class="je ig"> 1ã€‚</strong>ç¬¬ä¸€ä¸ªäººåˆ›å»ºä¸€ä¸ªæ–°çš„ä»²è£å®ä¾‹ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæè¿°ã€‚ğŸŒŸ</p><p id="2f22" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig"> 2ã€‚</strong>ç¬¬ä¸€ä¸ªäººå’Œç¬¬äºŒä¸ªäººæäº¤äº†ä»–ä»¬çš„ä¸åŒæ„è§ã€‚ğŸ˜ </p><p id="6ae3" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig"> 3ã€‚</strong>äººç‰©ä¸€å’Œäººç‰©äºŒä¹Ÿé€‰æ‹©ä¸€ä¸ªä»²è£è€…ã€‚ç›´åˆ°åŒæ–¹åŒæ„ç›¸åŒçš„å¸æˆ·åœ°å€ï¼Œè¯¥è¿‡ç¨‹æ‰ä¼šç»§ç»­ã€‚ğŸ‘</p><p id="6ddc" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig"> 4ã€‚ä»²è£äººå®¡æŸ¥ä¸¤ä¸ªè§‚ç‚¹å¹¶å†³å®šè·èƒœè€…ã€‚ğŸ¤” â¡ ğŸ†</strong></p><h1 id="4ff8" class="lr ks if bd kt ls lt lu kx lv lw lx lb ly lz ma le mb mc md lh me mf mg lk mh dt translated">è®¾ç½®</h1><blockquote class="ka kb kc"><p id="9153" class="jc jd kd je b jf jg jh ji jj jk jl jm ke jo jp jq kf js jt ju kg jw jx jy jz hn dt translated">F <!-- -->å¦‚æœä½ ä»¥å‰è¿è¡Œè¿‡æ¾éœ²é¡¹ç›®ï¼Œä½ å¯ä»¥éšæ„ç§»åŠ¨åˆ°ä¸‹ä¸€éƒ¨åˆ†</p></blockquote><p id="c70d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªåä¸º<a class="ae kh" href="http://truffleframework.com/" rel="noopener ugc nofollow" target="_blank"> Truffle </a>çš„æ¡†æ¶æ¥å¼€å‘æˆ‘ä»¬çš„æ™ºèƒ½åˆçº¦ã€‚è¿™æ˜¯ä¸€ä¸ªå¤„ç†ç¼–è¯‘ã€æµ‹è¯•ã€éƒ¨ç½²ã€è¿ç§»ç­‰ç­‰çš„ä¸€ç«™å¼å•†åº—ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†åªä½¿ç”¨æŸäº›åŠŸèƒ½ï¼Œä½†æˆ‘é¼“åŠ±ä½ æ·±å…¥æŒ–æ˜ã€‚</p><p id="8da6" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œå…¨å±€å®‰è£…truffleå’Œtestrpcã€‚</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="e230" class="kr ks if mn b fv mr ms l mt mu">npm install -g truffle <!-- -->ethereumjs-testrpc</span></pre><p id="e1fd" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç„¶åï¼Œåœ¨æ–°ç›®å½•ä¸­è¿è¡Œ:</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="6c05" class="kr ks if mn b fv mr ms l mt mu">truffle init</span></pre><p id="8b18" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä½ åº”è¯¥çœ‹åˆ°truffleçš„æ–‡ä»¶å¤¹ç»“æ„éšç€ä¸€äº›ç®€å•çš„ä¾‹å­åœ¨<code class="eh mv mw mx mn b">contracts/</code>æ–‡ä»¶å¤¹ä¸­è†¨èƒ€ã€‚</p><h2 id="2667" class="kr ks if bd kt ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll dt translated">æŠŠä½ çš„è„šå¼„æ¹¿</h2><p id="1bed" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">è®©æˆ‘ä»¬æ„Ÿå—ä¸€ä¸‹å·¥ä½œæµç¨‹ã€‚</p><p id="d7a6" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig"> 1ã€‚</strong>ç”¨<code class="eh mv mw mx mn b">testrpc</code>å¯åŠ¨æˆ‘ä»¬çš„æµ‹è¯•å®¢æˆ·ç«¯ã€‚æ‚¨å°†çœ‹åˆ°ä¸€äº›ç”¨äºæ¨¡æ‹Ÿäº’åŠ¨çš„è´¦æˆ·:</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff my"><img src="../Images/d02c9485ea491bac761751404f68e4b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t7qUA4w6FZEmLUR3kGiB_g.png"/></div></div></figure><p id="be05" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig"> 2ã€‚</strong>ä¸­çš„<em class="kd">åˆ†å¼€</em>æ ‡ç­¾ä¸­çš„<em class="kd">è¿è¡Œ<code class="eh mv mw mx mn b">truffle compile</code>ã€‚è¿™å°†ä»å¥‘çº¦ä¸­ç”Ÿæˆä¸€ä¸ªç›¸åº”çš„JSONå·¥ä»¶ï¼Œå¹¶å°†å®ƒä»¬æ”¾åˆ°ä¸€ä¸ªæ„å»ºæ–‡ä»¶å¤¹ä¸­ã€‚</em></p><p id="484b" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig"> 3ã€‚</strong>ç°åœ¨è¿è¡Œ<code class="eh mv mw mx mn b">truffle migrate</code>æ¥ç”Ÿæˆæ–‡ä»¶ï¼Œä»¥ä¾¿å°†åˆåŒéƒ¨ç½²åˆ°åŒºå—é“¾ã€‚<em class="kd">é‡è¦çš„æ˜¯ï¼Œå½“æ‚¨è¿ç§»æ—¶ï¼Œtestrpcå¿…é¡»æ­£åœ¨è¿è¡Œï¼Œå¦åˆ™æ‚¨çš„å¥‘çº¦ä¸ä¼šè¢«éƒ¨ç½²åˆ°é‚£ä¸ªæµ‹è¯•å®ä¾‹ã€‚</em></p><p id="86a6" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig"> 4ã€‚è¿è¡Œ<code class="eh mv mw mx mn b">truffle console</code>ï¼Œå®ƒå°†è¿æ¥åˆ°æˆ‘ä»¬æ­£åœ¨è¿è¡Œçš„ä»¥å¤ªåŠå®¢æˆ·ç«¯ï¼Œå¹¶å…è®¸æˆ‘ä»¬ä¸åˆåŒè¿›è¡Œäº¤äº’ã€‚</strong></p><h2 id="aef4" class="kr ks if bd kt ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll dt translated">é—²é€›</h2><p id="0952" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">æˆ‘ä»¬å°†ä¿®æ”¹ä¸€ä¸ªç°æœ‰çš„å¥‘çº¦(æŠ€æœ¯ä¸Šæ¥è¯´æ˜¯ä¸€ä¸ª<a class="ae kh" href="http://solidity.readthedocs.io/en/develop/contracts.html#libraries" rel="noopener ugc nofollow" target="_blank">åº“</a> â€¦å°½ç®¡å¯¹æˆ‘ä»¬çš„ç›®çš„æœ‰ç”¨)<code class="eh mv mw mx mn b"><a class="ae kh" href="https://github.com/ConsenSys/truffle-webpack-demo/blob/master/contracts/ConvertLib.sol" rel="noopener ugc nofollow" target="_blank">ConvertLib.sol</a></code>ã€‚å®ƒæä¾›äº†ä¸€ç§å°†ä¸¤ä¸ªæ•°ç›¸ä¹˜çš„æ–¹æ³•ã€‚</p><blockquote class="ka kb kc"><p id="ccb0" class="jc jd kd je b jf jg jh ji jj jk jl jm ke jo jp jq kf js jt ju kg jw jx jy jz hn dt translated">æ”¹å˜é“¾ä¸ŠçŠ¶æ€çš„æ–¹æ³•æ˜¯ä¸€ä¸ª<strong class="je ig">äº‹åŠ¡</strong>(æ¶ˆè€—gas)ï¼Œè€Œä»»ä½•åªè¿”å›æ•°æ®çš„æ–¹æ³•æ˜¯ä¸€ä¸ª<strong class="je ig">è°ƒç”¨</strong>(å…è´¹)ã€‚</p></blockquote><p id="462c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ¾éœ²çš„æ§åˆ¶å°å·²ç»<a class="ae kh" href="https://github.com/ethereum/wiki/wiki/JavaScript-API" rel="noopener ugc nofollow" target="_blank"> web3 </a>å’Œæˆ‘ä»¬çš„åˆåŒå‡†å¤‡å°±ç»ªï¼Œæ”¾æ‰‹ä¸€æ:</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="d0a1" class="kr ks if mn b fv mr ms l mt mu"><em class="kd">// get the deployed contract by its class name, returns a promise<br/></em><strong class="mn ig">&gt; const contract = ConvertLib.deployed()</strong></span><span id="0454" class="kr ks if mn b fv mz ms l mt mu"><em class="kd">// invoke the 'convert' method with 'call', also returns a promise</em><strong class="mn ig"><em class="kd"><br/></em>&gt; const response = contract.then(c =&gt; c.convert.call(5, 20))</strong></span><span id="2247" class="kr ks if mn b fv mz ms l mt mu"><em class="kd">// print out our result!!</em><strong class="mn ig"><br/>&gt; response.then(res =&gt; res.toNumber())</strong></span><span id="fb9b" class="kr ks if mn b fv mz ms l mt mu"><em class="kd">100</em></span></pre><p id="ffcf" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¤ªå¥½äº†ï¼Œæˆ‘ä»¬å·²ç»ä¸ä¸€ä¸ª<em class="kd">éƒ¨ç½²åˆåŒ</em>äº’åŠ¨ï¼Œè®©ä¸¤ä¸ªæ•°å­—ç›¸ä¹˜ï¼</p></div><div class="ab cl kk kl hc km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hn ho hp hq hr"><h1 id="cea1" class="lr ks if bd kt ls na lu kx lv nb lx lb ly nc ma le mb nd md lh me ne mg lk mh dt translated">è®©æˆ‘ä»¬å†™ä¸€äº›å¯é æ€§</h1><p id="249c" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">ä»¥å¤ªåŠåˆåŒæ˜¯ç”¨ä¸€ç§å«åš<a class="ae kh" href="https://solidity.readthedocs.io/en/develop/" rel="noopener ugc nofollow" target="_blank">å¯é æ€§</a>çš„é«˜çº§è¯­è¨€ç¼–å†™çš„ã€‚å¦‚æœä½ ç†Ÿæ‚‰Javascriptæˆ–é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä½ ä¼šå‘ç°å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ã€‚</p><p id="decc" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä½¿ç”¨Solidityï¼Œæˆ‘ä»¬å°†å®šä¹‰çŠ¶æ€å˜é‡å¹¶å»ºç«‹æˆ‘ä»¬çš„ä»²è£è§„åˆ™ã€‚ä¹‹åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Truffleæ¥ç¼–è¯‘åˆåŒï¼Œå¹¶å°†å…¶éƒ¨ç½²åˆ°æˆ‘ä»¬çš„æµ‹è¯•ç¯å¢ƒä¸­ã€‚æˆ‘ä»¬åœ¨åˆåŒä¸­å®šä¹‰çš„çŠ¶æ€å’Œä»£ç å°†å­˜åœ¨äºä»¥å¤ªåŠåŒºå—é“¾çš„ä¸€ä¸ªç‰¹å®šåœ°å€ã€‚</p></div><div class="ab cl kk kl hc km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hn ho hp hq hr"><p id="5675" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è®©æˆ‘ä»¬ä»æ‰“æ‰«æˆ¿é—´å¼€å§‹ã€‚ç§»é™¤<code class="eh mv mw mx mn b">contracts/ConvertLib.sol</code>å’Œ<code class="eh mv mw mx mn b">contracts/MetaCoin.sol</code>ï¼Œä½†<strong class="je ig">ä¿ç•™</strong>å’Œ<code class="eh mv mw mx mn b">contracts/Migrations.sol</code>ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥æ‰§è¡Œè¿ç§»ã€‚</p><p id="feb4" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç„¶åï¼Œåœ¨<code class="eh mv mw mx mn b">contracts/</code>æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸º<code class="eh mv mw mx mn b">Arbitration.sol</code>çš„æ–‡ä»¶ã€‚ç°åœ¨è¿›å…¥ä½ çš„<code class="eh mv mw mx mn b">migrations/</code>æ–‡ä»¶å¤¹ï¼Œä¿®æ”¹<code class="eh mv mw mx mn b">2_deploy_contracts.js</code>:</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="f8c3" class="kr ks if mn b fv mr ms l mt mu">var Arbitration = artifacts.require('./Arbitration.sol');</span><span id="a240" class="kr ks if mn b fv mz ms l mt mu">module.exports = function(deployer) {<br/>  deployer.deploy(Arbitration);<br/>};</span></pre></div><div class="ab cl kk kl hc km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hn ho hp hq hr"><p id="e2e0" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ‰“å¼€<code class="eh mv mw mx mn b">contracts/Arbitration.sol</code>ï¼Œå¼€å§‹å®šä¹‰å®ä½“ç‰ˆæœ¬å’ŒåˆåŒåç§°ã€‚</p><p id="0d99" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ‚¨å°†æ·»åŠ å…¬å…±å˜é‡<code class="eh mv mw mx mn b">description</code>å’Œ<code class="eh mv mw mx mn b">winningOpinion</code>ä»¥åŠäº‹åŠ¡æ–¹æ³•<code class="eh mv mw mx mn b">setDescription</code>æ¥è®¾ç½®æè¿°ã€‚</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="eb39" class="kr ks if mn b fv mr ms l mt mu">pragma solidity ^0.4.11;</span><span id="404d" class="kr ks if mn b fv mz ms l mt mu">contract Arbitration {<br/>  string public description;<br/>  string public winningOpinion;</span><span id="7a81" class="kr ks if mn b fv mz ms l mt mu">  function setDescription(string _description) {<br/>    description = _description;<br/>  }<br/>}</span></pre></div><div class="ab cl kk kl hc km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hn ho hp hq hr"><p id="3e48" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ¥ä¸‹æ¥ä½¿ç”¨<code class="eh mv mw mx mn b"><a class="ae kh" href="http://solidity.readthedocs.io/en/develop/types.html#structs" rel="noopener ugc nofollow" target="_blank">struct</a></code>ç±»å‹æ¥å®šä¹‰æˆ‘ä»¬çš„ç´¢èµ”äººçš„æ•°æ®åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æˆ‘ä»¬åˆ›å»ºçš„<code class="eh mv mw mx mn b">Claimant</code>ç±»å‹æ¥å£°æ˜ä¸€ä¸ªåä¸º<code class="eh mv mw mx mn b">claimants</code>çš„æ•°ç»„ã€‚æœ€åï¼Œåˆ›å»ºä¸€ä¸ªæ·»åŠ æ–°ç´¢èµ”è€…çš„æ–¹æ³•ã€‚</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="dfe2" class="kr ks if mn b fv mr ms l mt mu">contract Arbitration {<br/>  string public description;</span><span id="5344" class="kr ks if mn b fv mz ms l mt mu"><strong class="mn ig">  struct Claimant {<br/>    string opinion;<br/>    address addr;<br/>    address arbiter;<br/>  }</strong></span><span id="5ce9" class="kr ks if mn b fv mz ms l mt mu"><strong class="mn ig">  Claimant[] public claimants;<br/></strong>  <br/>  function setDescription(string _description) {<br/>    description = _description;<br/>  }</span><span id="7ea6" class="kr ks if mn b fv mz ms l mt mu"><strong class="mn ig">  function addClaimant(string opinion, address arbiter) {<br/>    if (claimants.length &lt; 2) {<br/>      claimants.push(Claimant(opinion, msg.sender, arbiter));  <br/>    }</strong><br/><strong class="mn ig">  }</strong><br/>}</span></pre><p id="1020" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œ<code class="eh mv mw mx mn b">msg.sender</code>ä¼šç»™æˆ‘ä»¬å‘é€<code class="eh mv mw mx mn b">addClaimant</code>äº¤æ˜“çš„è´¦æˆ·åœ°å€ã€‚<code class="eh mv mw mx mn b">msg</code>ä¹Ÿæœ‰å…¶ä»–<a class="ae kh" href="http://solidity.readthedocs.io/en/develop/units-and-global-variables.html#block-and-transaction-properties" rel="noopener ugc nofollow" target="_blank">æœ‰ä»·å€¼çš„ä¿¡æ¯</a>ä¼ é€’ã€‚</p></div><div class="ab cl kk kl hc km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hn ho hp hq hr"><p id="2932" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨ç”³è¯·äººæ·»åŠ äº†ä»–ä»¬çš„æè®®ä¹‹åï¼Œä»²è£äººå°†èƒ½å¤Ÿé€šè¿‡è°ƒç”¨<code class="eh mv mw mx mn b">getProposals</code>æ¥å®¡æŸ¥å¼‚è®®ã€‚</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="f6b8" class="kr ks if mn b fv mr ms l mt mu">contract Arbitration {</span><span id="5722" class="kr ks if mn b fv mz ms l mt mu">  ...</span><span id="e03a" class="kr ks if mn b fv mz ms l mt mu"><strong class="mn ig">  function getProposals()<br/>    returns (<br/>      string _description,<br/>      string _proposalOne,<br/>      string _proposalTwo<br/>    )<br/>  {<br/>    require(claimants.length == 2);<br/>    return (<br/>      description,<br/>      claimants[0].opinion,<br/>      claimants[1].opinion<br/>    );<br/>  }</strong></span><span id="523c" class="kr ks if mn b fv mz ms l mt mu">}</span></pre><p id="6b9f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨å‡½æ•°å£°æ˜ä¸­ï¼Œä½ ä¼šçœ‹åˆ°æˆ‘ä»¬å®šä¹‰äº†ç”¨<code class="eh mv mw mx mn b">returns</code>å…³é”®å­—è¿”å›çš„å†…å®¹ã€‚æˆ‘ä»¬ä½¿ç”¨<code class="eh mv mw mx mn b">require</code>æ¥å…è®¸ä»£ç ä»…åœ¨ä¸¤ä¸ªç´¢èµ”è€…æäº¤æ—¶ç»§ç»­ã€‚</p></div><div class="ab cl kk kl hc km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hn ho hp hq hr"><p id="25da" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–¹æ³•ï¼Œåªå…è®¸<em class="kd">è¿™ä¸ªä»²è£è€…</em>é€‰æ‹©è·èƒœè€…ã€‚é¦–å…ˆæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ª<code class="eh mv mw mx mn b">selectWinner</code>å°†ä½¿ç”¨çš„åŠ©æ‰‹æ–¹æ³•<code class="eh mv mw mx mn b">verifyArbiter</code>ã€‚<code class="eh mv mw mx mn b">verifyArbiter</code>å¾ªç¯éå†ç´¢èµ”äººï¼Œç¡®ä¿å‘ä»¶äººåœ°å€ä¸æ¯ä¸ªç´¢èµ”äººé€‰æ‹©çš„åœ°å€ç›¸åŒ¹é…ã€‚å¦‚æœrequireæ²¡æœ‰æŠ›å‡ºé”™è¯¯ï¼Œé‚£ä¹ˆå®ƒå°†è®¾ç½®å¥‘çº¦çš„çŠ¶æ€å˜é‡<code class="eh mv mw mx mn b">winningOpinion</code>ã€‚</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="899b" class="kr ks if mn b fv mr ms l mt mu">contract Arbitration {</span><span id="73ec" class="kr ks if mn b fv mz ms l mt mu">  ...</span><span id="31e4" class="kr ks if mn b fv mz ms l mt mu"><strong class="mn ig">  function verifyArbiter() returns (bool isArbiter) {<br/>    for (uint i = 0; i &lt; claimants.length; i++) {<br/>      if (msg.sender != claimants[i].arbiter) {<br/>        return false;<br/>      }<br/>    }</strong></span><span id="c235" class="kr ks if mn b fv mz ms l mt mu"><strong class="mn ig">    return true;<br/>  }</strong></span><span id="1860" class="kr ks if mn b fv mz ms l mt mu"><strong class="mn ig">  function selectWinner(uint proposalNumber) {<br/>    require(verifyArbiter());</strong></span><span id="a05e" class="kr ks if mn b fv mz ms l mt mu"><strong class="mn ig">    winningOpinion = claimants[proposalNumber].opinion;<br/>  }</strong></span><span id="6463" class="kr ks if mn b fv mz ms l mt mu">}</span></pre><h1 id="f2df" class="lr ks if bd kt ls lt lu kx lv lw lx lb ly lz ma le mb mc md lh me mf mg lk mh dt translated">ä¸åˆåŒäº’åŠ¨</h1><p id="2ef8" class="pw-post-body-paragraph jc jd if je b jf lm jh ji jj ln jl jm jn lo jp jq jr lp jt ju jv lq jx jy jz hn dt translated">æ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œ<code class="eh mv mw mx mn b">testrpc</code>ã€‚ç„¶åï¼Œåœ¨æ–°çš„é€‰é¡¹å¡ä¸­è¿è¡Œ<code class="eh mv mw mx mn b">truffle compile</code>ã€<code class="eh mv mw mx mn b">truffle migrate</code>å’Œ<code class="eh mv mw mx mn b">truffle console</code>ï¼Œå°±åƒæˆ‘ä»¬åœ¨ä¸Šä¸€èŠ‚ä¸­æ‰€åšçš„é‚£æ ·ã€‚è®©æˆ‘ä»¬é¦–å…ˆè·å–å¯¹æˆ‘ä»¬çš„åˆåŒçš„å¼•ç”¨ï¼Œå¹¶ä¸ºå…¶æ·»åŠ æè¿°:</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="1d95" class="kr ks if mn b fv mr ms l mt mu">&gt;<strong class="mn ig"> const contract = Arbitration.deployed()</strong></span><span id="e54c" class="kr ks if mn b fv mz ms l mt mu">&gt;<strong class="mn ig"> contract.then(c =&gt; c.description())</strong><br/><em class="kd">''<br/></em>&gt;<strong class="mn ig"> contract.then(c =&gt; c.setDescription('What to eat for dinner'))</strong></span><span id="971b" class="kr ks if mn b fv mz ms l mt mu">&gt;<strong class="mn ig"> contract.then(c =&gt; c.description())<br/></strong><em class="kd">'What to eat for dinner'</em></span></pre><p id="3032" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å¯ä»¥åƒè°ƒç”¨å‡½æ•°ä¸€æ ·è°ƒç”¨å˜é‡åæ¥è®¿é—®çŠ¶æ€:<code class="eh mv mw mx mn b">description()</code>ã€‚</p><p id="3c9f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç°åœ¨ï¼Œå›åˆ°testrpcè¾“å‡ºï¼ŒæŸ¥çœ‹å®ƒç»™å‡ºçš„åä¸ªåœ°å€ã€‚å°†<code class="eh mv mw mx mn b"><em class="kd">ARBITER_ADDRESS</em></code>è®¾ç½®ä¸ºåˆ—è¡¨ä¸­é™¤ç¬¬ä¸€ä¸ªä»¥å¤–çš„ä»»ä½•åœ°å€ï¼Œå› ä¸ºtruffleé»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªå¸æˆ·ä½œä¸ºå‘é€è€…ã€‚</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="bacb" class="kr ks if mn b fv mr ms l mt mu">&gt;<strong class="mn ig"> contract.then(c =&gt; c.addClaimant('burgers', '<em class="kd">ARBITER_ADDRESS</em>'))</strong></span><span id="ed6f" class="kr ks if mn b fv mz ms l mt mu">&gt;<strong class="mn ig"> contract.then(c =&gt; c.claimants(0))<br/></strong><em class="kd">[ 'burgers',<br/>'FIRST_ADDRESS_LISTED',<br/>'ARBITER_ADDRESS' ]</em></span></pre><p id="d4df" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸ºäº†æ·»åŠ ç¬¬äºŒä¸ªç´¢èµ”è€…ï¼Œæˆ‘ä»¬å°†ä¿®æ”¹è°ƒç”¨addClaimantæ–¹æ³•çš„æ–¹å¼ã€‚æœ€åä¸€ä¸ªå‚æ•°å°†ä»testrpcå¸æˆ·åˆ—è¡¨ä¸­è·å–å¦ä¸€ä¸ªåœ°å€ï¼Œå¹¶ä»é‚£é‡Œæ¨¡æ‹Ÿå‘é€ä¸€ä¸ªè°ƒç”¨ã€‚</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="85e1" class="kr ks if mn b fv mr ms l mt mu">&gt;<strong class="mn ig"> contract.then(c =&gt; c.addClaimant('pizza', '<em class="kd">ARBITER_ADDRESS</em>', {from: '<em class="kd">SECOND_CLAIMANT_ADDRESS</em>'}))</strong></span><span id="4482" class="kr ks if mn b fv mz ms l mt mu">&gt;<strong class="mn ig"> contract.then(c =&gt; c.claimants(1))<br/></strong><em class="kd">[ 'pizza',<br/>'SECOND_CLAIMANT_ADDRESS',<br/>'ARBITER_ADDRESS' ]</em></span></pre><p id="a390" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç°åœ¨å‡è®¾ä»²è£äººå¸Œæœ›çœ‹åˆ°ææ¡ˆçš„å½“å‰çŠ¶æ€ã€‚å‡è®¾ä¸¤ä¸ªå£°æ˜è€…éƒ½æŠ•ç¥¨äº†(å¦åˆ™ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯),ä»–ä»¬å°†å¾—åˆ°å¦‚ä¸‹å“åº”:</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="da9d" class="kr ks if mn b fv mr ms l mt mu">&gt; <strong class="mn ig">contract.then(c =&gt; c.getProposals.call())<br/></strong><em class="kd">[ 'What to eat for dinner', 'burgers', 'pizza' ]</em></span></pre><p id="e7fd" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä½¿ç”¨ä»²è£äººçš„åœ°å€ï¼Œè®©æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ªèµ¢å®¶ï¼Œç”¨0ä»£è¡¨æ±‰å ¡ï¼Œç”¨1ä»£è¡¨æŠ«è¨ã€‚</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="bb8d" class="kr ks if mn b fv mr ms l mt mu">&gt; <strong class="mn ig">contract.then(c =&gt; c.selectWinner(1, {from: '<em class="kd">ARBITER_ADDRESS</em>'}))</strong></span></pre><p id="97bc" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä»²è£äººé€‰å‡ºè·èƒœè€…åï¼Œä»»ä½•äººéƒ½å¯ä»¥æŸ¥é˜…è·èƒœè€…çš„åˆåŒã€‚</p><pre class="mi mj mk ml fq mm mn mo mp aw mq dt"><span id="45b0" class="kr ks if mn b fv mr ms l mt mu">&gt; <strong class="mn ig">contract.then(c =&gt; c.winningOpinion())<br/></strong><em class="kd">'pizza'</em></span></pre></div><div class="ab cl kk kl hc km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="hn ho hp hq hr"><p id="08c0" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘ä»¬çŸ¥é“æŠ«è¨ä¼šèµ¢ï¼Œä½†å†™è¿™ä»½åˆåŒä»ç„¶æ˜¯ç†è§£ä»¥å¤ªåŠçš„ä¸€æ¬¡å¯Œæœ‰æˆæ•ˆçš„ç»ƒä¹ ã€‚ç‚¹å‡»æŸ¥çœ‹ä»£ç <a class="ae kh" href="https://github.com/captDaylight/arbitration-tutorial" rel="noopener ugc nofollow" target="_blank">ï¼</a></p><figure class="mi mj mk ml fq hw"><div class="bz el l di"><div class="nf ng l"/></div></figure></div></div>    
</body>
</html>