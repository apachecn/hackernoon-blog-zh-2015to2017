# å¸¦æœ‰ React Native å’Œ Socket.io çš„ç®€å•æ¶ˆæ¯åº”ç”¨

> åŸæ–‡ï¼š<https://medium.com/hackernoon/a-simple-messaging-app-with-react-native-and-socket-io-e1cae3df7bda>

![](img/5e8ca8d0ba9630922cb45e5826147522.png)

[Source](https://github.com/vinnyoodles/react-native-socket-io-example)

æˆ‘ä»æœªæƒ³è¿‡æˆ‘ä¼šå†™ä¸€ç¯‡å…³äºåª’ä½“çš„æ–‡ç« ï¼Œä½†è€å®è¯´ï¼Œæˆ‘æ‰¾ä¸åˆ°ä¸€ä¸ªåˆé€‚çš„æŒ‡å—æˆ–ä¾‹å­æ¥è¯´æ˜å¦‚ä½•åœ¨è¿™ä¸ªç”¨ä¾‹ä¸­ä½¿ç”¨ [React Native](https://github.com/facebook/react-native) å’Œ [Socket.io](http://socket.io/) ã€‚æˆ‘ç¡®å®åœ¨[æ‰¾åˆ°äº†ä¸€äº›](/@ekryski/how-to-actually-use-socket-io-in-react-native-39082d8d6172#.qjp8o5hs3) [ç›¸å…³çš„](https://github.com/badfortrains/wsExample) [ç¤ºä¾‹](https://github.com/skellock/phoenix-react-native-mashup)ï¼Œä½†æ˜¯å®ƒä»¬è¦ä¹ˆä¸å¤Ÿæè¿°æ€§ï¼Œè¦ä¹ˆä½¿ç”¨äº†ä¸åŒçš„æŠ€æœ¯å †æ ˆã€‚æ‰€ä»¥ç°åœ¨æ˜¯æˆ‘è´¡çŒ®çŸ¥è¯†è´¢å¯Œçš„æ—¶å€™äº†ã€‚

è®©æˆ‘ä»¬å¼€å§‹å§ã€‚é¦–å…ˆï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨å’Œå®¢æˆ·æœºã€‚è¿™ä¸ªä¾‹å­å°†ä½¿ç”¨ä¸€ä¸ª Express æœåŠ¡å™¨å’Œä¸€ä¸ªæ™®é€šçš„ React æœ¬åœ°é¡¹ç›®ã€‚ä¸€æ—¦å®ƒä»¬éƒ½è¢«åˆ›å»ºï¼Œå®ƒä»¬éƒ½å¿…é¡»æŒ‡å‘åŒä¸€ä¸ª web å¥—æ¥å­—ï¼Œè¿™å°±æ˜¯æ•°æ®åœ¨ä¸¤è€…ä¹‹é—´ä¼ è¾“çš„æ–¹å¼ã€‚

ä¸€ä¸ªæœåŠ¡å™¨å’Œå¤šä¸ªå®¢æˆ·ç«¯ä¹‹é—´å¯ä»¥æ‰“å¼€å¤šä¸ªå¥—æ¥å­—ã€‚Socket.io ä½¿å¾—å•ä¸ªå®¢æˆ·ç«¯ã€å¤šä¸ªå®¢æˆ·ç«¯æˆ–æ‰€æœ‰å®¢æˆ·ç«¯ä¹‹é—´çš„å¯¹è¯å˜å¾—éå¸¸ç®€å•ã€‚

ä¸€æ—¦å»ºç«‹äº†å¥—æ¥å­—ï¼Œä¸¤ç«¯å°±å¯ä»¥æ— å»¶è¿Ÿåœ°è‡ªç”±é€šè¯(æ¯” HTTP è¯·æ±‚æ›´å¿«ğŸ˜Šã€‚).

è¦ä½¿ç”¨ web å¥—æ¥å­—ï¼Œåªéœ€é€šè¿‡æŒ‡å®šçš„é€šé“å‘é€æ•°æ®/æ¶ˆæ¯ã€‚

```
socket.emit('channel-name', 'Hello world!');
```

è¿™å¯¹äºæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½æ˜¯ä¸€æ ·çš„ã€‚å¦ä¸€ç«¯åªéœ€ç›‘å¬æŒ‡å®šçš„é¢‘é“ã€‚

```
socket.on('channel-name', (message) => ... /* some logic */);
```

ç®€å•çš„æ•°æ®ç»“æ„ä¹Ÿå¯ä»¥é€šè¿‡å¥—æ¥å­—å‘é€ï¼Œæ‰€ä»¥æ•°ç»„å’Œå¯¹è±¡æ˜¯å…¬å¹³çš„æ¸¸æˆã€‚

å›åˆ°æˆ‘ä»¬çš„ç”¨ä¾‹ã€‚å½“ç”¨æˆ·è¾“å…¥å¹¶å‘é€æ¶ˆæ¯æ—¶ï¼Œå®ƒå°†è¢«å‘é€åˆ°æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨å¯ä»¥æ‰§è¡Œä¸€äº›é€»è¾‘ï¼Œç„¶åæœåŠ¡å™¨å°†æ¶ˆæ¯å‘é€åˆ°æ‰€æœ‰å¥—æ¥å­—(å…¶ä»–ç”¨æˆ·)ã€‚æ¶ˆæ¯åº”ç”¨ç¨‹åºåº”è¯¥åœ¨ä¼šè¯ä¹‹é—´å­˜å‚¨æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€åœ¨æ¶ˆæ¯è¢«è½¬å‘æ—¶å°†å…¶ä¿å­˜åœ¨æ•°æ®åº“ä¸­ã€‚

æ¶ˆæ¯æ¨¡å‹å¯èƒ½ç±»ä¼¼äº:

```
{ 
  text: *String*,
  createdAt: *Date*,
  userId: *ObjectId*,
  chatId: *ObjectId* 
}
```

ä¸ºäº†è·Ÿè¸ªä¸€ä¸ªä»»ä½•æ•°é‡çš„äººéƒ½å¯ä»¥åŠ å…¥çš„å¼€æ”¾èŠå¤©å®¤ï¼Œä¸€ä¸ª*æ ‡è¯†ç¬¦*å­—æ®µå°†æœ‰åŠ©äºè·Ÿè¸ªæ¶ˆæ¯ã€‚å¯¹äºç§»åŠ¨åº”ç”¨ç¨‹åºï¼Œæ¯ä¸ªè®¾å¤‡å°†å……å½“ä¸€ä¸ªç”¨æˆ·ï¼Œå¯¹äºæ–°ç”¨æˆ·ï¼Œä»–ä»¬å°†è¢«åˆ†é…ä¸€ä¸ª *id* å­—æ®µï¼Œè¯¥å­—æ®µåº”ä¿å­˜åœ¨è®¾å¤‡çš„æœ¬åœ°å­˜å‚¨ä¸­ã€‚å¦‚æœè®¾å¤‡ä¸Šä¿å­˜æœ‰ *id* å­—æ®µï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šç”¨æˆ·æ˜¯å¦åŠ å…¥äº†èŠå¤©å®¤ã€‚ä¸ºäº†å¤„ç†å¤šä¸ªèŠå¤©å®¤ï¼Œåº”è¯¥ä½¿ç”¨æŸç§æ˜ å°„ç»“æ„ï¼Œä»¥ä¾¿æˆ‘ä»¬çŸ¥é“ç”¨æˆ·åœ¨å“ªä¸ªæˆ¿é—´(å¦‚æœå­˜åœ¨çš„è¯)ã€‚

å…³äºæˆ‘å‰é¢æåˆ°çš„æŒä¹…æ€§ï¼Œå½“ç”¨æˆ·åŠ å…¥ä¸€ä¸ªæˆ¿é—´æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ç»™å®ƒä»»ä½•é¢„å…ˆå­˜åœ¨çš„æ¶ˆæ¯ï¼Œè¿™äº›æ¶ˆæ¯ä¿å­˜åœ¨ç‰¹å®šæˆ¿é—´çš„æ•°æ®åº“ä¸­ã€‚

æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ª[å·¥ä½œæ¶ˆæ¯åº”ç”¨](https://github.com/vinnyoodles/react-native-socket-io-example)çš„å·¥ä½œç¤ºä¾‹ã€‚éå¸¸æ„Ÿè°¢[æ³•é‡Œå¾·Â·è¨è²](https://medium.com/u/fea63d4e28f3?source=post_page-----e1cae3df7bda--------------------------------)çš„[æ¶ˆæ¯ç»„ä»¶](https://github.com/FaridSafi/react-native-gifted-chat)è®©è¿™å˜å¾—å¦‚æ­¤ç®€å•ã€‚å°½æƒ…äº«å—å§ï¼

æˆ‘æ˜¯å¼—å‰å°¼äºšç†å·¥å¤§å­¦è®¡ç®—æœºç§‘å­¦ä¸“ä¸šçš„å­¦ç”Ÿï¼Œå–œæ¬¢å†™ä»£ç å’Œä¸¾é‡ğŸ’ªã€‚ [LinkedIn](https://www.linkedin.com/in/vinnyoodles) [Github](https://github.com/vinnyoodles)

[![](img/50ef4044ecd4e250b5d50f368b775d38.png)](http://bit.ly/HackernoonFB)[![](img/979d9a46439d5aebbdcdca574e21dc81.png)](https://goo.gl/k7XYbx)[![](img/2930ba6bd2c12218fdbbf7e02c8746ff.png)](https://goo.gl/4ofytp)

> [é»‘å®¢ä¸­åˆ](http://bit.ly/Hackernoon)æ˜¯é»‘å®¢å¦‚ä½•å¼€å§‹ä»–ä»¬çš„ä¸‹åˆã€‚æˆ‘ä»¬æ˜¯é˜¿å¦¹å®¶åº­çš„ä¸€å‘˜ã€‚æˆ‘ä»¬ç°åœ¨[æ¥å—æŠ•ç¨¿](http://bit.ly/hackernoonsubmission)å¹¶ä¹æ„[è®¨è®ºå¹¿å‘Š&èµåŠ©](mailto:partners@amipublications.com)æœºä¼šã€‚
> 
> å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•…äº‹ï¼Œæˆ‘ä»¬æ¨èä½ é˜…è¯»æˆ‘ä»¬çš„[æœ€æ–°ç§‘æŠ€æ•…äº‹](http://bit.ly/hackernoonlatestt)å’Œ[è¶‹åŠ¿ç§‘æŠ€æ•…äº‹](https://hackernoon.com/trending)ã€‚ç›´åˆ°ä¸‹ä¸€æ¬¡ï¼Œä¸è¦æŠŠä¸–ç•Œçš„ç°å®æƒ³å½“ç„¶ï¼

![](img/be0ca55ba73a573dce11effb2ee80d56.png)