<html>
<head>
<title>Up and Running with Universal Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨é€šç”¨ç»„ä»¶å¯åŠ¨å’Œè¿è¡Œ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/up-and-running-with-universal-components-66678132cad?source=collection_archive---------11-----------------------#2017-09-25">https://medium.com/hackernoon/up-and-running-with-universal-components-66678132cad?source=collection_archive---------11-----------------------#2017-09-25</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/5d4f909f7371c477d31be0cd727aa104.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yNDn_b-ahQRgaD4fNIRJAQ.jpeg"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Photo by <a class="ae ih" href="https://unsplash.com/photos/mMcqMYJfopo?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Patrick Fore</a> on <a class="ae ih" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="17cb" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">æˆ‘æœ€è¿‘<a class="ae ih" href="https://labs.mlssoccer.com/the-road-to-universal-components-at-major-league-soccer-eeb7aac27e6c" rel="noopener ugc nofollow" target="_blank">å†™äº†</a>ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨ç¾å›½èŒä¸šè¶³çƒå¤§è”ç›Ÿé€‰æ‹©é€šç”¨ç»„ä»¶ï¼Œæˆ‘æ”¶åˆ°äº†å¾ˆå¤šåé¦ˆï¼Œè¯¢é—®æˆ‘ä»¬å®é™…ä¸Šå¦‚ä½•å®æ–½æˆ‘ä»¬çš„UCsç³»ç»Ÿçš„ç»†èŠ‚ã€‚</p><figure class="kf kg kh ki fq hw"><div class="bz el l di"><div class="kj kk l"/></div></figure><figure class="kf kg kh ki fq hw"><div class="bz el l di"><div class="kj kk l"/></div></figure><p id="a4fe" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">è™½ç„¶å¯¹æˆ‘ä»¬æ¥è¯´å¼€æºæˆ‘ä»¬çš„MLSç‰¹å®šç»„ä»¶æ²¡æœ‰æ„ä¹‰ï¼Œä½†æˆ‘ä¸æƒ³è®©æ¯ä¸ªäººéƒ½æŒ‚åœ¨æˆ‘ä»¬å¦‚ä½•å®ç°UCsçš„é—®é¢˜ä¸Šï¼Œæ‰€ä»¥æˆ‘åˆ›å»ºäº†ä¸€ä¸ª<a class="ae ih" href="https://github.com/kkemple/universal-components-example" rel="noopener ugc nofollow" target="_blank">ç¤ºä¾‹åº“</a>ï¼Œå¹¶å°†åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä»‹ç»å¦‚ä½•è®¾ç½®æ‚¨è‡ªå·±çš„UCç³»ç»Ÿã€‚</p><blockquote class="kl km kn"><p id="9b1b" class="jh ji ko jj b jk jl jm jn jo jp jq jr kp jt ju jv kq jx jy jz kr kb kc kd ke hn dt translated">éƒ¨ç½²çš„æ•…äº‹ä¹¦å¯ä»¥åœ¨<a class="ae ih" href="http://universal-components-example-storybook.surge.sh" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>æ‰¾åˆ°ã€‚</p></blockquote><h1 id="57aa" class="ks kt ik bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp dt translated">é€‰æ‹©è§£å†³æ–¹æ¡ˆ</h1><p id="5ac7" class="pw-post-body-paragraph jh ji ik jj b jk lq jm jn jo lr jq jr js ls ju jv jw lt jy jz ka lu kc kd ke hn dt translated">å®æ–½UCsæ—¶ï¼Œæ‚¨å°†é¢ä¸´çš„ç¬¬ä¸€ä¸ªæŒ‘æˆ˜æ˜¯æ‚¨çš„åº“åŸºäºä»€ä¹ˆè§£å†³æ–¹æ¡ˆã€‚ç›®å‰æœ‰ä¸¤ç§é€‰æ‹©ï¼Œ<code class="eh lv lw lx ly b"><a class="ae ih" href="https://github.com/necolas/react-native-web" rel="noopener ugc nofollow" target="_blank">react-native-web</a></code> (RNW)å’Œ<code class="eh lv lw lx ly b"><a class="ae ih" href="https://github.com/lelandrichardson/react-primitives" rel="noopener ugc nofollow" target="_blank">react-primitives</a></code> (RP)ã€‚åœ¨ç¾å›½èŒä¸šè¶³çƒå¤§è”ç›Ÿï¼Œæˆ‘ä»¬å†³å®šé€‰æ‹©RNWæœ‰ä¸¤ä¸ªåŸå› :</p><ol class=""><li id="db93" class="lz ma ik jj b jk jl jo jp js mb jw mc ka md ke me mf mg mh dt translated">å®ƒæ¯”react-primitivesæ›´æˆç†Ÿã€‚è¿™å¬èµ·æ¥å¯èƒ½å¾ˆå¥‡æ€ªï¼Œå› ä¸ºä¸¤è€…åœ¨æŠ€æœ¯ä¸Šéƒ½å¤„äºæ—©æœŸalphaé˜¶æ®µï¼Œä½†RNWç›®å‰ä¸React Nativeæ——é¼“ç›¸å½“ï¼Œå¹¶æ”¯æŒReact 16ã€‚(<a class="ae ih" href="https://github.com/airbnb/react-sketchapp/issues/104" rel="noopener ugc nofollow" target="_blank">https://github.com/airbnb/react-sketchapp/issues/104</a>)<br/>è¿™æ„å‘³ç€RNWå°†ä¸<code class="eh lv lw lx ly b">create-react-app</code>ã€<code class="eh lv lw lx ly b">create-react-native-app</code>å’Œ<code class="eh lv lw lx ly b">react-native init</code>ä¸€èµ·å¼€ç®±å³ç”¨ã€‚CRAå’ŒCRNAçš„ä¾‹å­éƒ½å¯ä»¥åœ¨æˆ‘åœ¨æœ¬æ–‡å¼€å¤´æåˆ°çš„ä¾‹å­åº“ä¸­æ‰¾åˆ°ã€‚</li><li id="42d5" class="lz ma ik jj b jk mi jo mj js mk jw ml ka mm ke me mf mg mh dt translated">RPä½¿ç”¨äº†<code class="eh lv lw lx ly b">Touchable</code>åŸè¯­ï¼Œå®ƒåœ¨æŠ€æœ¯ä¸Šå¹¶ä¸ç›´æ¥æ˜ å°„åˆ°RNã€‚React Nativeä¸­æœ‰ä¸€ä¸ª<code class="eh lv lw lx ly b">Touchable</code> apiï¼Œä½†å®ƒä¸æ˜¯åƒ<code class="eh lv lw lx ly b">TouchableOpacity</code>æˆ–ä»»ä½•å…¶ä»–React Native touchablesé‚£æ ·çš„ç»„ä»¶ã€‚è¿™éœ€è¦æ›´å¤æ‚çš„è®¾ç½®ã€‚</li></ol><h1 id="2d1f" class="ks kt ik bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp dt translated">è®¾ç½®é¡¹ç›®</h1><p id="fc12" class="pw-post-body-paragraph jh ji ik jj b jk lq jm jn jo lr jq jr js ls ju jv jw lt jy jz ka lu kc kd ke hn dt translated">æˆ‘ä»¬å°†ä½¿ç”¨<a class="ae ih" href="https://github.com/lerna/lerna" rel="noopener ugc nofollow" target="_blank"> Lerna </a>æ¥è®¾ç½®ä¸€ä¸ªmonorepoã€‚è¿™å°†ä½¿ç®¡ç†æˆ‘ä»¬çš„é€šç”¨ç»„ä»¶åŒ…(ä»¥åŠæˆ‘ä»¬å°†æ¥å¯èƒ½åˆ›å»ºçš„ä»»ä½•åŒ…)çš„éƒ¨ç½²å˜å¾—æ›´åŠ å®¹æ˜“ã€‚</p><p id="4e24" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£…Lernaã€‚</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="fc25" class="mr kt ik ly b fv ms mt l mu mv">yarn add --global lerna</span></pre><p id="5175" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">ç„¶åæˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬çš„é¡¹ç›®åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œä»é¡¹ç›®çš„æ ¹ç›®å½•è¿è¡Œ<code class="eh lv lw lx ly b">yarn init</code>æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„<code class="eh lv lw lx ly b">package.json</code>ï¼Œç„¶åè¿è¡Œ<code class="eh lv lw lx ly b">lerna init</code>æ¥è®¾ç½®Lernaã€‚</p><p id="71c5" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">è¿™å°†åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„è®¾ç½®ã€‚æ‚¨åº”è¯¥æœ‰ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„é¡¹ç›®:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="3573" class="mr kt ik ly b fv ms mt l mu mv">packages/<br/>lerna.json<br/>package.json</span></pre><p id="96ae" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">è®©æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹æ·»åŠ ä¸€ä¸ª<code class="eh lv lw lx ly b">.gitignore</code>,å¹¶ç¡®ä¿å¿½ç•¥æ‰€æœ‰æˆ‘ä»¬æœ€ç»ˆå¯èƒ½ä½¿ç”¨çš„<code class="eh lv lw lx ly b">node_modules</code>ç›®å½•ã€‚</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="237d" class="mr kt ik ly b fv ms mt l mu mv">**/node_modules/**</span></pre><p id="ded0" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">ç°åœ¨æˆ‘ä»¬åº”è¯¥æœ‰ä¸€ä¸ªè¿™æ ·çš„é¡¹ç›®ç»“æ„:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="009f" class="mr kt ik ly b fv ms mt l mu mv">packages/<br/>.gitignore<br/>lerna.json<br/>package.json</span></pre><p id="cdc5" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦åˆ›å»ºæˆ‘ä»¬çš„<code class="eh lv lw lx ly b">universal-components</code>åŒ…ã€‚åœ¨<code class="eh lv lw lx ly b">packages</code>ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªåä¸º<code class="eh lv lw lx ly b">universal-components</code>çš„æ–°æ–‡ä»¶å¤¹ã€‚ç„¶åå°†<code class="eh lv lw lx ly b">cd</code>æ”¾å…¥è¯¥ç›®å½•ï¼Œå†æ¬¡è¿è¡Œ<code class="eh lv lw lx ly b">yarn init</code>(å¯¹äºè¿™ä¸ªåŒ…ï¼Œä½¿ç”¨æ‚¨æƒ³è¦åœ¨åº”ç”¨ç¨‹åºä¸­å¯¼å…¥ç»„ä»¶çš„åç§°)ã€‚</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="4473" class="mr kt ik ly b fv ms mt l mu mv">packages/<br/>  universal-components/<br/>    package.json<br/>lerna.json<br/>package.json</span></pre><p id="2e1e" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†æˆ‘ä»¬çš„åŒ…ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®é€šç”¨ç»„ä»¶ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦<a class="ae ih" href="https://babeljs.io/" rel="noopener ugc nofollow" target="_blank"> Babel </a>æ”¯æŒæµ‹è¯•/æ•…äº‹ä¹¦çš„ä»£ç ä¼ è¾“ï¼Œä»¥åŠRNWçš„åˆ«åã€‚</p><p id="898c" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">é¦–å…ˆè®©æˆ‘ä»¬å®‰è£…æ‰€æœ‰éœ€è¦çš„<code class="eh lv lw lx ly b">babel</code>ä¾èµ–é¡¹:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="c99c" class="mr kt ik ly b fv ms mt l mu mv">// from within packages/universal-components</span><span id="5392" class="mr kt ik ly b fv mw mt l mu mv">yarn add -D babel-plugin-module-resolver babel-plugin-transform-class-properties babel-plugin-transform-es2015-modules-commonjs babel-preset-flow babel-preset-react babel-preset-stage-2 flow-bin</span></pre><p id="e34b" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">é‚£å¯æ˜¯å¥½å¤šæ¨¡å—å•Šï¼è®©æˆ‘ä»¬çœ‹çœ‹å®ƒä»¬å„è‡ªçš„åŠŸèƒ½:</p><ul class=""><li id="e83e" class="lz ma ik jj b jk jl jo jp js mb jw mc ka md ke mx mf mg mh dt translated"><strong class="jj il">babel-plugin-module-resolver</strong>:ç”¨äºåˆ«åå’Œæ·»åŠ <code class="eh lv lw lx ly b">.web.js</code>æ‰©å±•æ”¯æŒ</li><li id="fe74" class="lz ma ik jj b jk mi jo mj js mk jw ml ka mm ke mx mf mg mh dt translated"><strong class="jj il">babel-plugin-transform-class-properties:</strong>ç”¨äºæ·»åŠ å¯¹React Nativeä¸­æ”¯æŒçš„ç±»å±æ€§çš„æ”¯æŒã€‚</li><li id="915f" class="lz ma ik jj b jk mi jo mj js mk jw ml ka mm ke mx mf mg mh dt translated"><strong class="jj il">babel-plugin-transform-es 2015-modules-commonjs:</strong>ç”¨äºæ·»åŠ å¯¹å¯¼å…¥/å¯¼å‡ºè¯­å¥çš„æ”¯æŒï¼Œæ— éœ€<code class="eh lv lw lx ly b">.default</code></li><li id="6825" class="lz ma ik jj b jk mi jo mj js mk jw ml ka mm ke mx mf mg mh dt translated"><strong class="jj il">é€šå¤©å¡”-é¢„è®¾-æµé‡:</strong>ç”¨äºæ·»åŠ æµé‡æ”¯æŒ</li><li id="4137" class="lz ma ik jj b jk mi jo mj js mk jw ml ka mm ke mx mf mg mh dt translated"><strong class="jj il">å·´åˆ«-é¢„è®¾-ååº”:</strong>ç”¨äºæ·»åŠ ååº”æ”¯æŒ</li><li id="60bb" class="lz ma ik jj b jk mi jo mj js mk jw ml ka mm ke mx mf mg mh dt translated"><strong class="jj il"> babel-preset-stage-2 </strong>:ç”¨äºæ·»åŠ <code class="eh lv lw lx ly b">async/await</code>å’Œ<code class="eh lv lw lx ly b">rest/spread</code>è¿ç®—ç¬¦ä¹‹ç±»çš„ä¸œè¥¿(å—React Nativeæ”¯æŒ)</li><li id="c70f" class="lz ma ik jj b jk mi jo mj js mk jw ml ka mm ke mx mf mg mh dt translated"><strong class="jj il"> flow-bin </strong>:ç”¨äºå¯¹æˆ‘ä»¬çš„ç»„ä»¶è¿è¡Œæµ</li></ul><p id="b333" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ–°çš„<code class="eh lv lw lx ly b">universal-components</code>åŒ…ä¸­åˆ›å»ºä¸€ä¸ª<code class="eh lv lw lx ly b">.babelrc</code>æ–‡ä»¶ï¼Œç„¶åæ·»åŠ ä»¥ä¸‹é…ç½®:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="6099" class="mr kt ik ly b fv ms mt l mu mv">{<br/>  "plugins": [<br/>    "transform-class-properties",<br/>    "transform-es2015-modules-commonjs",<br/>    [<br/>      "module-resolver",<br/>      {<br/>        "alias": {<br/>          "react-native": "react-native-web"<br/>        },<br/>        "extensions": ["web.js", ".js"]<br/>      }<br/>    ]<br/>  ],<br/>  "presets": ["react", "stage-2", "flow"]<br/>}</span></pre><p id="8489" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">æ—¢ç„¶æˆ‘ä»¬å¯ä»¥æ”¯æŒé€šç”¨ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…React:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="3bc2" class="mr kt ik ly b fv ms mt l mu mv">yarn add -D react react-dom react-native-web prop-types</span></pre><p id="a1ba" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">æˆ‘ä»¬å°†å®ƒä»¬æ·»åŠ ä¸º<code class="eh lv lw lx ly b"> devDependencies</code>ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å¸Œæœ›å®ƒä»¬ä¸æˆ‘ä»¬çš„é€šç”¨ç»„ä»¶ä¸€èµ·å®‰è£…ã€‚åœ¨æœ¬åœ°ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ä¸æƒ³å®‰è£…<code class="eh lv lw lx ly b">react-native-web</code>ï¼Œåä¹‹äº¦ç„¶ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†å®ƒä»¬æ·»åŠ ä¸º<code class="eh lv lw lx ly b">devDepenencies</code>ï¼Œå¹¶å°†å®ƒä»¬åŒ…å«åœ¨æˆ‘ä»¬çš„<code class="eh lv lw lx ly b">package.json</code>æ–‡ä»¶çš„<code class="eh lv lw lx ly b">peerDepencencies</code>éƒ¨åˆ†ä¸­ã€‚è¿™æ ·ï¼Œå½“UCåŒ…çš„ç”¨æˆ·å®‰è£…æ—¶ï¼Œä»–ä»¬å°†è¢«è­¦å‘Šæ‰€éœ€çš„æœªæ»¡è¶³çš„å¯¹ç­‰ä¾èµ–ã€‚</p><blockquote class="kl km kn"><p id="5002" class="jh ji ko jj b jk jl jm jn jo jp jq jr kp jt ju jv kq jx jy jz kr kb kc kd ke hn dt translated">æˆ‘ä»¬æ²¡æœ‰æ·»åŠ <code class="eh lv lw lx ly b">react-native</code>ä½œä¸º<code class="eh lv lw lx ly b">devDependency</code>ï¼Œå› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯Storybookçš„webç‰ˆæœ¬ï¼Œåœ¨è¿™ä¸ªç¯å¢ƒä¸­ä¸éœ€è¦React Nativeã€‚</p></blockquote><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="52ec" class="mr kt ik ly b fv ms mt l mu mv">// in packages/universal-components/package.json</span><span id="b063" class="mr kt ik ly b fv mw mt l mu mv">"peerDependencies": {<br/>  "prop-types": "&gt;=15",<br/>  "react": "&gt;=15",<br/>  "react-dom": "&gt;=15",<br/>  "react-native": "&gt;=0.42",<br/>  "react-native-web": "&gt;=0.0.129"<br/>}</span></pre><p id="b054" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">æˆ‘ä»¬éœ€è¦åšçš„æœ€åä¸€ä»¶äº‹æ˜¯åˆ›å»ºä¸€ä¸ª<code class="eh lv lw lx ly b">components</code>ç›®å½•ï¼Œå®ƒå°†æ˜¯æˆ‘ä»¬é€šç”¨ç»„ä»¶çš„æœªæ¥ä¹‹å®¶ã€‚ğŸ </p><p id="cb3d" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">å®Œæˆåï¼Œæ‚¨çš„é¡¹ç›®åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="130b" class="mr kt ik ly b fv ms mt l mu mv">packages/<br/>  universal-components/<br/>    components<br/>    .babelrc<br/>    package.json<br/>    yarn.lock<br/>lerna.json<br/>package.json</span></pre><p id="d7a6" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">å¥½å§ï¼ç°åœ¨æˆ‘ä»¬å‡†å¤‡å¼€å‘æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªé€šç”¨ç»„ä»¶ï¼ğŸ‰</p><h1 id="44b2" class="ks kt ik bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp dt translated">è®¾ç½®æ•…äº‹ä¹¦</h1><p id="1a88" class="pw-post-body-paragraph jh ji ik jj b jk lq jm jn jo lr jq jr js ls ju jv jw lt jy jz ka lu kc kd ke hn dt translated">ä¸ºäº†ç¡®ä¿æˆ‘ä»¬ä¿æŒä¸€ä¸ªæœ‰ç»„ç»‡çš„å¼€å‘è¿‡ç¨‹(å¹¶ç¡®ä¿æˆ‘ä»¬çš„ç»„ä»¶åœ¨webä¸Šæ­£å¸¸å·¥ä½œ)ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<a class="ae ih" href="https://storybook.js.org/" rel="noopener ugc nofollow" target="_blank"> Storybook </a>æ¥éš”ç¦»å¼€å‘å¹¶è·å¾—å…³äºç»„ä»¶å¤–è§‚å’Œè¡Œä¸ºçš„å®æ—¶åé¦ˆã€‚</p><p id="d34a" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯å°†storybookä½œä¸ºä¾èµ–é¡¹æ·»åŠ åˆ°æˆ‘ä»¬çš„<code class="eh lv lw lx ly b">universal-components</code>åŒ…ä¸­ã€‚</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="f223" class="mr kt ik ly b fv ms mt l mu mv">// from within packages/universal-components</span><span id="ab52" class="mr kt ik ly b fv mw mt l mu mv">yarn add -D @storybook/react</span></pre><p id="67af" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬çš„æ•…äº‹ä¹¦é…ç½®åˆ›å»ºä¸€ä¸ª<code class="eh lv lw lx ly b">.storybook</code>ç›®å½•:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="f19c" class="mr kt ik ly b fv ms mt l mu mv">packages/<br/>  universal-components/<br/>    .storybook/<br/>    components/<br/>    .babelrc<br/>    package.json<br/>    yarn.lock<br/>lerna.json<br/>package.json</span></pre><p id="cd5e" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">åœ¨<code class="eh lv lw lx ly b">.storybook</code>å†…éƒ¨æ·»åŠ ä¸€ä¸ª<code class="eh lv lw lx ly b">config.js</code>æ–‡ä»¶ã€‚è¿™å°±æ˜¯æˆ‘ä»¬çš„åŸºæœ¬æ•…äº‹ä¹¦é…ç½®ã€‚åœ¨<code class="eh lv lw lx ly b">config.js</code>å†…æ·»åŠ ä»¥ä¸‹å†…å®¹:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="e25a" class="mr kt ik ly b fv ms mt l mu mv">import { configure } from '@storybook/react';</span><span id="3230" class="mr kt ik ly b fv mw mt l mu mv">const req = require.context(<br/>  '../components/', // path where stories live<br/>  true, // recursive?<br/>  /\__stories__\/.*.js$/, // story files match this pattern<br/>);</span><span id="48f8" class="mr kt ik ly b fv mw mt l mu mv">function loadStories() {<br/>  req.keys().forEach(module =&gt; req(module));<br/>}</span><span id="ed94" class="mr kt ik ly b fv mw mt l mu mv">configure(loadStories, module);</span></pre><p id="3636" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">é‡è¦çš„æ˜¯æˆ‘ä»¬é…ç½®Storybookåœ¨æˆ‘ä»¬çš„<code class="eh lv lw lx ly b">components</code>ç›®å½•ä¸­æŸ¥æ‰¾<code class="eh lv lw lx ly b">__stories__</code>ç›®å½•å¹¶åŠ è½½å®ƒä»¬ã€‚</p><p id="34ea" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">è¿™è®©æˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„æ•…äº‹æ”¾åœ¨ç›¸å…³ç»„ä»¶çš„æ—è¾¹ï¼Œè¿™äº›ç»„ä»¶å¾ˆå¥½ï¼Œå¹¶ä¸”ä¸é»˜è®¤çš„<a class="ae ih" href="https://facebook.github.io/jest/" rel="noopener ugc nofollow" target="_blank"> Jest </a>é…ç½®å¾ˆå¥½åœ°åŒ¹é…(ç¨åå°†è¯¦ç»†ä»‹ç»æµ‹è¯•)ã€‚</p><p id="0b6c" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¿…é¡»æ”¹å˜Storybookçš„é»˜è®¤Webpacké…ç½®ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥æ­£ç¡®åœ°è§£æå¯¼å…¥çš„é€šç”¨ç»„ä»¶ã€‚åœ¨<code class="eh lv lw lx ly b">.storybook</code>ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª<code class="eh lv lw lx ly b">webpack.config.js</code>æ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹å†…å®¹:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="c621" class="mr kt ik ly b fv ms mt l mu mv">const path = require('path');<br/>const webpack = require('webpack');<br/>// use babel-minify due to UglifyJS errors from modern JS syntax<br/>const MinifyPlugin = require('babel-minify-webpack-plugin');</span><span id="bca9" class="mr kt ik ly b fv mw mt l mu mv">// get default webpack config for @storybook/react<br/>const genDefaultConfig = require('@storybook/react/dist/server/config/defaults/webpack.config.js');</span><span id="8adf" class="mr kt ik ly b fv mw mt l mu mv">const DEV = process.env.NODE_ENV !== 'production';<br/>const prodPlugins = [<br/>  new webpack.DefinePlugin({<br/>    'process.env.NODE_ENV': JSON.stringify(<br/>      process.env.NODE_ENV || 'development'<br/>    ),<br/>    'process.env.__REACT_NATIVE_DEBUG_ENABLED__': DEV,<br/>  }),<br/>  new webpack.optimize.OccurrenceOrderPlugin(),<br/>  new MinifyPlugin(),<br/>];</span><span id="ba59" class="mr kt ik ly b fv mw mt l mu mv">module.exports = (baseConfig, env) =&gt; {<br/>  const config = genDefaultConfig(baseConfig, env);<br/>  const defaultPlugins = config.plugins;<br/>  const overwrite = {<br/>    devtool: 'inline-source-map',<br/>    module: {<br/>      rules: [<br/>        {<br/>          test: /\.js$/,<br/>          exclude: /node_modules/,<br/>          loader: 'babel-loader',<br/>          query: { cacheDirectory: true },<br/>        },<br/>      ],<br/>    },<br/>    plugins: DEV ? defaultPlugins : prodPlugins,<br/>  };</span><span id="c656" class="mr kt ik ly b fv mw mt l mu mv">  return Object.assign(config, overwrite);<br/>};</span></pre><p id="7e28" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨Storybookçš„ç”Ÿäº§æ„å»ºè¿‡ç¨‹ä¸­ä¸ä¼šé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œå¹¶å‡†å¤‡åˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼Œä½†é¦–å…ˆè®©æˆ‘ä»¬åœ¨<code class="eh lv lw lx ly b">package.json</code>ä¸­æ·»åŠ å‡ ä¸ª<code class="eh lv lw lx ly b">script</code>æ¡ç›®ï¼Œè®©æˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—æ›´è½»æ¾ä¸€äº›ã€‚</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="b6b7" class="mr kt ik ly b fv ms mt l mu mv">// in universal-components/package.json</span><span id="7984" class="mr kt ik ly b fv mw mt l mu mv">"scripts": {<br/>  "storybook": "start-storybook -p 9001 -c .storybook",<br/>  "build: "build-storybook"<br/>  ...<br/>},</span></pre><p id="c9b2" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">è®©æˆ‘ä»¬åœ¨componentsä¸­ä¸ºä¸€ä¸ª<code class="eh lv lw lx ly b">Button</code>ç»„ä»¶åˆ›å»ºä¸€ä¸ªæ–°ç›®å½•:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="be23" class="mr kt ik ly b fv ms mt l mu mv">components/<br/>  button/<br/>    __stories__/<br/>      index.js<br/>    index.js</span></pre><p id="b810" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">åœ¨<code class="eh lv lw lx ly b">button/index.js</code>ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç :</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="e565" class="mr kt ik ly b fv ms mt l mu mv">// @flow</span><span id="b42d" class="mr kt ik ly b fv mw mt l mu mv">import React, { Component } from 'react';<br/>import {<br/>  Platform,<br/>  StyleSheet,<br/>  Text,<br/>  TouchableOpacity,<br/>  View,<br/>} from 'react-native';<br/>import PropTypes from 'prop-types';</span><span id="0a04" class="mr kt ik ly b fv mw mt l mu mv">export type ButtonProps = {<br/>  backgroundColor: string,<br/>  fontColor: string,<br/>  onPress: () =&gt; void,<br/>  size: string,<br/>  style: StyleSheet.Styles,<br/>  text: string,<br/>};</span><span id="6fe9" class="mr kt ik ly b fv mw mt l mu mv">const getButtonPadding = (size: string): number =&gt; {<br/>  switch (size) {<br/>    case 'small':<br/>      return 10;<br/>    case 'medium':<br/>      return 14;<br/>    case 'large':<br/>      return 18;<br/>    default:<br/>      return 14;<br/>  }<br/>};</span><span id="5214" class="mr kt ik ly b fv mw mt l mu mv">const getButtonFontSize = (size: string): number =&gt; {<br/>  switch (size) {<br/>    case 'small':<br/>      return 10;<br/>    case 'medium':<br/>      return 16;<br/>    case 'large':<br/>      return 20;<br/>    default:<br/>      return 16;<br/>  }<br/>};</span><span id="aa84" class="mr kt ik ly b fv mw mt l mu mv">export default class Button extends Component&lt;ButtonProps, *&gt; {<br/>  static propTypes = {<br/>    backgroundColor: PropTypes.string,<br/>    fontColor: PropTypes.string,<br/>    onPress: PropTypes.func.isRequired,<br/>    size: PropTypes.string,<br/>    style: PropTypes.oneOfType([<br/>      PropTypes.array,<br/>      PropTypes.object,<br/>      PropTypes.string,<br/>    ]),<br/>    text: PropTypes.string.isRequired,<br/>  };</span><span id="f40f" class="mr kt ik ly b fv mw mt l mu mv">  render = (): React$Element&lt;*&gt; =&gt; {<br/>    const {<br/>      backgroundColor = 'black',<br/>      fontColor = 'white',<br/>      onPress,<br/>      size = 'medium',<br/>      style,<br/>      text,<br/>    } = this.props;<br/>    const computedStyles = styles(backgroundColor, fontColor, size);</span><span id="d0ae" class="mr kt ik ly b fv mw mt l mu mv">    return (<br/>      &lt;TouchableOpacity onPress={onPress}&gt;<br/>        &lt;View style={[computedStyles.container, style]}&gt;<br/>          &lt;Text style={computedStyles.text}&gt;<br/>            {text.toUpperCase()}<br/>          &lt;/Text&gt;<br/>       &lt;/View&gt;<br/>      &lt;/TouchableOpacity&gt;<br/>    );<br/>  };<br/>}</span><span id="6416" class="mr kt ik ly b fv mw mt l mu mv">const styles = (<br/>  backgroundColor: string,<br/>  fontColor: string,<br/>  size: string,<br/>): StyleSheet.styles =&gt;<br/>  StyleSheet.create({<br/>    container: {<br/>    backgroundColor: backgroundColor,<br/>    borderRadius: 3,<br/>    padding: getButtonPadding(size),<br/>  },<br/>  text: {<br/>    backgroundColor: 'transparent',<br/>    color: fontColor,<br/>    fontFamily: Platform.OS === 'web' ? 'sans-serif' : undefined,<br/>    fontSize: getButtonFontSize(size),<br/>    fontWeight: 'bold',<br/>    textAlign: 'center', <br/>  },<br/>});</span></pre><p id="cf85" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªæŒ‰é’®ç»„ä»¶ï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ•…äº‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å®ƒçš„å‘ˆç°ã€‚åœ¨<code class="eh lv lw lx ly b">button/__stories__/index.js</code>å¢åŠ ä»¥ä¸‹å†…å®¹:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="9baf" class="mr kt ik ly b fv ms mt l mu mv">import React from 'react';<br/>import { storiesOf } from '@storybook/react';<br/>import { View, Text, StyleSheet } from 'react-native';</span><span id="ac65" class="mr kt ik ly b fv mw mt l mu mv">import Button from '../';</span><span id="c28e" class="mr kt ik ly b fv mw mt l mu mv">storiesOf('Universal Components', module).add('Button', () =&gt; {<br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;Text style={styles.title}&gt;Button&lt;/Text&gt;<br/>      &lt;View style={styles.example}&gt;<br/>        &lt;Text style={styles.exampleTitle}&gt;Example&lt;/Text&gt;<br/>        &lt;View style={styles.exampleWrapper}&gt;<br/>          &lt;Button<br/>            text="Press Me!"<br/>            onPress={() =&gt; alert('Button Pressed!')}<br/>          /&gt;<br/>        &lt;/View&gt;<br/>      &lt;/View&gt;<br/>    &lt;/View&gt;<br/>  );<br/>});</span><span id="b45c" class="mr kt ik ly b fv mw mt l mu mv">const styles = StyleSheet.create({<br/>  container: {<br/>    padding: 32,<br/>  },<br/>  example: {<br/>    borderColor: '#dddddd',<br/>    borderWidth: 1,<br/>    display: 'inline-flex',<br/>    flex: 0,<br/>    padding: 16,<br/>  },<br/>  exampleTitle: {<br/>    fontFamily: 'sans-serif',<br/>    fontSize: 18,<br/>    fontWeight: 'bold',<br/>    marginBottom: 12,<br/>  },<br/>  exampleWrapper: {<br/>    width: 300,<br/>  },<br/>  title: {<br/>    fontFamily: 'sans-serif',<br/>    fontSize: 24,<br/>    fontWeight: 'bold',<br/>    marginBottom: 24,<br/>  },<br/>});</span></pre><p id="9ef1" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">è®¾ç½®å¥½æ•…äº‹åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥è¿è¡Œstorybookå¹¶æŸ¥çœ‹ç»„ä»¶çš„è¿è¡Œæƒ…å†µã€‚ä»<code class="eh lv lw lx ly b">universal-components</code>ç›®å½•è¿è¡Œ<code class="eh lv lw lx ly b">yarn storybook</code>ã€‚å°±æ˜¯è¿™æ ·ã€‚æ‚¨ç°åœ¨å·²ç»æœ‰äº†ä¸€ä¸ªå¯åŠ¨å¹¶è¿è¡Œçš„å¼€å‘ç¯å¢ƒã€‚ğŸ</p><figure class="kf kg kh ki fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff my"><img src="../Images/91f55c2b0636fd731a94cc0b135e1ca1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VYGMreAx6SRRPI-1fNEqUA.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Universal Components Storybook</figcaption></figure><h1 id="d242" class="ks kt ik bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp dt translated">è®¾ç½®æµ‹è¯•</h1><p id="08a3" class="pw-post-body-paragraph jh ji ik jj b jk lq jm jn jo lr jq jr js ls ju jv jw lt jy jz ka lu kc kd ke hn dt translated">åœ¨Storybookä¸­æ„å»ºç»„ä»¶æ— ç–‘å‡å°‘äº†å‡ºé”™çš„æœºä¼šï¼Œä½†æ˜¯å¦‚æœä½ æƒ³ä»¥ç¼–ç¨‹çš„æ–¹å¼æµ‹è¯•åŠŸèƒ½ï¼Œä½ å°†éœ€è¦è®¾ç½®æµ‹è¯•ã€‚ä¸ºäº†æµ‹è¯•é€šç”¨ç»„ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨Reactç¤¾åŒºä¸­å·²ç»å¹¿æ³›ä½¿ç”¨çš„<a class="ae ih" href="https://facebook.github.io/jest/" rel="noopener ugc nofollow" target="_blank"> Jest </a>å’Œ<a class="ae ih" href="http://airbnb.io/enzyme/" rel="noopener ugc nofollow" target="_blank"> Enzyme </a>ã€‚</p><p id="e58d" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯æ·»åŠ æˆ‘ä»¬çš„æµ‹è¯•ä¾èµ–é¡¹:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="6dea" class="mr kt ik ly b fv ms mt l mu mv">// from universal-components directory</span><span id="6ff3" class="mr kt ik ly b fv mw mt l mu mv">yarn add -D enzyme enzyme-to-json jest</span></pre><p id="0785" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">ç°åœ¨æˆ‘ä»¬æœ‰äº†æµ‹è¯•ä¾èµ–é¡¹ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®ä¸€äº›æµ‹è¯•ã€‚åœ¨<code class="eh lv lw lx ly b">components</code>çš„<code class="eh lv lw lx ly b">button</code>ç›®å½•ä¸­æ·»åŠ ä¸€ä¸ªåä¸º<code class="eh lv lw lx ly b">__tests__</code>çš„æ–°ç›®å½•ï¼Œå¹¶å¸¦æœ‰ä¸€ä¸ª<code class="eh lv lw lx ly b">index.js</code>æ–‡ä»¶ã€‚</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="ad31" class="mr kt ik ly b fv ms mt l mu mv">components/<br/>  button/<br/>  __stories__/<br/>    index.js<br/>  __tests__/<br/>    index.js<br/>  index.js</span></pre><p id="c136" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°<code class="eh lv lw lx ly b">__tests__/index.js</code>:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="fcce" class="mr kt ik ly b fv ms mt l mu mv">import React from 'react';<br/>import { mount } from 'enzyme';<br/>import { mountToJson } from 'enzyme-to-json';</span><span id="e23d" class="mr kt ik ly b fv mw mt l mu mv">import Button from '../';</span><span id="0758" class="mr kt ik ly b fv mw mt l mu mv">describe('&lt;Button /&gt;', () =&gt; {<br/>  it('&lt;Button text="Test" /&gt;', () =&gt; {<br/>    const wrapper = mount(<br/>      &lt;Button text="Test" onPress={() =&gt; {}} /&gt;<br/>    );<br/>    expect(mountToJson(wrapper)).toMatchSnapshot();<br/>  });<br/>  <br/>  it('onPress()', () =&gt; {<br/>    const spy = jest.fn();<br/>    const wrapper = mount(&lt;Button text="Test" onPress={spy} /&gt;);</span><span id="a9e5" class="mr kt ik ly b fv mw mt l mu mv">    wrapper<br/>      .find('TouchableOpacity')<br/>      .first()<br/>      .props()<br/>      .onPress();<br/>    <br/>    expect(spy).toBeCalled();<br/>  });<br/>});</span></pre><p id="bb65" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">ç°åœ¨æˆ‘ä»¬éœ€è¦åœ¨<code class="eh lv lw lx ly b">package.json</code>ä¸­æ·»åŠ ä¸€ä¸ª<code class="eh lv lw lx ly b">script</code>æ¡ç›®ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è½»æ¾åœ°è¿è¡Œæˆ‘ä»¬çš„æµ‹è¯•ã€‚</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="cd9e" class="mr kt ik ly b fv ms mt l mu mv">// in universal-components/package.json</span><span id="508f" class="mr kt ik ly b fv mw mt l mu mv">"scripts": {<br/>  "test": "jest",<br/>  ...<br/>},</span></pre><p id="5f56" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">éšç€ä¸€äº›æµ‹è¯•çš„è¿›è¡Œå’Œæˆ‘ä»¬çš„<code class="eh lv lw lx ly b">package.json</code>çš„æ›´æ–°ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥è¿è¡Œ<code class="eh lv lw lx ly b">yarn test</code>æ¥ç¡®ä¿ä¸€åˆ‡æ­£å¸¸ã€‚</p><figure class="kf kg kh ki fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mz"><img src="../Images/974e26be39127aa6bc12891d7d7edde5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8i8S22m7b7GJEC5L9ecdCQ.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Jest Tests</figcaption></figure><h1 id="e72f" class="ks kt ik bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp dt translated">éƒ¨ç½²</h1><p id="1314" class="pw-post-body-paragraph jh ji ik jj b jk lq jm jn jo lr jq jr js ls ju jv jw lt jy jz ka lu kc kd ke hn dt translated">æœ€åä¸€æ­¥æ˜¯éƒ¨ç½²æ•…äº‹ä¹¦å’Œæˆ‘ä»¬çš„é€šç”¨ç»„ä»¶åº“ã€‚è®©æˆ‘ä»¬ä»æ•…äº‹ä¹¦å¼€å§‹ã€‚</p><p id="0605" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">æˆ‘ä»¬å·²ç»æ·»åŠ äº†ä¸€ä¸ª<code class="eh lv lw lx ly b">script</code>æ¥ä¸ºç”Ÿäº§(<code class="eh lv lw lx ly b">"build": "build-storybook"</code>)æ„å»ºæ•…äº‹ä¹¦ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶éœ€è¦ä¸€ç§æ–¹æ³•æ¥éƒ¨ç½²æˆ‘ä»¬çš„æ•…äº‹ä¹¦ï¼Œä»¥ä¾¿æˆ‘ä»¬çš„é€šç”¨ç»„ä»¶åº“çš„ç”¨æˆ·çŸ¥é“ä»–ä»¬å¯ä»¥ä½¿ç”¨ä»€ä¹ˆã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code class="eh lv lw lx ly b"><a class="ae ih" href="http://surge.sh/" rel="noopener ugc nofollow" target="_blank">surge.sh</a></code>ã€‚</p><p id="29f6" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">é¦–å…ˆæˆ‘ä»¬éœ€è¦æ·»åŠ <code class="eh lv lw lx ly b">surge</code>ä½œä¸ºæ–°çš„<code class="eh lv lw lx ly b">devDependency</code>:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="0cc5" class="mr kt ik ly b fv ms mt l mu mv">// from universal-components directory</span><span id="a7c3" class="mr kt ik ly b fv mw mt l mu mv">yarn add -D surge</span></pre><p id="2bb9" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ª<code class="eh lv lw lx ly b">script</code>:</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="4263" class="mr kt ik ly b fv ms mt l mu mv">"scripts": {<br/>  "deploy": "yarn build &amp;&amp; surge ./storybook-static",<br/>  ...<br/>}</span></pre><blockquote class="kl km kn"><p id="375f" class="jh ji ko jj b jk jl jm jn jo jp jq jr kp jt ju jv kq jx jy jz kr kb kc kd ke hn dt translated">åˆ«å¿˜äº†ç»™ä½ çš„<code class="eh lv lw lx ly b">.gitignore</code>åŠ ä¸Š<code class="eh lv lw lx ly b">packages/universal-components/storybook-static</code>ï¼</p></blockquote><p id="09cd" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬éœ€è¦å‘å¸ƒæˆ‘ä»¬çš„é€šç”¨ç»„ä»¶åŒ…ã€‚ç„¶è€Œï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨æˆ‘ä»¬çš„<code class="eh lv lw lx ly b">universal-components</code>åŒ…ä¸­é…ç½®ä¸€ä¸ª<code class="eh lv lw lx ly b">.npmignore</code>ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ä¼šéƒ¨ç½²ä»»ä½•ä¸å¿…è¦çš„æ–‡ä»¶ã€‚</p><pre class="kf kg kh ki fq mn ly mo mp aw mq dt"><span id="c97b" class="mr kt ik ly b fv ms mt l mu mv">node_modules<br/>.storybook<br/>.babelrc</span></pre><p id="88ef" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">å‰é¢æˆ‘æåˆ°è¿‡ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨Lernaæ¥ç®€åŒ–è½¯ä»¶åŒ…çš„å‘å¸ƒã€‚è¦å‘å¸ƒåŒ…çš„æ–°ç‰ˆæœ¬ï¼Œä»é¡¹ç›®çš„æ ¹ç›®å½•è¿è¡Œ<code class="eh lv lw lx ly b">lerna publish</code>(ä¸æ˜¯<code class="eh lv lw lx ly b">universal-components</code>ç›®å½•)ã€‚</p><p id="b144" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">å°±æ˜¯è¿™æ ·ï¼ç°åœ¨ï¼Œæ‚¨å·²ç»æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„é€šç”¨ç»„ä»¶å·¥ä½œæµï¼Œå¹¶ä¸”æ­£åœ¨è¿è¡Œï¼ç»™è‡ªå·±ä¸€ä¸ªé¼“åŠ±ï¼Œæˆ–è€…ä¸€ä¸ªè™šæ‹Ÿçš„å‡»æŒï¼âœ‹</p><p id="235c" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">å¦‚æœä½ å¯¹è¿™ä¸ªé€šç”¨ç»„ä»¶çš„å®ç°æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨ä¸‹é¢è¯„è®ºæˆ–è€…åœ¨<a class="ae ih" href="https://twitter.com/kurtiskemple" rel="noopener ugc nofollow" target="_blank">æ¨ç‰¹</a>ä¸Šè”ç³»æˆ‘ï¼Œæˆ‘çš„DMsæ°¸è¿œæ˜¯å¼€æ”¾çš„ï¼</p></div></div>    
</body>
</html>