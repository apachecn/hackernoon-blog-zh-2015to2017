# æˆ‘æƒ³åœ¨ Python 4.0 ä¸­çœ‹åˆ°çš„ 4 ä»¶äº‹

> åŸæ–‡ï¼š<https://medium.com/hackernoon/4-things-i-want-to-see-in-python-4-0-85b853e86a88>

CPython 3.6 å‡ºæ¥äº†ï¼Œ3.7 åˆ†æ”¯éƒ½è®¾ç½®å¥½äº†ï¼ŒCPython ç°åœ¨åœ¨ [GitHub](https://github.com/python/cpython) ä¸Šã€‚Python ç¤¾åŒºæ¿€åŠ¨äººå¿ƒçš„æ—¶åˆ»ã€‚

Python 2.7 æ˜¯ 2.x ç³»åˆ—çš„æœ€åä¸€ä¸ªç‰ˆæœ¬ï¼Œæ‰€ä»¥æ ¹æ®è´å¾·ç»´å°”çˆµå£«çš„é€»è¾‘ï¼Œ **Python 4.0 å°†æ˜¯ç»§ 3.7 ä¹‹åçš„ä¸‹ä¸€ä¸ªä¸»è¦ç‰ˆæœ¬ã€‚**

![](img/1d0e2ef9cb88742829f7e62abef5ba2a.png)

> â€œæ‰€æœ‰çš„æœ¨å¤´éƒ½ä¼šç‡ƒçƒ§ï¼Œâ€è´å¾·ç»´å°”çˆµå£«è¯´ã€‚â€œå› æ­¤ï¼Œâ€ä»–æ€»ç»“é“ï¼Œâ€œæ‰€æœ‰ç‡ƒçƒ§çš„éƒ½æ˜¯æœ¨å¤´ã€‚â€

å¥½å§ï¼Œè¿™æ˜¯å®Œå…¨ä¸åˆé€»è¾‘çš„ï¼Œä½†æ˜¯å¦‚æœ 4.0 å¾ˆå¿«å°±è¦å‡ºæ¥äº†ï¼Œä½ å¸Œæœ›çœ‹åˆ°å“ªäº›ç‰¹æ€§ï¼Ÿ

åœ¨æˆ‘ä»¬å¼€å§‹åˆ—è¡¨ä¹‹å‰ï¼Œæé†’æˆ‘ä»¬è‡ªå·± CPython é¡¹ç›®ä¸­æœ‰ä»€ä¹ˆæ˜¯å¾ˆé‡è¦çš„ã€‚Python æ˜¯ 3 æ ·ä¸œè¥¿ï¼Œä¸€ä¸ª**è¯­è¨€**ï¼Œä¸€ä¸ª**æ ‡å‡†** **åº“**å’Œä¸€ä¸ª**æ‰§è¡Œ** **å¼•æ“**ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œ **JavaScript** åªæ˜¯ä¸€ç§è¯­è¨€ã€‚å®ƒæœ‰**æ²¡æœ‰**æ ‡å‡†åº“ï¼ŒGoogle v8 å¼•æ“æ‰§è¡Œ**ã€**ä»¥åŠè®¸å¤šå…¶ä»–é€‰é¡¹ã€‚

è¿™æ˜¯æˆ‘çš„æ¸…å•ï¼Œå®ƒä¸»è¦åŒ…æ‹¬å¯¹ CPython çš„*æ‰§è¡Œå¼•æ“*ç»„ä»¶(åˆåâ€œè¿è¡Œæ—¶â€)çš„æ›´æ”¹ã€‚æˆ‘ç›¸ä¿¡æ ‡å‡†åº“æ˜¯ç‰¹æ€§æ‰“åŒ…çš„ï¼Œä»»ä½•åœ¨æ ‡å‡†åº“ä¸­æ‰¾ä¸åˆ°çš„ä¸œè¥¿éƒ½å¯ä»¥åœ¨ PyPi ä¸Šæ‰¾åˆ°ã€‚è¿™ç§è¯­è¨€ä¸éœ€è¦ä»»ä½•æ–°çš„æ“ä½œç¬¦ï¼Œä¹Ÿä¸éœ€è¦å¦å¤–ä¸€ç§æ ¼å¼åŒ–å­—ç¬¦ä¸²çš„æ–¹å¼ã€‚

# 1.JIT ä½œä¸ºç¬¬ä¸€ç±»ç‰¹æ€§

JIT æˆ–å³æ—¶ç¼–è¯‘æ˜¯ä¸€ç§åœ¨å­—èŠ‚ç å‘ç”Ÿæ—¶ç¼–è¯‘å®ƒä»¬çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡ç¼–è¯‘æ‰€æœ‰çš„å­—èŠ‚ç ã€‚æ ¹æ®å…·ä½“æƒ…å†µï¼Œå®ƒå¯ä»¥å¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚

[PyPy](http://pypy.org/) æ˜¯ Python è‡ªå¸¦ JIT çš„å®ç°ï¼Œ [Pyston](http://pyston.org/) æ˜¯ Python ä½¿ç”¨ [LLVM](http://llvm.org/) ä½œä¸º JIT ç¼–è¯‘å™¨çš„å®ç°ã€‚è¿™äº›éƒ½æ˜¯åœ¨åŠŸèƒ½(æˆ–è¯­è¨€çš„æ­£ç¡®æ€§)å’Œé€Ÿåº¦ä¸Šçš„å¦¥åã€‚

ä¸º CPython æä¾›ä¸€ä¸ªä¸€æµçš„ JIT æ’ä»¶æ¶æ„å°†æŠŠæ€§èƒ½å’Œå…¼å®¹æ€§éœ€æ±‚è”ç³»åœ¨ä¸€èµ·ï¼ŒèŠ±åœ¨ PyPyã€Numba ç­‰ä¸Šçš„ç²¾åŠ›å¯ä»¥æŠ•å…¥åˆ°ä¸»è¦çš„ CPython ç”Ÿæ€ç³»ç»Ÿä¸­ã€‚

å¥½æ¶ˆæ¯æ˜¯ä»€ä¹ˆï¼Ÿå¤šäºäº†æ ¸å¿ƒå¼€å‘è€…å¸ƒé›·ç‰¹Â·åå†œå’Œä»–çš„å¾®è½¯åŒäº‹è¿ªè¯ºÂ·ç»´å…°ï¼Œè¿™å·²ç»è¢«è®¤å¯ä¸º PEP-52 3ã€‚API æ˜¯åœ¨ 3.6 ä¸­æ·»åŠ çš„ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ²¡æœ‰çœ‹åˆ° API çš„å®ç°ã€‚Pyjion é¡¹ç›®ä»ç„¶éœ€è¦æ›´æ–°ã€‚

# 2.ç¨³å®šçš„. 0 ç‰ˆæœ¬

## Python 3 å‘å¸ƒå†å²

python 3.0â€”2008 å¹´ 12 æœˆ 3 æ—¥

*   python 3.1â€”2009 å¹´ 6 æœˆ 27 æ—¥
*   python 3.2â€”2011 å¹´ 2 æœˆ 20 æ—¥
*   python 3.3â€”2012 å¹´ 9 æœˆ 29 æ—¥
*   python 3.4â€”2014 å¹´ 3 æœˆ 16 æ—¥
*   python 3.5â€”2015 å¹´ 9 æœˆ 13 æ—¥
*   python 3.6â€”2016 å¹´ 12 æœˆ 23 æ—¥

Python 3 å·²ç»å‘å¸ƒäº† 9 å¹´ï¼Œä½†æ˜¯å‰ä¸¤ä¸ªç‰ˆæœ¬(3.0ï¼Œ3.1)æœ‰å¾ˆå¤šä¸¥é‡çš„é”™è¯¯å’Œå®‰å…¨é—®é¢˜ã€‚Python 3.3 æ˜¯ 3.x ç³»åˆ—ä¸­ç¬¬ä¸€ä¸ªåŒ…å«å¿«é€Ÿ`decimal`ç±»å‹ã€ä½œä¸ºæ ¸å¿ƒå‡½æ•°çš„ virtualenv å’Œåç§°ç©ºé—´åŒ…æ”¯æŒçš„ç‰ˆæœ¬ã€‚

å¦‚ä»Šï¼ŒPyPi ä¸Šå¤§å¤šæ•°æ”¯æŒâ€œPython 3â€çš„ä¸»æµåŒ…ï¼Œæ¯”å¦‚`requests`éƒ½æ”¯æŒ> 3.3ã€‚åœ¨ 2008 å¹´è‡³ 2012 å¹´é—´å°è¯• Python 3 çš„æ—©æœŸé‡‡ç”¨è€…å¯èƒ½ä¼šè®¤ä¸ºå®ƒè¿˜æ²¡æœ‰å‡†å¤‡å¥½ã€‚ç¬¬ä¸€å°è±¡ä¸å¯èƒ½è®¾å®šä¸¤æ¬¡*ã€‚*

æˆ‘å¯¹ 4 çš„æœ€å¤§è¦æ±‚æ˜¯ï¼Œ4.0 æ˜¯ä¸€ä¸ªä¸»è¦çš„åŠŸèƒ½ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå®éªŒç‰ˆæœ¬ã€‚

# 3.é™æ€ç±»å‹æç¤º

ä»»ä½•å…³æ³¨ Mypy é¡¹ç›®çš„äººéƒ½ä¼šçœ‹åˆ° BDFL çš„å‚ä¸å’Œæ”¯æŒï¼Œä½†æ˜¯ Mypy æ˜¯ Python çš„ä¸€ä¸ªå¯é€‰çš„é™æ€ç±»å‹æç¤ºå™¨ã€‚

Mypy æ—¨åœ¨ç»“åˆåŠ¨æ€(æˆ–â€œduckâ€)ç±»å‹åŒ–å’Œé™æ€ç±»å‹åŒ–çš„ä¼˜ç‚¹ã€‚

```
def fib(n: int) -> Iterator[int]:
    a, b = 0, 1
    while a < n:
        yield a
        a, b = b, a+b
```

æˆ‘å¸Œæœ›åœ¨ Python 4.0 ä¸­çœ‹åˆ°è¿™ä¸€ç‚¹ï¼Œå› ä¸ºéšç€è¶Šæ¥è¶Šå¤šçš„æ•°æ®è¢« JSON ä¸­çš„ REST-ful æœåŠ¡æ¶ˆè´¹ï¼Œåƒ [schema](https://pypi.python.org/pypi/schema) è¿™æ ·çš„åº“åœ¨ç±»å‹æ£€æŸ¥è¾“å…¥ä¸­éå¸¸æœ‰ç”¨ã€‚

# 4.`multiprocessing`çš„ GPU æ•…äº‹

ä½¿ç”¨ 3.6(åŠæ›´ä½ç‰ˆæœ¬)ä¸­çš„ [PyOpenCL](https://mathema.tician.de/software/pyopencl/) å’Œ`multiprocessing`åº“ï¼Œæ‚¨å¯ä»¥åˆ©ç”¨ GPU å¤„ç†èƒ½åŠ›è¿›è¡Œé«˜åº¦å¹¶è¡Œè®¡ç®—ã€‚å¯¹äº Python æ¥è¯´ï¼Œå·©å›ºå…¶ä½œä¸ºæ•°æ®ç§‘å­¦ã€æœºå™¨å­¦ä¹ ä¹‹ç‹çš„åœ°ä½ï¼Œå¯¹ GPU å¹¶è¡Œå¤„ç†çš„åŸç”Ÿæ”¯æŒå°†æ˜¯ä»¤äººæ•¬ç•çš„ã€‚

çœ‹çœ‹ [NumbaPro](https://docs.continuum.io/numbapro/quickstart) ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„ JIT å¼•æ“æ¥ç¼–è¯‘ä¸ºå¹¶è¡ŒåŸç”Ÿçº¿ç¨‹ï¼Œä½†å®ƒæ˜¯ç‰¹å®šäº NumPy çš„ã€‚éšç€ PEP523 (JIT)çš„æ”¯æŒï¼Œæœ¬åœ°ç¼–è¯‘æ¨¡å—å¯ä»¥ä½¿ç”¨ CPython åœ¨ GPU ä¸­å¹¶è¡Œæ‰§è¡Œã€‚

# 5.æ›´å¤šç¤¾åŒºè´¡çŒ®

å¥½å§ï¼Œæˆ‘è¯´çš„æ˜¯ 4ï¼Œä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„åŠŸèƒ½ã€‚åœ¨ 4.x ä¸­ï¼Œæˆ‘å¸Œæœ›çœ‹åˆ°æ¥è‡ªç¤¾åŒºçš„æ›´å¤šæ›´å¹¿æ³›çš„æ”¯æŒå’Œè´¡çŒ®ã€‚éšç€ CPython ç°åœ¨å‡ºç°åœ¨ GitHub ä¸Šï¼Œè¿™å¯èƒ½æ„å‘³ç€ä¸¤ä»¶äº‹æƒ…ä¸­çš„ä¸€ä»¶ï¼Œç¤¾åŒºå¯¹é—®é¢˜è·Ÿè¸ªå™¨çš„åŠŸèƒ½è¿›è¡Œäº†äº‰è®º(å‚è§å…¶ä»–æ ¸å¿ƒè¯­è¨€é¡¹ç›®)ï¼Œæˆ–è€…ï¼Œè¿™æ„å‘³ç€æ›´å¤šçš„äººæå‡ºæ‹‰è¯·æ±‚ï¼Œä¿®å¤ bug å¹¶æ”¹è¿› Python å¹³å°æ”¯æŒã€‚

# å°±è¿™æ ·å—ï¼Ÿ

æˆ‘è§‰å¾—æ¯ä¸ªä¸“ä¸š/è¯­è¨€é¡¹ç›®éƒ½æœ‰ä¸€ä¸ªâ€œ*å˜åŒ–é©¼å³°*â€ï¼Œã€‚å‡€æ˜¯ 1.1 æ¯” 2ã€‚ [PHP æ˜¯ 5 æ¯” 7](https://www.slideshare.net/andreizm/the-good-the-bad-and-the-ugly-what-happened-to-unicode-and-php-6) ï¼Œ [Perl æ˜¯ 5 æ¯” 6](http://www.dagolden.com/index.php/2589/perl-5-and-perl-6-are-mortal-enemies/) ã€‚

AngularJS 2ï¼Ÿ

ä¸€æ—¦ä»–ä»¬å…‹æœäº†è¿™ä¸ªå˜åŒ–çš„éšœç¢ï¼Œç¤¾åŒºå°±å¯ä»¥å®‰å®šä¸‹æ¥ï¼Œä»¥åˆ›æ–°çš„åä¹‰æ¥å—å‘åå…¼å®¹æ€§çš„å¾®å°æŸå¤±ï¼Œå¹¶ä¸ºå˜åŒ–åšè®¡åˆ’ã€‚å¦‚æœç¤¾åŒºå‡ºç°åˆ†æ­§ï¼Œè¿™é€šå¸¸æ„å‘³ç€é¡¹ç›®çš„ç»“æŸï¼Œç›´åˆ°æ›´å¥½çš„ä¸œè¥¿å‡ºç°ã€‚

Python 4 ä¸éœ€è¦åƒ 3 ä¸€æ ·æœ‰å¤§é‡çš„çªç ´æ€§å˜åŒ–ï¼Œä½†æ˜¯è¿™äº›å˜åŒ–æ˜¯ Python æœªæ¥å‘å±•æ‰€éœ€è¦çš„ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥è°ˆè®º 4 ä¸­æœ‰è¶£çš„äº‹æƒ…ï¼Œè€Œä¸æ˜¯ä»ç„¶è®¨è®ºå­—ç¬¦ä¸²ç±»å‹ã€‚

# â€¦â€¦æ€æ ·ï¼Ÿ

ä¸‰å…ƒè¿ç®—ç¬¦ï¼Ÿåƒ C# 6.0 ä¸­çš„`??`ã€‚æ ¹æ® [PEP-308](https://www.python.org/dev/peps/pep-0308/) ï¼ŒPython æœ‰`x if y else z`ï¼Œä¸å¤ªå¯èƒ½æœ‰ç‰¹å®šçš„æ“ä½œç¬¦ã€‚

å–œæ¬¢æˆ‘çš„å¸–å­ï¼Ÿè¯·ç‚¹å‡»ğŸ’šä¸‹é¢ã€‚è¿˜æœ‰ï¼Œå¯ä»¥éšæ„è¯„è®ºè‡ªå·±çš„æƒ³æ³•ã€‚

[![](img/50ef4044ecd4e250b5d50f368b775d38.png)](http://bit.ly/HackernoonFB)[![](img/979d9a46439d5aebbdcdca574e21dc81.png)](https://goo.gl/k7XYbx)[![](img/2930ba6bd2c12218fdbbf7e02c8746ff.png)](https://goo.gl/4ofytp)

> [é»‘å®¢ä¸­åˆ](http://bit.ly/Hackernoon)æ˜¯é»‘å®¢å¦‚ä½•å¼€å§‹ä»–ä»¬çš„ä¸‹åˆã€‚æˆ‘ä»¬æ˜¯é˜¿å¦¹å®¶åº­çš„ä¸€å‘˜ã€‚æˆ‘ä»¬ç°åœ¨[æ¥å—æŠ•ç¨¿](http://bit.ly/hackernoonsubmission)å¹¶ä¹æ„[è®¨è®ºå¹¿å‘Š&èµåŠ©](mailto:partners@amipublications.com)æœºä¼šã€‚
> 
> å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•…äº‹ï¼Œæˆ‘ä»¬æ¨èä½ é˜…è¯»æˆ‘ä»¬çš„[æœ€æ–°ç§‘æŠ€æ•…äº‹](http://bit.ly/hackernoonlatestt)å’Œ[è¶‹åŠ¿ç§‘æŠ€æ•…äº‹](https://hackernoon.com/trending)ã€‚ç›´åˆ°ä¸‹ä¸€æ¬¡ï¼Œä¸è¦æŠŠä¸–ç•Œçš„ç°å®æƒ³å½“ç„¶ï¼

![](img/be0ca55ba73a573dce11effb2ee80d56.png)