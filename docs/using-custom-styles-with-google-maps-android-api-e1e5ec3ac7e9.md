# åœ¨è°·æ­Œåœ°å›¾ Android API ä¸­ä½¿ç”¨è‡ªå®šä¹‰æ ·å¼

> åŸæ–‡ï¼š<https://medium.com/hackernoon/using-custom-styles-with-google-maps-android-api-e1e5ec3ac7e9>

Google Play Services 9.6.0 æ¨å‡ºäº†æœŸå¾…å·²ä¹…çš„åŠŸèƒ½â€”â€”è‡ªå®šä¹‰åœ°å›¾æ ·å¼ï¼

åœ°å›¾æ ·å¼å…è®¸æ‚¨è‡ªå®šä¹‰å‡ ä¹æ‰€æœ‰åœ°å›¾è¦ç´ çš„é¢œè‰²ã€å¯è§æ€§å’Œå¯†åº¦ã€‚

è¿™ä¸ªçœŸçš„å¾ˆå‰å®³ï¼ä½ ä¸ä»…å¯ä»¥æ”¹å˜é£æ ¼ä»¥å®Œå…¨é€‚åº”ä½ çš„å“ç‰Œï¼Œè€Œä¸”ä½ å¯ä»¥**éšè—ç‰¹å®šçš„åœ°å›¾å…ƒç´ **ã€‚

*   æ˜¾ç¤ºé“è·¯æˆ–å…¬å…±äº¤é€šæ˜¯å¦ä¼šå½±å“ä½ çš„å†…å®¹ï¼Ÿéšè—ä½ ä¸éœ€è¦çš„ä¸œè¥¿ã€‚
*   ä¸æƒ³è®©å•†ä¸š POI çš„åœ°å›¾å˜å¾—æ‚ä¹±ã€‚æŠŠå®ƒä»¬ä¹Ÿè—èµ·æ¥ã€‚
*   æƒ³è¦åœ¨åœ°å›¾ä¸Šé«˜äº®æ˜¾ç¤ºå…¬å›­ï¼Ÿç»™å®ƒä»¬ä¸€ä¸ªæ˜äº®çš„é¢œè‰²ï¼Œå…¶ä»–çš„éƒ½æ˜¯ç°è‰²çš„ã€‚

å¦‚æœæ‚¨æƒ³åœ¨ä¸€å¤©ä¸­çš„æŸä¸ªæ—¶é—´æ”¹å˜åœ°å›¾æ ·å¼ï¼Œæˆ–è€…å½“ç”¨æˆ·æ”¾å¤§æ—¶ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ

å®Œå…¨æœ‰å¯èƒ½ã€‚

**åœ°å›¾é£æ ¼å¯ä»¥éšæ—¶æ”¹å˜ã€‚**

æˆ‘å†³å®šçœ‹çœ‹æˆ‘èƒ½åšåˆ°ä»€ä¹ˆç¨‹åº¦ã€‚æˆ‘çš„ç›®æ ‡æ˜¯å®ç°ä¸€ä¸ªå¸¦æœ‰â€œç»†èŠ‚å±‚æ¬¡â€åœ°å›¾çš„ç¤ºä¾‹åº”ç”¨ç¨‹åºã€‚å³ï¼Œéšç€ç”¨æˆ·æ”¾å¤§ï¼Œæ›´å¤šçš„åœ°å›¾ç‰¹å¾å˜å¾—å¯è§ã€‚**æŸ¥çœ‹æ ·æœ¬é¡¹ç›®** [***æ­¤å¤„***](https://github.com/athornz/MapsStyleSample) ï¼Œå¦åˆ™ç»§ç»­é˜…è¯»ï¼

![](img/0ccb0eb0b63d0960ffc5a6fe984afd3b.png)

# è®©æˆ‘ä»¬å¼€å§‹å§ï¼

JSON ä¸­å®šä¹‰äº†åœ°å›¾æ ·å¼[ã€‚ä»¥ä¸‹æ˜¯éšè— POIã€é“è·¯å’Œäº¤é€šè¦ç´ çš„ç¤ºä¾‹æ ·å¼:](https://developers.google.com/maps/documentation/android-api/style-reference)

```
[
  {
    "featureType": "poi",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "transit",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  }
]
```

ä½ å¯ä»¥è‡ªå·±ç¼–è¾‘ JSONï¼Œæˆ–è€…ä½¿ç”¨è°·æ­Œä¾¿åˆ©çš„[æ ·å¼å‘å¯¼](https://mapstyle.withgoogle.com)ã€‚

![](img/055bec5a7b741e160b6b366ba66c52ac.png)

Styling wizard â€” yes please!

æ ·å¼å‘å¯¼é™„å¸¦äº†ä¸€äº›é¢„æ„å»ºçš„æ ·å¼ï¼ŒåŒ…æ‹¬å¤œé—´æ¨¡å¼æ ·å¼â€”â€”è¯·æŸ¥çœ‹ã€‚

æˆ–è€…ä½ å¯ä»¥åˆ‡æ¢é«˜çº§æ¨¡å¼æ¥è°ƒæ•´ä½ çš„å¿ƒçš„åœ°å›¾é£æ ¼ã€‚æœ‰å¤§é‡çš„é€‰æ‹©ã€‚å¿«ä¹é€ å‹ï¼

å®Œæˆåï¼Œæ‚¨å¯ä»¥å¯¼å‡º JSON ä»¥åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚

![](img/cf13ba0d880eeeab7b9b254b08af0d4d.png)

Styling wizard options â€” and lots of them!

# åº”ç”¨æ ·å¼

å°†æ ·å¼åº”ç”¨åˆ°åœ°å›¾ä¸Šéå¸¸ç®€å•ã€‚

å­˜å‚¨æ ·å¼çš„æ¨èæ–¹å¼æ˜¯é€šè¿‡ Android é¡¹ç›®ä¸­çš„åŸå§‹èµ„æºæ–‡ä»¶ã€‚

æ–°çš„ *MapStyleOptions* ç±»æä¾›äº†ä¸€ä¸ªæ–¹ä¾¿çš„æ–¹æ³•æ¥åŠ è½½å®ƒï¼Œå¹¶ä¸”åœ¨ GoogleMap ç±»ä¸Šæœ‰ä¸€ä¸ªæ–°çš„æ–¹æ³•æ¥è®¾ç½®æ ·å¼ã€‚

```
MapStyleOptions style = MapStyleOptions.*loadRawResourceStyle*(this.context, R.raw.my_map_style);
map.setMapStyle(style);
```

æˆ–è€…å¦‚æœä½ çš„åœ°å›¾æ ·å¼ä»¥å…¶ä»–æ–¹å¼å­˜å‚¨(ä¹Ÿè®¸ä½œä¸ºä¸€ä¸ª Firebase è¿œç¨‹é…ç½®)ï¼Œä½ å¯ä»¥ç›´æ¥åˆ›å»º*åœ°å›¾é€‰é¡¹æ ·å¼*:

```
String myMapStyle = "[map style here]";
MapStyleOptions style = new MapStyleOptions(myMapStyle);
map.setMapStyle(style);
```

å°±æ˜¯è¿™æ ·ï¼æ‚¨çš„åœ°å›¾ç°åœ¨æœ‰äº†è‡ªå®šä¹‰æ ·å¼ã€‚å‘è´§å§ï¼ğŸ›³

# MapStyleManager

ä¸ºäº†å®ç°ç»†èŠ‚å±‚æ¬¡çš„åœ°å›¾æ ·å¼ï¼Œæˆ‘åˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰ç±»â€”***MapStyleManager***ã€‚

è¿™ä¸ªç±»æœ¬è´¨ä¸Šè®¾ç½®äº†ä¸€ä¸ª *OnCameraMoveListenerï¼Œ*å¹¶åœ¨ç›¸æœºç§»åŠ¨æ—¶ä¸ºå½“å‰ç¼©æ”¾çº§åˆ«è®¾ç½®åˆé€‚çš„åœ°å›¾æ ·å¼ã€‚

ä½ å¯ä»¥åœ¨è¿™é‡Œå¾—åˆ°å®ƒçš„è¦ç‚¹[ã€‚](https://goo.gl/UdMJ8u)

ä½¿ç”¨*åœ°å›¾æ ·å¼ç®¡ç†å™¨*å°±åƒæ·»åŠ åœ°å›¾æ ·å¼å’ŒæŒ‡å®šæœ€å°ç¼©æ”¾çº§åˆ«ä¸€æ ·ç®€å•ã€‚

å½“ç›¸æœºç¼©æ”¾çº§åˆ«è¾¾åˆ°è¯¥æ ·å¼çš„æœ€ä½çº§åˆ«æ—¶ï¼Œå°†åº”ç”¨è¯¥æ ·å¼ã€‚ç®€å•ï¼

```
MapStyleManager styleManager = MapStyleManager.*attachToMap*(this, map);
styleManager.addStyle(0, R.raw.*map_style_1*);
styleManager.addStyle(10, R.raw.*map_style_2*);
styleManager.addStyle(12, R.raw.*map_style_3*);
```

ç»“æœå¦‚ä¸‹:

![](img/2ff8778308de1489a4291e0934dd1c7b.png)

ä¸é”™å§ï¼Ÿ

å®ƒä¸åƒæˆ‘å¸Œæœ›çš„é‚£æ ·é¡ºåˆ©ã€‚è°·æ­Œåœ°å›¾ç¬¬ä¸€æ¬¡åŠ è½½æ ·å¼æ—¶ï¼Œæ ·å¼ä¹‹é—´çš„è½¬æ¢å¯èƒ½ä¼šæœ‰ç‚¹ä¸åè°ƒã€‚å¦‚æœæœ‰ä¸€ä¸ªé¢„åŠ è½½æ ·å¼çš„é€‰é¡¹å°±å¥½äº†ã€‚

# è¿™æ˜¯ä¸€ä¸ªæ€»ç»“ï¼

è¿™æ˜¯å¯¹è°·æ­Œåœ°å›¾ Android API è‡ªå®šä¹‰æ ·å¼çš„ç®€è¦æ¦‚è¿°ã€‚

æˆ‘è¿«ä¸åŠå¾…åœ°æƒ³çœ‹åˆ°æ¼‚äº®çš„è°·æ­Œåœ°å›¾é£æ ¼æ— å¤„ä¸åœ¨ï¼

å¾ˆé«˜å…´çœ‹åˆ°åœ°å›¾å›¢é˜Ÿè§£å†³äº†ä¸€äº›é•¿æœŸå­˜åœ¨çš„åŠŸèƒ½éœ€æ±‚ã€‚ç»§ç»­åŠªåŠ›è°·æ­Œï¼

å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œä¸€å®šè¦ç»™å®ƒä¸€äº›ğŸ‘åœ¨æ¨ç‰¹ä¸Šå…³æ³¨æˆ‘ã€‚

[![](img/50ef4044ecd4e250b5d50f368b775d38.png)](http://bit.ly/HackernoonFB)[![](img/979d9a46439d5aebbdcdca574e21dc81.png)](https://goo.gl/k7XYbx)[![](img/2930ba6bd2c12218fdbbf7e02c8746ff.png)](https://goo.gl/4ofytp)

> [é»‘å®¢ä¸­åˆ](http://bit.ly/Hackernoon)æ˜¯é»‘å®¢å¦‚ä½•å¼€å§‹ä»–ä»¬çš„ä¸‹åˆã€‚æˆ‘ä»¬æ˜¯ [@AMI](http://bit.ly/atAMIatAMI) å®¶åº­çš„ä¸€å‘˜ã€‚æˆ‘ä»¬ç°åœ¨[æ¥å—æŠ•ç¨¿](http://bit.ly/hackernoonsubmission)å¹¶ä¹æ„[è®¨è®ºå¹¿å‘Š&èµåŠ©](mailto:partners@amipublications.com)æœºä¼šã€‚
> 
> å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•…äº‹ï¼Œæˆ‘ä»¬æ¨èä½ é˜…è¯»æˆ‘ä»¬çš„[æœ€æ–°ç§‘æŠ€æ•…äº‹](http://bit.ly/hackernoonlatestt)å’Œ[è¶‹åŠ¿ç§‘æŠ€æ•…äº‹](https://hackernoon.com/trending)ã€‚ç›´åˆ°ä¸‹ä¸€æ¬¡ï¼Œä¸è¦æŠŠä¸–ç•Œçš„ç°å®æƒ³å½“ç„¶ï¼

[![](img/be0ca55ba73a573dce11effb2ee80d56.png)](https://goo.gl/Ahtev1)