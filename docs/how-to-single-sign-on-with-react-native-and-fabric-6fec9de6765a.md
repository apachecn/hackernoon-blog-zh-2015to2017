# å¦‚ä½•ä½¿ç”¨ React Native å’Œ Fabric è¿›è¡Œå•ç‚¹ç™»å½•

> åŸæ–‡ï¼š<https://medium.com/hackernoon/how-to-single-sign-on-with-react-native-and-fabric-6fec9de6765a>

![](img/48f204398c3f3f64ee74cf277ef207e5.png)

æœ€è¿‘æˆ‘å¼€å§‹ä¸º iOS å¼€å‘ä¸€ä¸ªç§»åŠ¨åº”ç”¨ï¼Œè¿™è¦æ„Ÿè°¢ [React Native](https://hackernoon.com/tagged/react-native) ğŸ‘»ã€‚ç”±äºå¤§éƒ¨åˆ†äº‹æƒ…éƒ½æ˜¯æ–°çš„ï¼Œæˆ‘æƒ³æˆ‘ä¼šåœ¨å¼„æ¸…æ¥šæ¯ä¸€ä»¶äº‹æƒ…çš„åŒæ—¶å†™ä¸‹æˆ‘çš„å¿ƒå¾—ã€‚

è¿™æ˜¯è¿™ä¸ªç³»åˆ—çš„ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œå¸Œæœ›æˆ‘èƒ½åœ¨ä¸‹é¢å†™æ›´å¤šã€‚

# ä»€ä¹ˆ

åœ¨è¿™é‡Œï¼Œæˆ‘å°†è°ˆè°ˆæˆ‘æ˜¯å¦‚ä½•ç”¨ React Native å®ç°å•ç‚¹ç™»å½•çš„ã€‚

# ä¸ºä»€ä¹ˆ

ä¸ªæ€§åŒ–æœåŠ¡æ˜¯ä»»ä½•[åº”ç”¨](https://hackernoon.com/tagged/application)çš„ä¸€ä¸ªé‡è¦æ–¹é¢ã€‚è¿™å¯ä»¥é€šè¿‡è¦æ±‚ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯æ¥å®ç°ã€‚æœ‰å‡ ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹:

## 1.Web è§†å›¾

Web view æ˜¯ä¸€ç§åœ¨åº”ç”¨ç¨‹åºä¸­æ‰“å¼€æµè§ˆå™¨å¹¶è¦æ±‚ç”¨æˆ·æä¾›å‡­æ®ä»¥è¿›è¡Œèº«ä»½éªŒè¯çš„æ–¹å¼ï¼Œç„¶ååœ¨å®Œæˆåå°†ç”¨æˆ·é‡å®šå‘å›åº”ç”¨ç¨‹åºã€‚

è¿™ä¸ªæ–¹æ³•å¯¹æˆ‘æ¥è¯´å®ç°èµ·æ¥å¾ˆå¿«ï¼Œæˆ‘éµå¾ªäº†å®˜æ–¹æ–‡æ¡£[ä¸­çš„æŒ‡å—ã€‚](https://facebook.github.io/react-native/docs/webview.html)

## 2.å•ç‚¹ç™»å½•(SSO)

SSO æ˜¯å…è®¸ç”¨æˆ·ä½¿ç”¨ä¸€ç»„ç™»å½•å‡­è¯(ä¾‹å¦‚ï¼Œåç§°å’Œå¯†ç )æ¥è®¿é—®å¤šä¸ªåº”ç”¨çš„æœåŠ¡ã€‚è¯¥æœåŠ¡é’ˆå¯¹ç”¨æˆ·æœ‰æƒè®¿é—®çš„æ‰€æœ‰åº”ç”¨ç¨‹åºå¯¹æœ€ç»ˆç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¹¶åœ¨ç”¨æˆ·åœ¨åŒä¸€ä¼šè¯æœŸé—´åˆ‡æ¢åº”ç”¨ç¨‹åºæ—¶æ¶ˆé™¤è¿›ä¸€æ­¥çš„æç¤ºã€‚æ¬²äº†è§£æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥ç‚¹å‡»[è¿™é‡Œ](http://searchsecurity.techtarget.com/definition/single-sign-on)

# æ€ä¹ˆ

åƒæ¯ä¸ªäººä¸€æ ·ï¼Œé¦–å…ˆæˆ‘å¼€å§‹å¯»æ‰¾å…³äºå¦‚ä½•åšçš„æŒ‡å—ï¼Œæˆ‘ç¡®å®æ‰¾åˆ°äº†ä¸€äº›ï¼Œæœ‰äº›å¯¹äº xcode æ¥è¯´å¤ªå…·ä½“äº†ï¼Œæœ‰äº›éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ã€‚ä½†æœ€åæˆ‘è¿˜æ˜¯ç®—å‡ºäº†ï¼Œè¿™é‡Œæˆ‘å°†è§£é‡Šæˆ‘æ˜¯å¦‚ä½•å®ç°å®ƒçš„ã€‚

## 1.åˆ›å»º React åº”ç”¨

å½“æ‚¨è¿è¡Œ`react-native run-ios`æ—¶ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä¸‹é¢çš„å±å¹•

![](img/f36a83fbdb0aeff3f90209819f10a479.png)

## 2.å°† Fabric å®‰è£…åˆ°åº”ç”¨ä¸­

å¦‚æœæ‚¨è¿˜ä¸æ˜¯ä¼šå‘˜ï¼Œè¯·å‰å¾€[https://get.fabric.io/](https://get.fabric.io/)æ³¨å†Œå¹¶ä¸‹è½½ SDKã€‚

ç™»å½• SDK åï¼Œé€‰æ‹©æ‚¨çš„ xcode é¡¹ç›®ï¼Œç„¶åé€‰æ‹© Twitter å·¥å…·åŒ…è¿›è¡Œå®‰è£…ï¼Œå¹¶æŒ‰ç…§åº”ç”¨ç¨‹åºä¸­ç»™å‡ºçš„è¯´æ˜è¿›è¡Œæ“ä½œ

![](img/46ebdc2718ae14bd1e59e4d05f91ab22.png)

è½¬åˆ° [Twitter Apps](https://apps.twitter.com/) åˆ›å»ºæ‚¨çš„åº”ç”¨ç¨‹åºï¼Œä»¥ä¾¿æ‚¨å¯ä»¥è·å– API å¯†é’¥å’Œå¯†ç ã€‚

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ›´æ–° Fabric ä¸‹ xcode é¡¹ç›®ä¸­çš„é”®ã€‚

![](img/4341eff4b640c1a62efc989ba89ea3d4.png)

æˆ–è€…ä½ å¯ä»¥ç›´æ¥ä»`info.plist`æ›´æ–°ã€‚

## 3.ä½¿ç”¨ Twitter æŒ‰é’®æ·»åŠ ç™»å½•

æˆ‘æ·»åŠ äº†ä»¥ä¸‹ä»£ç æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„æŒ‰é’®ï¼Œå•å‡»è¯¥æŒ‰é’®å°†è§¦å‘ç™»å½•

![](img/848af90c081e946273f995b7436733ee.png)

## 4.å…¬å¼€ SSO æ¨¡å—

å› ä¸º React Native è¿˜æ²¡æœ‰ SSO æ¨¡å—ï¼Œæ‰€ä»¥æˆ‘éœ€è¦åœ¨ Native ä¸­å®ç°å®ƒï¼Œå¹¶ä» JavaScript è®¿é—®å®ƒã€‚

æ‰“å¼€`SSOExample.xcodeproj`ï¼Œåœ¨`Libraries`ä¸‹æ·»åŠ  2 ä¸ªæ–°æ–‡ä»¶ã€‚

`***TwitterSignin.h***`T15 è¿™æ˜¯ä¸€ä¸ªå®ç°`RCTBridgeModule`åè®®çš„å¤´æ–‡ä»¶ã€‚å¦‚æœä½ æƒ³çŸ¥é“ï¼ŒRCT æ˜¯ ReaCT çš„ç¼©å†™ã€‚

`*TwitterSignin.h*`

`***TwitterSignin.m***`T16 è¿™æ˜¯ä¸€ä¸ª Objective-C æ–‡ä»¶ã€‚é™¤äº†å®ç°`RCTBridgeModule`åè®®ï¼Œè¯¥ç±»è¿˜å¿…é¡»åŒ…å«`RCT_EXPORT_MODULE()`å®ã€‚è¿™éœ€è¦ä¸€ä¸ªå¯é€‰çš„å‚æ•°ï¼Œè¯¥å‚æ•°æŒ‡å®šäº† JavaScript ä»£ç ä¸­å¯ä»¥è®¿é—®çš„æ¨¡å—çš„åç§°ã€‚å¦‚æœä¸æŒ‡å®šåç§°ï¼ŒJavaScript æ¨¡å—åç§°å°†ä¸ Objective-C ç±»ååŒ¹é…ã€‚

å› ä¸º React Native åœ¨ä¸€ä¸ªå•ç‹¬çš„ä¸²è¡Œ GCD é˜Ÿåˆ—ä¸Šè°ƒç”¨æœ¬æœºæ¨¡å—æ–¹æ³•ï¼Œè¿™å¯èƒ½ä¼šæ”¹å˜ï¼Œæ‰€ä»¥æˆ‘æƒ³æŒ‡å®šåªä½¿ç”¨ä¸»çº¿ç¨‹ã€‚è¿™æ˜¯ä½¿ç”¨`- (dispatch_queue_t)methodQueue`å®Œæˆçš„ã€‚

TwitterSignin.m

React Native ä¸ä¼šå°†`TwitterSignin`çš„ä»»ä½•æ–¹æ³•æš´éœ²ç»™ JavaScriptï¼Œé™¤éè¢«æ˜ç¡®å‘ŠçŸ¥è¿™æ ·åšã€‚è¿™æ˜¯ä½¿ç”¨`RCT_EXPORT_METHOD()`å®å®Œæˆçš„:

`TwitterSignin.m`

è¿™é‡Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ–¹æ³•`logIn`ï¼Œå®ƒå°†å›è°ƒä½œä¸ºå‚æ•°ï¼Œå½“ç™»å½•å®Œæˆæ—¶ï¼Œæ— è®ºæˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œå›è°ƒéƒ½ä¼šè¢«è§¦å‘ã€‚

è¦äº†è§£æ›´å¤šä¿¡æ¯ï¼Œæ‚¨å¯ä»¥è®¿é—®å®˜æ–¹æŒ‡å—[è¿™é‡Œ](https://facebook.github.io/react-native/docs/native-modules-ios.html)ã€‚

## 5.ä» JavaScript è§¦å‘

ç°åœ¨ï¼Œå½“ç‚¹å‡»ç™»å½•æŒ‰é’®æ—¶ï¼Œæˆ‘è§¦å‘äº†ä¸Šé¢åˆ›å»ºçš„`logIn`æ–¹æ³•ã€‚

ä½¿ç”¨`react-native`ä¸­çš„`NativeModules`è®¿é—®`LogIn`æ–¹æ³•ã€‚

![](img/31b4e98fe000c71a9119d92fb46367f6.png)

æ„Ÿè°¢æ‚¨çš„é˜…è¯»ï¼Œå¦‚æœæ‚¨å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç‚¹å‡»â€œæ¨èâ€æˆ–åœ¨ä¸‹é¢å†™ä¸€ä¸ªå›å¤ã€‚ä½ å¯ä»¥åœ¨æ¨ç‰¹ä¸Šè”ç³»æˆ‘ [@narendra_shetty](https://twitter.com/narendra_shetty) ã€‚

æˆ‘å†™çš„å…¶ä»–æ–‡ç« :

[](https://hackernoon.com/how-i-built-a-super-fast-uber-clone-for-mobile-web-863680d2100f) [## æˆ‘å¦‚ä½•ä¸ºç§»åŠ¨ç½‘ç»œå»ºç«‹ä¸€ä¸ªè¶…å¿«çš„ä¼˜æ­¥å…‹éš†

### è¿™ç¯‡æ–‡ç« æ˜¯å…³äºæˆ‘å¯¹æ€§èƒ½æŠ€æœ¯çš„å­¦ä¹ ï¼Œè¿™äº›æŠ€æœ¯ç”¨äºä½¿ä¼˜æ­¥ç§»åŠ¨ç½‘ç»œå°½å¯èƒ½å¿«åœ°ååº”ã€‚

hackernoon.com](https://hackernoon.com/how-i-built-a-super-fast-uber-clone-for-mobile-web-863680d2100f)  [## æˆ‘æ˜¯å¦‚ä½•å­¦ä¹ å†—ä½™æ¦‚å¿µçš„

### æ‰€ä»¥åœ¨è¿‡å»çš„å‡ ä¸ªæœˆé‡Œï¼ŒJavascript ç¤¾åŒºä¸­æœ‰å¾ˆå¤šå…³äº React å’Œ Redux çš„äº‰è®ºã€‚æ¯ä¸ªäººéƒ½â€¦

ä¼—åŒ…å·¥ç¨‹](https://crowdfire.engineering/redux-explained-in-4-simple-steps-12266c39b72f)  [## æˆ‘ä»¬å¦‚ä½•ä¸º Chrome æ„å»ºæœ€å¿«çš„æ‰©å±•

### æˆ‘ä»¬ä¸€ç›´æƒ³æ‰¾åˆ°ä¸€ç§æ–¹æ³•ï¼Œéšæ—¶éšåœ°åˆ†äº«ä»»ä½•ä¸œè¥¿ã€‚æˆ‘ä»¬çš„æƒ³æ³•æ˜¯è®©ä¸€äº›ä¸œè¥¿â€¦

ä¼—åŒ…å·¥ç¨‹](https://crowdfire.engineering/how-we-built-the-fastest-extension-for-chrome-65d695972dee) [![](img/50ef4044ecd4e250b5d50f368b775d38.png)](http://bit.ly/HackernoonFB)[![](img/979d9a46439d5aebbdcdca574e21dc81.png)](https://goo.gl/k7XYbx)[![](img/2930ba6bd2c12218fdbbf7e02c8746ff.png)](https://goo.gl/4ofytp)

> [é»‘å®¢ä¸­åˆ](http://bit.ly/Hackernoon)æ˜¯é»‘å®¢å¦‚ä½•å¼€å§‹ä»–ä»¬çš„ä¸‹åˆã€‚æˆ‘ä»¬æ˜¯ [@AMI](http://bit.ly/atAMIatAMI) å®¶åº­çš„ä¸€å‘˜ã€‚æˆ‘ä»¬ç°åœ¨[æ¥å—æŠ•ç¨¿](http://bit.ly/hackernoonsubmission)ï¼Œå¹¶ä¹æ„[è®¨è®ºå¹¿å‘Š&èµåŠ©](mailto:partners@amipublications.com)æœºä¼šã€‚
> 
> å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•…äº‹ï¼Œæˆ‘ä»¬æ¨èä½ é˜…è¯»æˆ‘ä»¬çš„[æœ€æ–°ç§‘æŠ€æ•…äº‹](http://bit.ly/hackernoonlatestt)å’Œ[è¶‹åŠ¿ç§‘æŠ€æ•…äº‹](https://hackernoon.com/trending)ã€‚ç›´åˆ°ä¸‹ä¸€æ¬¡ï¼Œä¸è¦æŠŠä¸–ç•Œçš„ç°å®æƒ³å½“ç„¶ï¼

![](img/be0ca55ba73a573dce11effb2ee80d56.png)