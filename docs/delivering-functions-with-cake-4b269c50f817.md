# âš¡Delivering åŠŸèƒ½ä¸è›‹ç³•ğŸ°

> åŸæ–‡ï¼š<https://medium.com/hackernoon/delivering-functions-with-cake-4b269c50f817>

## C#ä¸­çš„ Azure å‡½æ•°è‡ªå®šä¹‰éƒ¨ç½²è„šæœ¬

Azure Functions ä½¿ç”¨ä¸ Azure App Services ç›¸åŒçš„â€œå¼•æ“â€è¿›è¡Œéƒ¨ç½²ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ ä» GitHub Kudu è¿æ¥è¿ç»­éƒ¨ç½²æ—¶ï¼Œå®ƒä¼šä¸ºä½ å¤„ç†ä¸€åˆ‡ï¼Œå¹¶ä¸”å®ƒä¼šæ­£å¸¸å·¥ä½œâ€”â€”ä½ å°†æäº¤ä½ çš„ä»£ç ï¼Œå¹¶ä¸”åœ¨ä½ çš„ä»£ç ä¸Šçº¿åä¸ä¹…ã€‚

![](img/2ba25d1f6e8989be5f4626b8fc0cedc3.png)![](img/178f26dfa0d7ce2a9492eb430c4ef743.png)

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å¸¦æ‚¨äº†è§£å½“éƒ¨ç½²æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¦†ç›–é»˜è®¤éƒ¨ç½²æµç¨‹çš„è¿‡ç¨‹ã€‚

æˆ‘å°†ä½¿ç”¨ C#ä½œä¸ºéƒ¨ç½²çš„ä¾‹å­ï¼Œä½†åŸºæœ¬ä¸Šå¤©ç©ºæ˜¯è¿™é‡Œçš„é™åˆ¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ F#ä¸ FAKEï¼ŒJavaScript ä¸ Nodeï¼ŒPowerShell æˆ–ä½œä¸ºé»˜è®¤çš„æ™®é€šæ—§æ‰¹å¤„ç†è„šæœ¬-åŸºæœ¬ä¸Šä»»ä½•ä½ å–œæ¬¢çš„å·¥å…·ã€‚

ä½ ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆåšï¼ŸåŸºæœ¬ä¸Šï¼Œå®ƒæ”¯æŒæ›´é«˜çº§çš„éƒ¨ç½²åœºæ™¯ï¼Œå¦‚è‡ªå®šä¹‰è·¯å¾„ã€ç§æœ‰ NuGet feedsï¼Œè€Œæ— éœ€å°†æ•æ„Ÿä¿¡æ¯æäº¤ç»™å­˜å‚¨åº“ï¼Œä»…ä¸¾å‡ ä¾‹ã€‚

## æ ‡å‡†éƒ¨ç½²

æ‰€ä»¥è®©æˆ‘ä»¬å…ˆçœ‹çœ‹ Azure Functions çš„æ ‡å‡† Kudu æ‰¹å¤„ç†éƒ¨ç½²è„šæœ¬æ˜¯ä»€ä¹ˆæ ·å­çš„(ä¸è¦æ‹…å¿ƒï¼Œä¼šæœ‰ä¸€ä¸ªæ‘˜è¦ï¼Œæ‰€ä»¥ä½ å¯ä»¥è·³è¿‡å®ƒğŸ˜)

å¦‚æœå»æ‰é”™è¯¯å¤„ç†ã€å·¥å…·å¼•å¯¼å’Œå˜é‡çš„åˆå§‹è®¾ç½®ï¼Œé‡è¦çš„ä¸€è¡Œå°±æ˜¯è¿™ä¸€è¡Œ

```
"%KUDU_SYNC_CMD%" -v 50 -f "%DEPLOYMENT_SOURCE%" -t "%DEPLOYMENT_TARGET%" -n "%NEXT_MANIFEST_PATH%" -p "%PREVIOUS_MANIFEST_PATH%" -i ".git;.hg;.deployment;deploy.cmd"
```

å› æ­¤ï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯å°†å­˜å‚¨åº“ä¸­çš„æ–‡ä»¶ä¸åŠŸèƒ½åº”ç”¨ç¨‹åºä¸Šè¿è¡Œçš„æ–‡ä»¶åŒæ­¥ï¼Œä¸åŒ…æ‹¬å­˜å‚¨åº“ç³»ç»Ÿæ–‡ä»¶å’Œéƒ¨ç½²è„šæœ¬ï¼Œåˆ é™¤ä»»ä½•ä¸å†å­˜åœ¨çš„æ–‡ä»¶ï¼Œæ·»åŠ ä»»ä½•æ–°æ–‡ä»¶å¹¶è¦†ç›–ä»»ä½•æ›´æ”¹æ–‡ä»¶ã€‚

## è¦†ç›–é»˜è®¤è„šæœ¬

è¦†ç›–é»˜è®¤è¡Œä¸ºå®é™…ä¸Šéå¸¸ç®€å•ï¼Œåœ¨å­˜å‚¨åº“çš„æ ¹ä¸­æ·»åŠ ä¸€ä¸ª`.deployment`æ–‡ä»¶ï¼Œ`.deployment`æ–‡ä»¶å¯ä»¥æ§åˆ¶éƒ¨ç½²çš„è®¸å¤šæ–¹é¢ï¼Œæ— éœ€å®šåˆ¶è„šæœ¬ï¼Œå³è¦†ç›–éƒ¨ç½²æº(å³ GIT å­˜å‚¨åº“)ä¸­çš„ Azure å‡½æ•°è„šæœ¬æ ¹ï¼Œä½†æˆ‘ä»¬æ„Ÿå…´è¶£çš„è®¾ç½®æ˜¯`command`è®¾ç½®ï¼Œå®ƒå…è®¸æˆ‘ä»¬è®¾ç½®åœ¨éƒ¨ç½²æ—¶åº”è¯¥æ‰§è¡Œå“ªä¸ªå‘½ä»¤ã€‚

ä¸ï¼Œæ¯æ¬¡ç”±æäº¤æˆ–åˆå§‹éƒ¨ç½²è§¦å‘éƒ¨ç½²æ—¶ï¼Œå®ƒéƒ½ä¼šå¯»æ‰¾ä¸€ä¸ªåä¸º`deploy.cmd`çš„æ–‡ä»¶å¹¶æ‰§è¡Œå®ƒã€‚

## è‡ªåŠ©è›‹ç³•

å› æ­¤ï¼Œè›‹ç³•åœ¨ Azure åº”ç”¨æœåŠ¡ä¸Šé»˜è®¤ä¸å¯ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç¡®ä¿å®ƒåœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ C#éƒ¨ç½²ä¹‹å‰å°±ä½ï¼Œæˆ‘ä»¬åœ¨æˆ‘ä»¬çš„å®šåˆ¶`deploy.cmd`ä¸­è¿™æ ·åš

è¿™å°†åˆ›å»ºä¸€ä¸ª`Tool`ç›®å½•ï¼Œä» NuGet è·å–å¹¶å®‰è£… Cake è„šæœ¬è¿è¡Œç¨‹åºï¼Œç„¶åæ‰§è¡Œ`deploy.cake`ï¼Œè¿™æ˜¯æˆ‘ä»¬çš„ C#éƒ¨ç½²è„šæœ¬ã€‚

## ä½¿ç”¨è›‹ç³•è¿›è¡Œéƒ¨ç½²

å› æ­¤ï¼ŒCake ä¸­çš„æ ‡å‡†æ‰¹é‡éƒ¨ç½²è„šæœ¬å¯èƒ½å¦‚ä¸‹æ‰€ç¤º

`#tool`æŒ‡ä»¤ä» NuGet è·å– KuduSync(è€Œé»˜è®¤ä» NPM è·å–)

`#addin`æŒ‡ä»¤è·å–`Cake.Kudu`æ’ä»¶ï¼Œè¿™æ˜¯æˆ‘å†™çš„ä¸€ä¸ªè›‹ç³•æ’ä»¶ï¼Œå®ƒä» C#ä¸­æŠ½è±¡äº† Kudu ç¯å¢ƒä¸­çš„ä¸€äº›ä¸œè¥¿ï¼Œå¯ä»¥é€šè¿‡ç±»å‹åŒ–çš„å¯¹è±¡ã€å±æ€§å’Œæ–¹æ³•è½»æ¾è®¿é—®ï¼Œå³ KuduSync å®ç”¨ç¨‹åºã€‚

![](img/f53d15904e07cb29c0b7afaa2c875c91.png)

ç„¶åæˆ‘ä»¬å¯ä»¥åªå†™`Kudu.Sync("./src");`,å®ƒä¼šåšä¸æ‰¹å¤„ç†è„šæœ¬ç›¸åŒçš„äº‹æƒ…ï¼Œä½†æ˜¯ä½œä¸ºå¯¹æœªæ¥çš„å‡†å¤‡(å› ä¸ºè¿™æ˜¯æ­£ç¡®çš„åšæ³•ğŸ˜‰)æˆ‘åˆ©ç”¨è›‹ç³•ä»»åŠ¡è¿è¡Œå™¨ã€‚

å°½ç®¡æ²¡æœ‰é‚£ä¹ˆå¤šä»£ç â€”â€”ä¸æ‰¹å¤„ç†è„šæœ¬ç›¸æ¯”ï¼Œæˆ‘ä¸º C#å¼€å‘äººå‘˜åˆ†é…äº†æ›´å¤šå¯è¯»å’Œç†Ÿæ‚‰çš„ä»£ç ã€‚

æ›´å¥½çš„æ—¥å¿—è¾“å‡ºåªæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¥–åŠ±ã€‚

## ç»“è®º

è¿™ç¯‡æ–‡ç« ä¸­çš„è›‹ç³•è„šæœ¬æ˜¯ä¸€ä¸ªéå¸¸åŸºç¡€å’Œå¹¼ç¨šçš„è„šæœ¬ï¼Œå½“ä½ æ„è¯†åˆ°ä½ å¾—åˆ°äº† C#çš„å…¨éƒ¨èƒ½åŠ›ã€‚NET æ¡†æ¶å’Œæ•°ä»¥ç™¾è®¡çš„è›‹ç³•æ’ä»¶æœ‰åŠ©äºå®ƒçš„çœŸæ­£å¼ºå¤§çš„æ•…äº‹ï¼Œæˆ‘ä¼šåšæ›´å…ˆè¿›çš„åœºæ™¯åç»­èŒä½ã€‚

ä½ å¯ä»¥åœ¨[cakebuild.net](http://cakebuild.net/)äº†è§£æ›´å¤šå…³äº Cake çš„ä¿¡æ¯ï¼Œé‚£é‡Œé™¤äº† Cake è‡ªå·±çš„æ–‡æ¡£ä¹‹å¤–â€”â€”å¤§å¤šæ•°æ’ä»¶ API éƒ½æœ‰æ–‡æ¡£è®°å½•ï¼ŒåŒ…æ‹¬ [Cakeã€‚Kudu](http://cakebuild.net/api/Cake.Kudu.Provider/KuduProvider/) ã€‚

å¦‚å¾€å¸¸ä¸€æ ·ï¼Œå¦‚æœä½ æœ‰ä»»ä½•åé¦ˆã€è¡¨æ‰¬æˆ–é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ã€‚ä½ å¯ä»¥åœ¨ä¸‹é¢çš„ GitHub åº“æ‰¾åˆ°è¿™ç¯‡æ–‡ç« çš„å®Œæ•´ä»£ç 

[](https://github.com/azurevoodoo/DeliveringFunctionswithCake) [## azure voodoo/äº¤ä»˜è›‹ç³•åŠŸèƒ½

### é€šè¿‡ Cake è„šæœ¬ä½¿ç”¨ C#éƒ¨ç½² Azure å‡½æ•°

github.com](https://github.com/azurevoodoo/DeliveringFunctionswithCake) [![](img/50ef4044ecd4e250b5d50f368b775d38.png)](http://bit.ly/HackernoonFB)[![](img/979d9a46439d5aebbdcdca574e21dc81.png)](https://goo.gl/k7XYbx)[![](img/2930ba6bd2c12218fdbbf7e02c8746ff.png)](https://goo.gl/4ofytp)

> [é»‘å®¢ä¸­åˆ](http://bit.ly/Hackernoon)æ˜¯é»‘å®¢å¦‚ä½•å¼€å§‹ä»–ä»¬çš„ä¸‹åˆã€‚æˆ‘ä»¬æ˜¯ [@AMI](http://bit.ly/atAMIatAMI) å®¶åº­çš„ä¸€å‘˜ã€‚æˆ‘ä»¬ç°åœ¨[æ¥å—æŠ•ç¨¿](http://bit.ly/hackernoonsubmission)å¹¶ä¹æ„[è®¨è®ºå¹¿å‘Š&èµåŠ©](mailto:partners@amipublications.com)æœºä¼šã€‚
> 
> å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•…äº‹ï¼Œæˆ‘ä»¬æ¨èä½ é˜…è¯»æˆ‘ä»¬çš„[æœ€æ–°ç§‘æŠ€æ•…äº‹](http://bit.ly/hackernoonlatestt)å’Œ[è¶‹åŠ¿ç§‘æŠ€æ•…äº‹](https://hackernoon.com/trending)ã€‚ç›´åˆ°ä¸‹ä¸€æ¬¡ï¼Œä¸è¦æŠŠä¸–ç•Œçš„ç°å®æƒ³å½“ç„¶ï¼

![](img/be0ca55ba73a573dce11effb2ee80d56.png)