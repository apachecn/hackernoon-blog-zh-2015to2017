<html>
<head>
<title>Higher-Order Components (HOCs) for Beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">é«˜é˜¶å…ƒä»¶(hoc ),é€‚åˆåˆå­¦è€…</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/higher-order-components-hocs-for-beginners-25cdcf1f1713?source=collection_archive---------4-----------------------#2017-07-17">https://medium.com/hackernoon/higher-order-components-hocs-for-beginners-25cdcf1f1713?source=collection_archive---------4-----------------------#2017-07-17</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/c7e6044ea8e07fd69562e529b2e262c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*BV2jDav85N4CDE-ZjgFzZw.jpeg"/></div></figure><h1 id="a913" class="iy iz hu bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv dt translated">å‰è¨€</h1><blockquote class="jw jx jy"><p id="71f6" class="jz ka kb kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">æ³¨:è¿™æ˜¯æœ€åˆå‘å¸ƒåœ¨æˆ‘çš„<a class="ae ky" href="https://btnwtn.com/articles/higher-order-components-for-beginners" rel="noopener ugc nofollow" target="_blank">ä¸ªäººç½‘ç«™</a>ä¸Šçš„ã€‚</p></blockquote><p id="1028" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">æˆ‘å†™è¿™ç¯‡æ–‡ç« æ˜¯å› ä¸ºå…¶ä»–æ¯ç¯‡æ–‡ç« â€”â€”åŒ…æ‹¬å…³äºé«˜é˜¶ç»„ä»¶çš„Reactå®˜æ–¹æ–‡æ¡£â€”â€”éƒ½è®©æˆ‘è¿™ä¸ªåˆå­¦è€…æ„Ÿåˆ°å›°æƒ‘ã€‚æˆ‘æ˜ç™½é«˜é˜¶ç»„ä»¶æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œä½†ä¸æ˜ç™½å®ƒä»¬å¦‚ä½•æœ‰ç”¨ã€‚æœ¬æ–‡æ—¨åœ¨æ¾„æ¸…ä¸€äº›å…³äºé«˜é˜¶å…ƒä»¶çš„å›°æƒ‘ã€‚</p><p id="7d5e" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">åœ¨æˆ‘ä»¬ç†è§£HOCsä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆäº†è§£ä¸€äº›å…³äºJavascriptä¸­å‡½æ•°çš„äº‹æƒ…ã€‚</p><h1 id="f21e" class="iy iz hu bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv dt translated">ES6ç®­å¤´åŠŸèƒ½ç®€ä»‹</h1><p id="a855" class="pw-post-body-paragraph jz ka hu kc b kd lc kf kg kh ld kj kk kz le kn ko la lf kr ks lb lg kv kw kx hn dt translated">æœ¬æ–‡å°†æä¾›ä»…ä½¿ç”¨ES6ç®­å¤´å‡½æ•°çš„ä¾‹å­ã€‚å¦‚æœä½ ä»¥å‰ä»æœªè§è¿‡ç®­å¤´å‡½æ•°ï¼Œå®ƒä»¬æœ¬è´¨ä¸Šç­‰åŒäºæ­£åˆ™å‡½æ•°è¡¨è¾¾å¼ã€‚ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¸¸è§„å‡½æ•°å’Œç®­å¤´å‡½æ•°ä¹‹é—´çš„åŒºåˆ«ã€‚</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="e31a" class="lq iz hu lm b fv lr ls l lt lu">function () {<br/>  return 42<br/>}</span><span id="a965" class="lq iz hu lm b fv lv ls l lt lu">// same as:<br/>() =&gt; 42</span><span id="38e3" class="lq iz hu lm b fv lv ls l lt lu">// same as:<br/>() =&gt; {<br/>  return 42<br/>}</span><span id="fe95" class="lq iz hu lm b fv lv ls l lt lu">function person(name) {<br/>  return { name: name }<br/>}</span><span id="9f67" class="lq iz hu lm b fv lv ls l lt lu">// same as:<br/>(name) =&gt; {<br/>  return { name: name }<br/>}</span></pre><p id="47ea" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">é˜…è¯»MDN ä¸Šçš„<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" rel="noopener ugc nofollow" target="_blank">ç®­å¤´åŠŸèƒ½æ–‡æ¡£ä»¥è·å¾—æ›´å®Œæ•´çš„ç†è§£ã€‚</a></p><h1 id="265a" class="iy iz hu bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv dt translated">ä½œä¸ºä»·å€¼å’Œéƒ¨åˆ†åº”ç”¨çš„åŠŸèƒ½</h1><p id="e50e" class="pw-post-body-paragraph jz ka hu kc b kd lc kf kg kh ld kj kk kz le kn ko la lf kr ks lb lg kv kw kx hn dt translated">å°±åƒæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ç­‰ã€‚ï¼Œ<em class="kb">å‡½æ•°æ˜¯å€¼</em>ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åƒä¼ é€’å…¶ä»–æ•°æ®ä¸€æ ·ä¼ é€’å‡½æ•°ã€‚æ‚¨å¯ä»¥å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="bb96" class="lq iz hu lm b fv lr ls l lt lu">const execute = (someFunction) =&gt; someFunction()</span><span id="283a" class="lq iz hu lm b fv lv ls l lt lu">execute(() =&gt; alert('Executed'))</span></pre><p id="96c5" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">ä½ å¯ä»¥ä»ä¸€ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="a711" class="lq iz hu lm b fv lr ls l lt lu">const getOne = () =&gt; () =&gt; 1</span><span id="9257" class="lq iz hu lm b fv lv ls l lt lu">getOne()()</span></pre><p id="535a" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">æˆ‘ä»¬åœ¨<code class="eh lw lx ly lm b">getOne</code>åé¢æœ‰ä¸¤ä¸ª<code class="eh lw lx ly lm b">()</code>çš„åŸå› æ˜¯å‡½æ•°çš„ç¬¬ä¸€ä¸ªåº”ç”¨è¿”å›å¦ä¸€ä¸ªã€‚ä¸¾ä¾‹è¯´æ˜:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="9f1f" class="lq iz hu lm b fv lr ls l lt lu">const getOne = () =&gt; () =&gt; 1</span><span id="d7a1" class="lq iz hu lm b fv lv ls l lt lu">getOne<br/>//=&gt; () =&gt; () =&gt; 1</span><span id="87f6" class="lq iz hu lm b fv lv ls l lt lu">getOne()<br/>//=&gt; () =&gt; 1</span><span id="2dca" class="lq iz hu lm b fv lv ls l lt lu">getOne()()<br/>//=&gt; 1</span></pre><p id="6422" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">ä»å‡½æ•°è¿”å›å‡½æ•°çš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™è·Ÿè¸ªåˆå§‹è¾“å…¥çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„å‡½æ•°æ¥å—ä¸€ä¸ªæ•°å­—ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªå°†è¯¥å‚æ•°ä¹˜ä»¥ä¸€ä¸ªæ–°å‚æ•°çš„å‡½æ•°:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="0d33" class="lq iz hu lm b fv lr ls l lt lu">const multiply = (x) =&gt; (y) =&gt; x * y</span><span id="51e0" class="lq iz hu lm b fv lv ls l lt lu">multiply(5)(20)</span></pre><p id="f700" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">è¿™ä¸ªä¾‹å­å’Œ<code class="eh lw lx ly lm b">getOne</code>çš„å·¥ä½œåŸç†ä¸€æ ·ï¼Œæ¯ä¸ªæ‹¬å·å‘å‡½æ•°åº”ç”¨ä¸€äº›è¾“å…¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†<code class="eh lw lx ly lm b">x</code>åˆ†é…ç»™<code class="eh lw lx ly lm b">5</code>ï¼Œå°†<code class="eh lw lx ly lm b">y</code>åˆ†é…ç»™<code class="eh lw lx ly lm b">20</code>ã€‚</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="7086" class="lq iz hu lm b fv lr ls l lt lu">const multiply = (x) =&gt; (y) =&gt; x * y</span><span id="cac4" class="lq iz hu lm b fv lv ls l lt lu">multiply<br/>//=&gt; (x) =&gt; (y) =&gt; x * y</span><span id="f153" class="lq iz hu lm b fv lv ls l lt lu">multiply(5)<br/>//=&gt; (y) =&gt; 5 * y</span><span id="800e" class="lq iz hu lm b fv lv ls l lt lu">multiply(5)(20)<br/>//=&gt; 5 * 20</span></pre><p id="5989" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">å½“æˆ‘ä»¬è°ƒç”¨åªæœ‰ä¸€ä¸ªå‚æ•°çš„å‡½æ•°<code class="eh lw lx ly lm b">multiply</code>æ—¶ï¼Œæˆ‘ä»¬éƒ¨åˆ†åœ°åº”ç”¨äº†è¿™ä¸ªå‡½æ•°ã€‚å½“æˆ‘ä»¬è°ƒç”¨<code class="eh lw lx ly lm b">multiply(5)</code>æ—¶ï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªå°†å®ƒçš„è¾“å…¥ä¹˜ä»¥5çš„å‡½æ•°ã€‚å¦‚æœæˆ‘ä»¬è°ƒç”¨<code class="eh lw lx ly lm b">multiply(7)</code>ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªå°†è¾“å…¥ä¹˜ä»¥7çš„å‡½æ•°ï¼Œä¾æ­¤ç±»æ¨ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨éƒ¨åˆ†åº”ç”¨ç¨‹åºåˆ›å»ºå…·æœ‰é¢„å®šä¹‰è¾“å…¥çš„æ–°åŠŸèƒ½:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="b923" class="lq iz hu lm b fv lr ls l lt lu">const multiply = (x) =&gt; (y) =&gt; x * y</span><span id="8aec" class="lq iz hu lm b fv lv ls l lt lu">const multiplyByFive = multiply(5)<br/>const multiplyBy100 = multiply(100)</span><span id="b78f" class="lq iz hu lm b fv lv ls l lt lu">multiplyByFive(20)<br/>//=&gt; 100<br/>multiply(5)(20)<br/>//=&gt; 100</span><span id="0450" class="lq iz hu lm b fv lv ls l lt lu">multiplyBy100(5)<br/>//=&gt; 500<br/>multiply(100)(5)<br/>//=&gt; 500</span></pre><p id="7db5" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">è¿™å¯èƒ½ä¸€å¼€å§‹çœ‹èµ·æ¥ä¸æ˜¯è¶…çº§æœ‰ç”¨ã€‚ä½†æ˜¯ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨åˆ†éƒ¨åº”ç”¨ç¨‹åºæ¥ç¼–å†™æ›´æ˜“äºé˜…è¯»å’Œæ¨ç†çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ›´ç®€æ´çš„ä¸œè¥¿æ¥ä»£æ›¿<code class="eh lw lx ly lm b"><a class="ae ky" href="https://www.styled-components.com/docs/basics#adapting-based-on-props" rel="noopener ugc nofollow" target="_blank">styled-components</a></code>å¤æ‚çš„å‡½æ•°æ’å€¼è¯­æ³•ã€‚</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="d7a4" class="lq iz hu lm b fv lr ls l lt lu">// before<br/>const Button = styled.button`<br/>  background-color: ${({ theme }) =&gt; theme.bgColor}<br/>  color: ${({ theme }) =&gt; theme.textColor}<br/>`</span><span id="4483" class="lq iz hu lm b fv lv ls l lt lu">&lt;Button theme={themes.primary}&gt;Submit&lt;/Button&gt;</span><span id="b963" class="lq iz hu lm b fv lv ls l lt lu">// after<br/>const fromTheme = (prop) =&gt; ({ theme }) =&gt; theme[prop]</span><span id="b4e1" class="lq iz hu lm b fv lv ls l lt lu">const Button = styled.button`<br/>  background-color: ${fromTheme("bgColor")}<br/>  color: ${fromTheme("textColor")}<br/>`</span><span id="df1a" class="lq iz hu lm b fv lv ls l lt lu">&lt;Button theme={themes.primary}&gt;Submit&lt;/Button&gt;</span></pre><p id="5ba8" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ¥å—å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°çš„å‡½æ•°:<code class="eh lw lx ly lm b">fromTheme("textColor")</code>ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ¥å—å¸¦æœ‰<code class="eh lw lx ly lm b">theme</code>å±æ€§çš„å¯¹è±¡çš„å‡½æ•°:<code class="eh lw lx ly lm b">({ theme }) =&gt; theme[prop]</code>ï¼Œç„¶åæˆ‘ä»¬è¯•å›¾é€šè¿‡ä¼ å…¥<code class="eh lw lx ly lm b">"textColor"</code>çš„åˆå§‹å­—ç¬¦ä¸²æ¥æŸ¥æ‰¾è¯¥å¯¹è±¡ã€‚æˆ‘ä»¬å¯ä»¥æ›´è¿›ä¸€æ­¥ï¼Œç¼–å†™ç±»ä¼¼äº<code class="eh lw lx ly lm b">backgroundColor</code>å’Œ<code class="eh lw lx ly lm b">textColor</code>çš„å‡½æ•°ï¼Œå®ƒä»¬éƒ¨åˆ†åº”ç”¨äº†<code class="eh lw lx ly lm b">fromTheme</code>å‡½æ•°:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="c0e8" class="lq iz hu lm b fv lr ls l lt lu">const fromTheme = (prop) =&gt; ({ theme }) =&gt; theme[prop]<br/>const backgroundColor = fromTheme("bgColor")<br/>const textColor = fromTheme("textColor")</span><span id="9ec0" class="lq iz hu lm b fv lv ls l lt lu">const Button = styled.button`<br/>  background-color: ${backgroundColor}<br/>  color: ${textColor}<br/>`</span></pre><h1 id="9421" class="iy iz hu bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv dt translated">é«˜é˜¶å‡½æ•°</h1><p id="32ac" class="pw-post-body-paragraph jz ka hu kc b kd lc kf kg kh ld kj kk kz le kn ko la lf kr ks lb lg kv kw kx hn dt translated">é«˜é˜¶å‡½æ•°è¢«å®šä¹‰ä¸ºæ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºè‡ªå˜é‡çš„å‡½æ•°ã€‚å¦‚æœæ‚¨æ›¾ç»ä½¿ç”¨è¿‡åƒ<code class="eh lw lx ly lm b"><a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" rel="noopener ugc nofollow" target="_blank">map</a></code>è¿™æ ·çš„å‡½æ•°ï¼Œæ‚¨å¯èƒ½å·²ç»ç†Ÿæ‚‰é«˜é˜¶å‡½æ•°ã€‚å¦‚æœä½ ä¸ç†Ÿæ‚‰<code class="eh lw lx ly lm b">map</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¾ªç¯å‡½æ•°ï¼Œå°†å‡½æ•°åº”ç”¨äºæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å¯¹ä¸€ç»„æ•°å­—æ±‚å¹³æ–¹ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="d2d6" class="lq iz hu lm b fv lr ls l lt lu">const square = (x) =&gt; x * x</span><span id="4966" class="lq iz hu lm b fv lv ls l lt lu">[1, 2, 3].map(square)<br/>//=&gt; [ 1, 4, 9 ]</span></pre><p id="bfe8" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">æˆ‘ä»¬å¯ä»¥ç¼–å†™è‡ªå·±ç‰ˆæœ¬çš„<code class="eh lw lx ly lm b">map</code>æ¥è¯´æ˜è¿™ä¸ªæ¦‚å¿µ:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="42f0" class="lq iz hu lm b fv lr ls l lt lu">const map = (fn, array) =&gt; {<br/>  const mappedArray = []</span><span id="8013" class="lq iz hu lm b fv lv ls l lt lu">  for (let i = 0; i &lt; array.length; i++) {<br/>    mappedArray.push(<br/>      // apply fn with the current element of the array<br/>      fn(array[i])<br/>    )<br/>  }</span><span id="4783" class="lq iz hu lm b fv lv ls l lt lu">  return mappedArray<br/>}</span></pre><p id="3007" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„<code class="eh lw lx ly lm b">map</code>æ¥åšä¸€äº›äº‹æƒ…ï¼Œæ¯”å¦‚å¯¹ä¸€ä¸ªæ•°å­—æ•°ç»„æ±‚å¹³æ–¹:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="93d7" class="lq iz hu lm b fv lr ls l lt lu">const square = (x) =&gt; x * x</span><span id="7198" class="lq iz hu lm b fv lv ls l lt lu">console.log(map(square, [1, 2, 3, 4, 5]))<br/>//=&gt; [ 1, 4, 9, 16, 25 ]</span></pre><p id="f1d1" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">æˆ–è€…è¿”å›ä¸€ä¸ªæ•°ç»„<code class="eh lw lx ly lm b">&lt;li&gt;</code> Reactå…ƒç´ :</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="4286" class="lq iz hu lm b fv lr ls l lt lu">const HeroList = ({ heroes }) =&gt; (<br/>  &lt;ul&gt;<br/>    {map((hero) =&gt; (<br/>      &lt;li key={hero}&gt;{hero}&lt;/li&gt;<br/>    ), heroes)}<br/>  &lt;/ul&gt;<br/>)</span><span id="b0cc" class="lq iz hu lm b fv lv ls l lt lu">&lt;HeroList heroes=[<br/>  "Wonder Woman",<br/>  "Black Widow",<br/>  "Spider Man",<br/>  "Storm",<br/>  "Deadpool"<br/>]/&gt;<br/>/*=&gt; (<br/>  &lt;ul&gt;<br/>    &lt;li&gt;Wonder Woman&lt;/li&gt;<br/>    &lt;li&gt;Black Widow&lt;/li&gt;<br/>    &lt;li&gt;Spider Man&lt;/li&gt;<br/>    &lt;li&gt;Storm&lt;/li&gt;<br/>    &lt;li&gt;Deadpool&lt;/li&gt;<br/>  &lt;/ul&gt;<br/>)*/</span></pre><h1 id="dad9" class="iy iz hu bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv dt translated">é«˜é˜¶ç»„ä»¶</h1><p id="0036" class="pw-post-body-paragraph jz ka hu kc b kd lc kf kg kh ld kj kk kz le kn ko la lf kr ks lb lg kv kw kx hn dt translated">æˆ‘ä»¬çŸ¥é“é«˜é˜¶å‡½æ•°æ˜¯æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºè‡ªå˜é‡çš„å‡½æ•°ã€‚åœ¨Reactä¸­ï¼Œä»»ä½•è¿”å›<code class="eh lw lx ly lm b"><a class="ae ky" href="https://facebook.github.io/react/docs/jsx-in-depth.html" rel="noopener ugc nofollow" target="_blank">JSX</a></code>çš„å‡½æ•°éƒ½è¢«ç§°ä¸ºæ— çŠ¶æ€åŠŸèƒ½ç»„ä»¶ï¼Œæˆ–ç®€ç§°ä¸ºåŠŸèƒ½ç»„ä»¶ã€‚ä¸€ä¸ªåŸºæœ¬çš„åŠŸèƒ½ç»„ä»¶å¦‚ä¸‹æ‰€ç¤º:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="39ea" class="lq iz hu lm b fv lr ls l lt lu">const Title = (props) =&gt; &lt;h1&gt;{props.children}&lt;/h1&gt;</span><span id="b218" class="lq iz hu lm b fv lv ls l lt lu">&lt;Title&gt;Higher-Order Components(HOCs) for React Newbies&lt;/Title&gt;<br/>//=&gt; &lt;h1&gt;Higher-Order Components(HOCs) for React Newbies&lt;/h1&gt;</span></pre><p id="feac" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">é«˜é˜¶ç»„ä»¶æ˜¯æ¥å—ç»„ä»¶ä½œä¸ºå‚æ•°å¹¶è¿”å›ç»„ä»¶çš„å‡½æ•°ã€‚å¦‚ä½•ä½¿ç”¨ä¼ é€’çš„ç»„ä»¶å–å†³äºæ‚¨ã€‚ä½ ç”šè‡³å¯ä»¥å®Œå…¨å¿½ç•¥å®ƒ:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="c745" class="lq iz hu lm b fv lr ls l lt lu">// Technically an HOC<br/>const ignore = (anything) =&gt; (props) =&gt; &lt;h1&gt;:)&lt;/h1&gt;</span><span id="6d7c" class="lq iz hu lm b fv lv ls l lt lu">const IgnoreHeroList = ignore(HeroList)<br/>&lt;IgnoreHeroList /&gt;<br/>//=&gt; &lt;h1&gt;:)&lt;/h1&gt;</span></pre><p id="3501" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">æ‚¨å¯ä»¥ç¼–å†™ä¸€ä¸ªå°†å…¶è¾“å…¥è½¬æ¢ä¸ºå¤§å†™çš„ç‰¹è®¾:</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="2379" class="lq iz hu lm b fv lr ls l lt lu">const yell = (PassedComponent) =&gt;<br/>  ({ children, ...props }) =&gt;<br/>    &lt;PassedComponent {...props}&gt;<br/>      {children.toUpperCase()}!<br/>    &lt;/PassedComponent&gt;</span><span id="700c" class="lq iz hu lm b fv lv ls l lt lu">const Title = (props) =&gt; &lt;h1&gt;{props.children}&lt;/h1&gt;<br/>const AngryTitle = yell(Title)</span><span id="f75d" class="lq iz hu lm b fv lv ls l lt lu">&lt;AngryTitle&gt;Whatever&lt;/AngryTitle&gt;<br/>//=&gt; &lt;h1&gt;WHATEVER!&lt;/h1&gt;</span></pre><p id="223e" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">è¿˜å¯ä»¥è¿”å›æœ‰çŠ¶æ€çš„ç»„ä»¶ï¼Œå› ä¸ºJavascriptä¸­çš„ç±»æ˜¯å‡½æ•°çš„è¯­æ³•ç³–ã€‚è¿™å…è®¸æ‚¨æŒ‚é’©åˆ°åƒ<code class="eh lw lx ly lm b">componentDidMount</code>è¿™æ ·çš„Reactç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚è¿™å°±æ˜¯HOCsçœŸæ­£æœ‰ç”¨çš„åœ°æ–¹ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥åšä¸€äº›äº‹æƒ…ï¼Œæ¯”å¦‚å°†HTTPè¯·æ±‚çš„ç»“æœä½œä¸ºé“å…·ä¼ é€’ç»™åŠŸèƒ½ç»„ä»¶ã€‚</p><pre class="lh li lj lk fq ll lm ln lo aw lp dt"><span id="d000" class="lq iz hu lm b fv lr ls l lt lu">const withGists = (PassedComponent) =&gt;<br/>  class WithGists extends React.Component {<br/>    state = {<br/>      gists: []<br/>    }</span><span id="68a3" class="lq iz hu lm b fv lv ls l lt lu">    componentDidMount() {<br/>      fetch("https://api.github.com/gists/public")<br/>      .then((r) =&gt; r.json())<br/>      .then((gists) =&gt; this.setState({<br/>        gists: gists<br/>      }))<br/>    }</span><span id="bb3d" class="lq iz hu lm b fv lv ls l lt lu">    render() {<br/>      return (<br/>        &lt;PassedComponent<br/>          {...this.props}<br/>          gists={this.state.gists}<br/>        /&gt;<br/>      )<br/>    }<br/>  }<br/></span><span id="cd25" class="lq iz hu lm b fv lv ls l lt lu">const Gists = ({ gists }) =&gt; (<br/>  &lt;pre&gt;{JSON.stringify(gists, null, 2)}&lt;/pre&gt;<br/>)</span><span id="c6d7" class="lq iz hu lm b fv lv ls l lt lu">const GistsList = withGists(Gists)</span><span id="222f" class="lq iz hu lm b fv lv ls l lt lu">&lt;GistsList /&gt;<br/>//=&gt; Before api request finishes:<br/>// &lt;Gists gists={[]} /&gt;<br/>// <br/>//=&gt; After api request finishes:<br/>// &lt;Gists gists={[<br/>//  { /* â€¦ */ },<br/>//  { /* â€¦ */ },<br/>//  { /* â€¦ */ }<br/>// ]} /&gt;</span></pre><p id="230b" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">æ‚¨å¯ä»¥åœ¨ä»»ä½•ç»„ä»¶ä¸Šè°ƒç”¨<code class="eh lw lx ly lm b">withGists</code>,å®ƒå°†ä¼ é€’gists apiè°ƒç”¨çš„ç»“æœã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°è¿™ä¸ª<a class="ae ky" href="https://codesandbox.io/embed/o2YpJnpDj" rel="noopener ugc nofollow" target="_blank">æ›´å…·ä½“çš„ä¾‹å­ã€‚</a></p><h1 id="6a78" class="iy iz hu bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv dt translated">ç»“è®º:hocæ˜¯ğŸ”¥ ğŸ”¥ ğŸ”¥</h1><p id="610a" class="pw-post-body-paragraph jz ka hu kc b kd lc kf kg kh ld kj kk kz le kn ko la lf kr ks lb lg kv kw kx hn dt translated">Reduxä½¿ç”¨ä¸€ä¸ªç‰¹è®¾çš„<code class="eh lw lx ly lm b"><a class="ae ky" href="https://github.com/reactjs/react-redux/blob/master/docs/api.md#connectmapstatetoprops-mapdispatchtoprops-mergeprops-options" rel="noopener ugc nofollow" target="_blank">connect</a></code>å°†å€¼ä»åº”ç”¨ç¨‹åºå•†åº—ä¼ é€’åˆ°â€œè¿æ¥â€çš„ç»„ä»¶ã€‚å®ƒè¿˜è¿›è¡Œä¸€äº›é”™è¯¯æ£€æŸ¥å’Œç»„ä»¶ç”Ÿå‘½å‘¨æœŸä¼˜åŒ–ï¼Œå¦‚æœæ‰‹åŠ¨è¿›è¡Œï¼Œå°†ä¼šå¯¼è‡´æ‚¨ç¼–å†™å¤§é‡æ ·æ¿ä»£ç ã€‚</p><p id="1c72" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">å¦‚æœæ‚¨å‘ç°è‡ªå·±åœ¨ä¸åŒçš„åœ°æ–¹å†™äº†å¾ˆå¤šä»£ç åšåŒæ ·çš„äº‹æƒ…ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥å°†è¿™äº›ä»£ç é‡æ„ä¸ºä¸€ä¸ªå¯é‡ç”¨çš„HOCã€‚</p><p id="f3e3" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">hocçœŸçš„å¾ˆæœ‰è¡¨ç°åŠ›ï¼Œä½ å¯ä»¥ç”¨å®ƒä»¬åšå¾ˆå¤šå¾ˆé…·çš„ä¸œè¥¿ã€‚ç„¶è€Œï¼Œå› ä¸ºå®ƒä»¬å¤ªå¯Œäºè¡¨ç°åŠ›äº†ï¼Œå¦‚æœä½ æƒ³çš„è¯ï¼Œä½ å¯ä»¥è¿‡åº¦ä½¿ç”¨å®ƒä»¬ã€‚</p><p id="8d12" class="pw-post-body-paragraph jz ka hu kc b kd ke kf kg kh ki kj kk kz km kn ko la kq kr ks lb ku kv kw kx hn dt translated">å°½é‡è®©ä½ çš„HOCsä¿æŒç®€å•ï¼Œå¹¶è‡´åŠ›äºç¼–å†™ä¸éœ€è¦ä½ è¯»ä¸€ç¯‡é•¿æ–‡ç« å°±èƒ½ç†è§£çš„ä»£ç ã€‚</p><h1 id="d922" class="iy iz hu bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv dt translated">é™„åŠ ç»ƒä¹ </h1><p id="0fdc" class="pw-post-body-paragraph jz ka hu kc b kd lc kf kg kh ld kj kk kz le kn ko la lf kr ks lb lg kv kw kx hn dt translated">ä»¥ä¸‹æ˜¯ä¸€äº›å·©å›ºä½ å¯¹HOCsç†è§£çš„ç»ƒä¹ :</p><ul class=""><li id="0f4f" class="lz ma hu kc b kd ke kh ki kz mb la mc lb md kx me mf mg mh dt translated">ç¼–å†™ä¸€ä¸ªæ’¤é”€å…¶è¾“å…¥çš„ç‰¹è®¾</li><li id="7b4f" class="lz ma hu kc b kd mi kh mj kz mk la ml lb mm kx me mf mg mh dt translated">ç¼–å†™ä¸€ä¸ªä»APIå‘å…¶ä¼ é€’çš„ç»„ä»¶æä¾›æ•°æ®çš„ç‰¹è®¾</li><li id="2de6" class="lz ma hu kc b kd mi kh mj kz mk la ml lb mm kx me mf mg mh dt translated">å†™ä¸€ä¸ªå®ç°<code class="eh lw lx ly lm b"><a class="ae ky" href="https://facebook.github.io/react/docs/react-component.html#shouldcomponentupdate" rel="noopener ugc nofollow" target="_blank">shouldComponentUpdate</a></code> <a class="ae ky" href="https://facebook.github.io/react/docs/optimizing-performance.html#avoid-reconciliation" rel="noopener ugc nofollow" target="_blank">çš„ç‰¹è®¾æ¥é¿å…è°ƒå’Œ</a>ã€‚</li><li id="d833" class="lz ma hu kc b kd mi kh mj kz mk la ml lb mm kx me mf mg mh dt translated">ç¼–å†™ä¸€ä¸ªä½¿ç”¨<code class="eh lw lx ly lm b"><a class="ae ky" href="https://facebook.github.io/react/docs/react-api.html#react.children.toarray" rel="noopener ugc nofollow" target="_blank">React.Children.toArray</a></code>å¯¹ä¼ é€’ç»™å…¶ä¼ é€’ç»„ä»¶çš„å­ç»„ä»¶è¿›è¡Œæ’åºçš„ç‰¹è®¾ç»„ä»¶ã€‚</li></ul><figure class="lh li lj lk fq iv"><div class="bz el l di"><div class="mn mo l"/></div></figure></div></div>    
</body>
</html>