# å¦‚ä½•å†é€  GitHub çš„è´¡çŒ®å›¾

> åŸæ–‡ï¼š<https://medium.com/hackernoon/how-to-recreate-githubs-contribution-graph-a0a8d4d91011>

æˆ‘ç›¸ä¿¡å¤§å¤šæ•°è¯»åˆ°è¿™ç¯‡æ–‡ç« çš„äººéƒ½çŸ¥é“ GitHub å’Œ Redditã€‚ä½œä¸ºä¸¤è€…çš„ç‹‚çƒ­ç”¨æˆ·ï¼Œæˆ‘æƒ³ä½¿ç”¨ Reddit çš„æ•°æ®é‡æ–°åˆ›å»º GitHub çš„çƒ­å›¾/è´¡çŒ®å›¾ï¼Œä»¥äº†è§£å®ƒçš„å®ç°ï¼Œå¹¶ä»¥ç®€æ´çš„å¯è§†åŒ–æ–¹å¼æŸ¥çœ‹æˆ‘çš„ Reddit æ´»åŠ¨ã€‚

![](img/745576b9a989ef1ec4c8b4e4e353f8ab.png)

æˆ‘ä½¿ç”¨äº† [d3.js](https://d3js.org/) ï¼Œç”¨äºæ„å»ºå›¾å½¢çš„ javascript åº“ï¼Œ [jQuery](https://jquery.com/) ï¼Œè¶…çº§æ–¹ä¾¿çš„ DOM æ“ä½œï¼Œä»¥åŠ B [ootstrap](http://getbootstrap.com/) ï¼Œå¯¹äºè®¾è®¡æŠ€èƒ½è¾ƒå·®çš„å¼€å‘äººå‘˜æ¥è¯´éå¸¸æ£’ã€‚

é¦–å…ˆï¼Œæˆ‘å°†è®¨è®º UI ç»„ä»¶ä»¥åŠ d3 åœ¨å…¶ä¸­æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚è¿™ä¸ª[ä¾‹å­](http://bl.ocks.org/mbostock/4063318)ç»™äº†æˆ‘å¾ˆå¤šå…³äº UI çš„å¸®åŠ©ã€‚å¯¹äº GitHub çš„ç”¨ä¾‹ä»¥åŠè¿™ä¸ªç”¨ä¾‹ï¼Œå›¾è¡¨æ€»æ˜¯ä¸€å¹´çš„é•¿åº¦ï¼Œè¿™ä½¿å¾—å®ƒæ›´ç®€å•ï¼Œå› ä¸ºå›¾è¡¨å°†æ€»æ˜¯ç›¸åŒçš„é•¿åº¦ã€‚

æ•´ä¸ªå›¾æ˜¯ä¸€ä¸ª SVG å…ƒç´ ï¼Œå®ƒåŒ…å«å­å…ƒç´ ï¼Œè¿™äº›å­å…ƒç´ ä¹Ÿæ˜¯ SVGã€‚æ¯ä¸ªä»£è¡¨ä¸€å¤©çš„æ–¹å—å°†åŒ…å«ä¸€ä¸ªæ ¼å¼ä¸º`%Y-%m-%d`çš„ *id* æ ‡ç­¾ï¼Œç±»ä¼¼äº`2017-01-06`ã€‚æ­£æ–¹å½¢é¦–å…ˆè¢«æ¸²æŸ“æˆç›¸åŒçš„é¢œè‰²ï¼Œ`#eee`ã€‚

æ­£æ–¹å½¢çš„ä½ç½®ç”±å®ƒçš„æ˜ŸæœŸå’Œæ—¥å­å†³å®šã€‚ *x* ä½ç½®ç”±æ˜ŸæœŸå·`%U`å†³å®šã€‚

> YYYY çš„ç¬¬ 1 å‘¨ä»¥æ˜ŸæœŸæ—¥å¼€å§‹(æ ¹æ®%U)ã€‚ä¸€å¹´ä¸­ç¬¬ä¸€å‘¨ä¹‹å‰çš„æ—¥å­åœ¨ç¬¬ 0 å‘¨ã€‚

y ä½ç½®ç”±ä¸€å‘¨ä¸­çš„æŸä¸€å¤©å†³å®šã€‚å‘¨æ—¥æ˜¯ç¬¬ä¸€ä¸ªï¼Œå‘¨å…­æ˜¯æœ€åä¸€ä¸ªï¼Œæ— è®ºæ˜¯ 0 ç´¢å¼•è¿˜æ˜¯ 1 ç´¢å¼•éƒ½æ²¡æœ‰åŒºåˆ«ã€‚è¿™çœ‹èµ·æ¥ä¼šåƒ

```
d3.select('.js-heatmap')
  .enter()
  .append('svg')
  .enter()
  .append('rect')
  .attr('width', CELL_SIZE)
  .attr('height', CELL_SIZE)
  .attr('x', (d) => d3.timeFormat('%U')(d) * CELL_SIZE)
  .attr('y', (d) => d.getDay() * CELL_SIZE)
```

å¯¹äºæ­£æ–¹å½¢/ç½‘æ ¼ç€è‰²ï¼Œæ¯ä¸ªç½‘æ ¼éœ€è¦ä¸€ä¸ªç­‰çº§æˆ–åˆ†æ•°æ¥ç¡®å®šå®ƒçš„é¢œè‰²ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œè®©æˆ‘ä»¬å‡è®¾æ¯ä¸ªç½‘æ ¼å·²ç»æœ‰ä¸€ä¸ªåˆ†æ•°ã€‚(æˆ‘ä¼šåœ¨è¿™ä¸‹é¢è®¨è®ºæˆ‘æ˜¯æ€ä¹ˆç”¨ Reddit çš„ API è®¡ç®—åˆ†æ•°çš„)ã€‚

ç¡®å®šä¸€ä¸ªç½‘æ ¼çš„é¢œè‰²å–å†³äºå‡ ä¸ªå› ç´ :é¢œè‰²çš„æ•°é‡ï¼Œç½‘æ ¼ç­‰çº§å’Œç­‰çº§æå€¼(æœ€å°å€¼å’Œæœ€å¤§å€¼)ã€‚åŸºæœ¬ä¸Šï¼Œåˆ†æ•°å°†è¢«æŠ•å°„åˆ°åŸºäºé¢œè‰²æ•°é‡çš„æ ‡å°ºä¸Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä½¿ç”¨ 7 ç§é¢œè‰²ï¼Œå› æ­¤æ’åæœ€é«˜çš„åˆ†æ•°å°†è·å¾—é¢œè‰²#7ï¼Œåˆ†æ•°æ¥è¿‘å¹³å‡å€¼çš„åˆ†æ•°å°†è·å¾—é¢œè‰²#3ï¼Œä¾æ­¤ç±»æ¨ã€‚ä½¿ç”¨ d3 çš„ APIï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

```
d3.scaleQuantize()
  .domain([MIN, MAX])
  .range(d3.range(NUMBER_OF_COLORS)
  .map((d) => `color${d}`)); // Assign the grid the css class.
```

æˆ‘å°†é¢œè‰²åˆ†ç±»åˆ°ä¸€ä¸ª css ç±»ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

```
.color0 { fill: #d6e685 }
.color1 { fill: #44a340 }
.color2 { fill: #28752d }
.color3 { fill: #1e6823 }
.color4 { fill: #365e2f }
.color5 { fill: #144e12 }
```

æˆ‘å¦‚ä½•ä½¿ç”¨ Reddit çš„ API è·å–ç‰¹å®šç”¨æˆ·çš„æ•°æ®ã€‚æˆ‘ç”¨ Reddit ä¸åŒç±»å‹çš„è´¡çŒ®æ¥è®¡ç®—ä¸€å¤©çš„æ´»åŠ¨æ€»é‡ã€‚ä¾‹å¦‚ï¼Œä¸€å¤©ä¸­æäº¤çš„å¸–å­ã€è¯„è®ºã€å‘ä¸ŠæŠ•ç¥¨å’Œå‘ä¸‹æŠ•ç¥¨çš„æ•°é‡è½¬åŒ–ä¸ºæ€»åˆ†ã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™äº›å¯¹è±¡çš„ç«¯ç‚¹æ˜¯å…¬å…±çš„ï¼Œæ‰€ä»¥å½“ç”¨æˆ·è¾“å…¥ç”¨æˆ·åæ—¶ã€‚å› æ­¤ï¼Œæˆ‘å¯ä»¥è½»æ¾åœ°å‘å‡ºä¸€ä¸ª GET è¯·æ±‚æˆ–å¤šä¸ªè¯·æ±‚æ¥æå–æ•°æ®ã€‚ä¸€æ—¦è·å–äº†æ‰€æœ‰æ•°æ®ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™äº›æ•°æ®æ¥å‘ˆç°çƒ­å›¾ã€‚

è¿™ä¸ªå·¥å…·çš„æºä»£ç åœ¨ https://github.com/vinnyoodles/reddit-heatmap çš„ï¼Œå·¥å…·åœ¨ https://vinnyoodles.github.io/reddit-heatmap/çš„å‘å¸ƒã€‚

æˆ‘æ˜¯å¼—å‰å°¼äºšç†å·¥å¤§å­¦è®¡ç®—æœºç§‘å­¦ä¸“ä¸šçš„å­¦ç”Ÿï¼Œå–œæ¬¢å†™ä»£ç å’Œä¸¾é‡ğŸ’ªã€‚ [LinkedIn](https://www.linkedin.com/in/vinnyoodles) [Github](https://github.com/vinnyoodles)

[![](img/50ef4044ecd4e250b5d50f368b775d38.png)](http://bit.ly/HackernoonFB)[![](img/979d9a46439d5aebbdcdca574e21dc81.png)](https://goo.gl/k7XYbx)[![](img/2930ba6bd2c12218fdbbf7e02c8746ff.png)](https://goo.gl/4ofytp)

> [é»‘å®¢ä¸­åˆ](http://bit.ly/Hackernoon)æ˜¯é»‘å®¢å¦‚ä½•å¼€å§‹ä»–ä»¬çš„ä¸‹åˆã€‚æˆ‘ä»¬æ˜¯é˜¿å¦¹å®¶åº­çš„ä¸€å‘˜ã€‚æˆ‘ä»¬ç°åœ¨[æ¥å—æŠ•ç¨¿](http://bit.ly/hackernoonsubmission)å¹¶ä¹æ„[è®¨è®ºå¹¿å‘Š&èµåŠ©](mailto:partners@amipublications.com)æœºä¼šã€‚
> 
> å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•…äº‹ï¼Œæˆ‘ä»¬æ¨èä½ é˜…è¯»æˆ‘ä»¬çš„[æœ€æ–°ç§‘æŠ€æ•…äº‹](http://bit.ly/hackernoonlatestt)å’Œ[è¶‹åŠ¿ç§‘æŠ€æ•…äº‹](https://hackernoon.com/trending)ã€‚ç›´åˆ°ä¸‹ä¸€æ¬¡ï¼Œä¸è¦æŠŠä¸–ç•Œçš„ç°å®æƒ³å½“ç„¶ï¼

![](img/be0ca55ba73a573dce11effb2ee80d56.png)