# å°†æ— èŠçš„ç”µå­é‚®ä»¶é€šçŸ¥å˜æˆå¯è¡Œçš„è½»æ¾å¯¹è¯

> åŸæ–‡ï¼š<https://medium.com/hackernoon/turn-boring-email-notifications-into-actionable-slack-conversations-3c6b1177e1e1>

æ˜¨å¤©ï¼Œæˆ‘ä¸ä¸€ä½å®¢æˆ·è®¨è®ºï¼Œå›ç­”äº†ä»–ä»¬å…³äºæˆ‘ä»¬çš„ [3scale API ç®¡ç†](http://3scale.net)è§£å†³æ–¹æ¡ˆçš„ä¸€äº›é—®é¢˜ã€‚é™¤äº†å…¶ä»–äº‹æƒ…ä¹‹å¤–ï¼Œä»–ä»¬è¿˜å¯¹æˆ‘ä»¬çš„*â€œè­¦æŠ¥ç³»ç»Ÿâ€*ä»¥åŠæˆ‘ä»¬å¦‚ä½•åœ¨ä»–ä»¬çš„ API å‡ºç°é«˜æµé‡çš„æƒ…å†µä¸‹é€šçŸ¥ä»–ä»¬æ„Ÿåˆ°å¥½å¥‡ã€‚ç®€å•ï¼å¦‚æœæœ‰äººå³å°†è¾¾åˆ° API é…é¢ï¼Œæˆ‘ä»¬ä¼šå‘æ‚¨å‘é€ç”µå­é‚®ä»¶ã€‚

å‡ ä¹åœ¨æˆ‘å›ç­”è¿™ä¸ªé—®é¢˜çš„åŒæ—¶ï¼Œæˆ‘æƒ³æˆ‘å¬åˆ°è‡ªå·±åœ¨è¯´â€¦â€œç­‰ç­‰ï¼Œä»€ä¹ˆï¼Ÿï¼ç”µå­é‚®ä»¶ï¼Ÿ!"ã€‚æœ‰ç‚¹åƒ[é“æ­‰](https://hackernoon.com/tagged/apologizing)æˆ‘ä»¬æ²¡æœ‰æä¾›æ›´ç°ä»£çš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬ç»“æŸäº†é€šè¯ï¼Œæˆ‘æ€€ç€å¼ºçƒˆçš„æ„æ„¿å››å¤„æŸ¥çœ‹ï¼Œçœ‹çœ‹æˆ‘ä»¬å¦‚ä½•æ‰èƒ½æ”¹å–„è¿™ç§ä½“éªŒã€‚æˆ‘å¿…é¡»å¼„æ¸…æ¥šï¼è¿™æ˜¯æˆ‘æ—©é—´é»‘çš„æ•…äº‹ã€‚

![](img/87f2c187175a5956b00ae23e228d03ea.png)

Ugly email notification

![](img/1eb1ed06c6cce47a4fb8c5191c4eaee1.png)

Expected result in Slack

## è¿æ¥å—ğŸ”ŒğŸ—

æˆ‘ä¸çŸ¥é“ä½ ï¼Œä½†å½“æˆ‘æƒ³åˆ°é€šçŸ¥æ—¶ï¼Œæˆ‘é€šå¸¸ä¼šæƒ³åˆ° [Slack](http://slack.com) ã€‚è¿™å°±æ˜¯æˆ‘è¯•å›¾ä¸ºæˆ‘ä½¿ç”¨çš„[å·¥å…·](https://hackernoon.com/tagged/tools)æ”¶é›†æ‰€æœ‰è‡ªåŠ¨æŠ¥å‘Šçš„åœ°æ–¹ã€‚è¿™ä¸ªé»‘å®¢ä¼šå‘ Slack å‘é€é€šçŸ¥ã€‚

æ­¤å¤–ï¼Œé—æ†¾çš„æ˜¯ï¼Œæˆ‘ä»¬çš„å·¥ç¨‹å¸ˆæ²¡æœ‰æ—¶é—´æ¥æ„å»ºä¸€ä¸ªå¥½çš„è­¦æŠ¥ APIï¼Œæ‰€ä»¥æˆ‘ä¸å¾—ä¸ä½¿ç”¨æˆ‘æ‹¥æœ‰çš„èµ„æº:*ä¸€å°ç”µå­é‚®ä»¶*ã€‚

æœ‰è®¸å¤šåƒ [Context.io](http://context.io) æˆ– [Nylas](http://nylas.com) è¿™æ ·çš„é‚®ä»¶ API å¯ä»¥è®©ä½ è·å–ç”µå­é‚®ä»¶å¹¶è§£æå®ƒä»¬ï¼Œä½†æ˜¯è¿™éœ€è¦å¤„ç†å¾ˆå¤šå¼€é”€(OAuthã€è¿‡æ»¤ç”µå­é‚®ä»¶ç­‰ç­‰)ã€‚æœ€å¥½çš„è§£å†³æ–¹æ¡ˆæ˜¯å°†é€šçŸ¥å‘é€åˆ°æŒ‡å®šçš„ç”µå­é‚®ä»¶åœ°å€ï¼Œå¹¶åœ¨é‚£é‡Œè§£æå®ƒä»¬ã€‚

Zapier é€šè¿‡ä»–ä»¬çš„[è§£æå™¨](http://parser.zapier.com)äº§å“æä¾›äº†è¿™ä¸ªç‰¹æ€§ã€‚ä»–ä»¬ç»™ä½ ä¸€ä¸ªç”µå­é‚®ä»¶åœ°å€ï¼Œä½ å¯ä»¥å‘é€æ‰€æœ‰çš„ç”µå­é‚®ä»¶è¿›è¡Œåˆ†æã€‚å®ƒåŒ…æ‹¬ä¸€ä¸ªè§£æ UIï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­å®šä¹‰æƒ³è¦æå–çš„å˜é‡ã€‚

æœ€åï¼Œä¸ºäº†åœ¨æ¶ˆæ¯æ ¼å¼ä¸Šæ›´åŠ çµæ´»ï¼Œæˆ‘ä»¬ä¸ä¼šç›´æ¥å°† Zapier æ’å…¥ Slackï¼Œè€Œæ˜¯ä½¿ç”¨ Zapier webhook æ“ä½œå°†æå–çš„æ•°æ®å‘é€åˆ°æ‰˜ç®¡åœ¨ [Glitch](http://glitch.com) ä¸Šçš„åº”ç”¨ç¨‹åºã€‚

æˆ‘ä»¬æ­£åœ¨æ„å»ºä¸€ä¸ªå®Œæ•´çš„æ— æœåŠ¡å™¨è§£å†³æ–¹æ¡ˆğŸ˜‡

![](img/3d85a7cbdba55eec14c31480e9cdc177.png)

Webhook integration form on Slack

## è®¾ç½®æ¾å¼›æ—¶é—´ğŸ¤–ğŸ’¬

ä¸ºäº†èƒ½å¤Ÿå‘æ‚¨çš„ Slack å›¢é˜Ÿå‘é€æ¶ˆæ¯ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª**ä¼ å…¥ Webhook** é›†æˆã€‚æŒ‰ç…§è¿™ä¸ª[é“¾æ¥](https://my.slack.com/services/new/incoming-webhook/)ï¼Œå®ƒåº”è¯¥ä¼šå¼•å¯¼ä½ é…ç½®é›†æˆã€‚åœ¨é‚£é‡Œï¼Œæ‚¨å°†å®šä¹‰åœ¨å“ªä¸ªé€šé“ä¸Šå‘é€é€šçŸ¥ã€‚å®Œæˆåï¼Œå°† Webhook URL æ”¾åœ¨æ‰‹è¾¹ï¼Œæˆ‘ä»¬ç¨åä¼šç”¨åˆ°ã€‚

![](img/744f190dbe85dabb4ecf25880ecfb692.png)

Zapier parser UI

## è®¾ç½® Zapier è§£æå™¨å’Œè§¦å‘å™¨ğŸ“¥âš™ï¸

åœ¨ Zapier ä¸Šï¼Œæˆ‘ä»¬å°†ä»é…ç½®é‚®ä»¶è§£æå™¨[å¼€å§‹ï¼Œè¿™é‡Œæ˜¯](http://parser.zapier.com)ã€‚ä¸€æ—¦ä½ æœ‰ä¸€ä¸ªåœ°å€ï¼Œå‘é€ä¸€ä¸ªé€šçŸ¥ç”µå­é‚®ä»¶çš„ä¾‹å­ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è®¾ç½®ä¸€ä¸ªæ¨¡æ¿ã€‚å‡ ç§’é’Ÿåï¼Œé‚®ä»¶åº”è¯¥è¢«è§£æå™¨æ”¶åˆ°ï¼Œä½ åº”è¯¥çœ‹åˆ°å®ƒå‡ºç°äº†ã€‚ç„¶åï¼Œçªå‡ºæ˜¾ç¤ºæ‚¨æƒ³è¦ä»ç”µå­é‚®ä»¶ä¸­æå–çš„å˜é‡ï¼Œå¹¶ç»™å®ƒä»¬å‘½åã€‚

ä¸€æ—¦æ¨¡æ¿è¢«å®šä¹‰ï¼Œæˆ‘ä»¬å°†é…ç½®ä¸€ä¸ª *Zap* æ¥è¿æ¥ç”µå­é‚®ä»¶è§£æå™¨å’Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚åœ¨ *Zap* ä¸­ï¼Œé€‰æ‹©**é‚®ä»¶è§£æå™¨** appï¼Œè§¦å‘**æ–°é‚®ä»¶**åŠ¨ä½œã€‚å¦‚æœæ‚¨æµ‹è¯•è¿™ä¸€æ­¥ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿæ£€ç´¢æ‚¨å…ˆå‰å‘é€åˆ°*è§£æå™¨*ç”µå­é‚®ä»¶åœ°å€çš„æ¶ˆæ¯ã€‚

## è¯¥åº”ç”¨ç¨‹åºğŸğŸ’»

è¯¥åº”ç”¨ç¨‹åºå°†å…¬å¼€ä¸€ä¸ª**POST**route*/hook*ï¼Œå…¶ä¸­ Zapier å°†å‘é€ä¸€ä¸ªåŒ…å«æå–æ•°æ®çš„è¯·æ±‚ã€‚ä½ å¯ä»¥åœ¨ Glitch ä¸Šæ£€æŸ¥æˆ‘çš„ä¾‹å­ï¼Œå¹¶ç”¨ä½ è‡ªå·±çš„å˜é‡é‡æ–°æ··åˆå®ƒã€‚

åœ¨*ä¸­ã€‚env* æ–‡ä»¶ï¼Œä½ åº”è¯¥ç»™å˜é‡æ·»åŠ å€¼ã€‚è·å–æˆ‘ä»¬ä¹‹å‰åœ¨ Slack ä¸Šåˆ›å»ºçš„ Hook URLï¼Œå¹¶é€šè¿‡æ·»åŠ ç”¨æˆ·åå’Œå›¾æ ‡ä¸ºæ‚¨çš„é€šçŸ¥æ·»åŠ ä¸€äº›ä¸ªæ€§ã€‚ZAPIER_SECRET å˜é‡åº”è¯¥æ˜¯ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒæ¥è¯†åˆ«è¯·æ±‚æ¥è‡ª Zapier webhookã€‚

æ¶ˆæ¯æ ¼å¼åŒ–å‘ç”Ÿåœ¨ *slack.js* æ–‡ä»¶ä¸Šã€‚æ‚¨å¯ä»¥ä» Slack ä¸­æ£€æŸ¥[æ¶ˆæ¯ç”Ÿæˆå™¨](https://api.slack.com/docs/messages/builder)æ¥è¿è¡Œæ ¼å¼åŒ–æµ‹è¯•ã€‚

![](img/ae9c0983c361a10c41ab380c1670844a.png)

Webhook configuration on Zapier

## å°† webhook æ“ä½œæ·»åŠ åˆ° ZapierğŸ£âš™ï¸

ç°åœ¨ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå‡ºç°äº†æ•…éšœï¼Œæˆ‘ä»¬å¯ä»¥å‘æˆ‘ä»¬çš„ *Zap* æ·»åŠ ä¸€ä¸ªåŠ¨ä½œã€‚

æ·»åŠ ä¸€ä¸ªæŒ‡å‘ URL[https://YOUR _ GLITCH _ APP _ name . GLITCH . me/hook](https://YOUR_GLITCH_APP_NAME.glitch.me/hook)çš„ POST ç±»å‹çš„ Webhook æ“ä½œ

In åº”è¯¥è¿”å›ä¸€ä¸ª JSON æœ‰æ•ˆè´Ÿè½½ã€‚ç„¶åå®šä¹‰å°†å‘é€åˆ°åº”ç”¨ç¨‹åºçš„å˜é‡ï¼Œå¹¶å°†å®ƒä»¬æ˜ å°„åˆ°æˆ‘ä»¬æå–çš„å˜é‡ã€‚

![](img/defd84cf89a03061bfe85f95c3bf5955.png)

Secret header for security

æœ€åï¼Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªåä¸º *X-zapier-secret* çš„å¤´ï¼Œå…¶å€¼ä¸æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„ **ZAPIER_SECRET** ç¯å¢ƒå˜é‡çš„å€¼ç›¸åŒã€‚

## æµ‹è¯•å’Œäº«å—ğŸ‰ğŸŠ

å°±è¿™æ ·ï¼Œä½ ç°åœ¨å®Œæˆäº†ğŸ‘æµ‹è¯•æµç¨‹ï¼Œçœ‹çœ‹æ¶ˆæ¯æ˜¯å¦æŒ‰ç…§æ‚¨æƒ³è¦çš„æ–¹å¼å‘ˆç°ã€‚å½“ä½ å¯¹ç»“æœæ»¡æ„æ—¶ï¼Œæ‰“å¼€ *Zap* ã€‚

![](img/707aa9b3d4df7a5f4eb56650205ed9f8.png)

Expected result on Slack

ç°åœ¨ï¼Œæ‚¨å¯ä»¥å¿½ç•¥ç”µå­é‚®ä»¶é€šçŸ¥ï¼Œå› ä¸ºå®ƒä»¬éƒ½ä»¥ä¸€ç§ç¾ä¸½è€Œå…¨é¢çš„æ–¹å¼å‘é€åˆ° Slackã€‚

å¦‚æœä½ æƒ³å¢å¼ºè¿™ä¸ªæµç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥ç¨åæ·»åŠ [å¯æ“ä½œæŒ‰é’®](https://api.slack.com/docs/message-buttons)ï¼Œä½†è¿™éœ€è¦æ›´å¤šçš„å·¥ä½œã€‚

è®©æˆ‘çŸ¥é“ä½ å¯¹è¿™äº›é»‘å®¢çš„çœ‹æ³•ï¼

![](img/b32d1cf0362615a67e47d52ffc0dc4fb.png)

Image by Markus Petritz found on Unsplash

[![](img/50ef4044ecd4e250b5d50f368b775d38.png)](http://bit.ly/HackernoonFB)[![](img/979d9a46439d5aebbdcdca574e21dc81.png)](https://goo.gl/k7XYbx)[![](img/2930ba6bd2c12218fdbbf7e02c8746ff.png)](https://goo.gl/4ofytp)

> [é»‘å®¢ä¸­åˆ](http://bit.ly/Hackernoon)æ˜¯é»‘å®¢ä»¬ä¸‹åˆçš„å¼€å§‹ã€‚æˆ‘ä»¬æ˜¯ [@AMI](http://bit.ly/atAMIatAMI) å®¶åº­çš„ä¸€å‘˜ã€‚æˆ‘ä»¬ç°åœ¨[æ¥å—æŠ•ç¨¿](http://bit.ly/hackernoonsubmission)å¹¶ä¹æ„[è®¨è®ºå¹¿å‘Š&èµåŠ©](mailto:partners@amipublications.com)æœºä¼šã€‚
> 
> å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•…äº‹ï¼Œæˆ‘ä»¬æ¨èä½ é˜…è¯»æˆ‘ä»¬çš„[æœ€æ–°ç§‘æŠ€æ•…äº‹](http://bit.ly/hackernoonlatestt)å’Œ[è¶‹åŠ¿ç§‘æŠ€æ•…äº‹](https://hackernoon.com/trending)ã€‚ç›´åˆ°ä¸‹ä¸€æ¬¡ï¼Œä¸è¦æŠŠä¸–ç•Œçš„ç°å®æƒ³å½“ç„¶ï¼

![](img/be0ca55ba73a573dce11effb2ee80d56.png)