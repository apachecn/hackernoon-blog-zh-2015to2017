# ä» Expressjs 4 è¿ç§»åˆ° 5

> åŸæ–‡ï¼š<https://medium.com/hackernoon/migrating-from-expressjs-4-to-5-156dcd80eb11>

## éšç€ 2017 å¹´çš„å¼€å§‹ï¼Œæ˜¯æ—¶å€™é€‚åº”è¿™äº›å˜åŒ–äº†

![](img/589248ba04191b598fa75c33d5e66857.png)

xpressJS 5.0 æ­£å¤„äº alpha å‘å¸ƒé˜¶æ®µï¼Œä½†æˆ‘ç›¸ä¿¡æˆ‘ä»¬å¾ˆå¿«ä¼šå°†å®ƒä½œä¸ºä¸€ä¸ªä¾èµ–é¡¹æ·»åŠ åˆ°æˆ‘ä»¬çš„`package.json`æ–‡ä»¶ä¸­ã€‚è¿™ç¯‡æ–‡ç« ç»™å‡ºäº†ä¸€äº›å…³äºæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ¡†æ¶ç¼–å†™ä»£ç çš„æ–¹æ³•ï¼Œä»¥åŠå³ä½¿æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ express js*4.0*ç‰ˆæœ¬ï¼Œæˆ‘ä»¬ä¹Ÿåº”è¯¥å¦‚ä½•é€‚åº”æ–°çš„å˜åŒ–ã€‚

æˆ‘å…ˆä»æœ€å¸¸è§çš„ä¸œè¥¿æ¯”å¦‚`response`è¯´èµ·ã€‚

Express 5 ä¸å†æ”¯æŒç­¾å`res.send`ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æˆ‘ä»¬åº”è¯¥ä»¥è¿™ç§å½¢å¼ä½¿ç”¨è¿™ç§æ–¹æ³•:

```
res.status(statusCode).send();
```

æˆ‘ä»¬å¿…é¡»åœ¨å‘é€å“åº”å¯¹è±¡ä¹‹å‰è®¾ç½®çŠ¶æ€ä»£ç ã€‚è¿™ä¸ªæ–°ç‰ˆæœ¬çš„`res.send`åŸºæœ¬ä¸Šæ˜¯ä¸¤ä¸ªæ–¹æ³•çš„è¿é”:`res.status` & `res.send`ã€‚

è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼ŒExpressJS 5 ä¸èµæˆä½¿ç”¨`res.send(statusCode)`æ–¹æ³•ï¼Œå…¶ä¸­`statusCode`æ˜¯è¡¨ç¤º HTTP å“åº”å¤´çŠ¶æ€ä»£ç çš„æ•°å­—ã€‚ä¸ºäº†åªå‘é€ statusCodeï¼Œå³ä¸å‘é€å“åº”å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨`res.sendStatus(statusCode)`æ–¹æ³•ã€‚

ä¸ç±»ä¼¼ï¼Œå…¶ä»–æ”¹å˜çš„æ–¹æ³•æœ‰:

```
 res.json() --> res.status().json()
res.jsonp() --> res.status.jsonp() 
```

å¦ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„æ–¹æ³•æ˜¯`res.sendfile()`ï¼Œåœ¨ä¸‹ä¸€ä¸ªç‰ˆæœ¬çš„ ExpressJS ä¸­å°†ä¼šè¢«å¼ƒç”¨ã€‚ç›¸åï¼Œæˆ‘ä»¬å¿…é¡»ä¿®æ”¹å®ƒçš„æ–°å½¢å¼ï¼ŒcamelCase one: `res.sendFile()`ï¼Œå®ƒå·²ç»è¢«æ¯”`4.8.x`æ›´é«˜ç‰ˆæœ¬çš„ ExpressJS æ‰€æ”¯æŒã€‚å®ƒå¸¦æœ‰å¯é€‰å‚æ•°ï¼Œæ‚¨å¯ä»¥åœ¨è¿™é‡Œ **æŸ¥çœ‹è¿™äº›å‚æ•° [**ã€‚**](http://expressjs.com/en/4x/api.html#res.sendFile)**

æ— è®ºæ‚¨è®¡åˆ’ä½¿ç”¨ Express 5.0 çš„ alpha ç‰ˆæœ¬è¿˜æ˜¯ç»§ç»­ä½¿ç”¨ Express 4.0 çš„æœ€æ–°ç‰ˆæœ¬ï¼Œæˆ‘éƒ½å»ºè®®æ‚¨ç«‹å³å¼€å§‹è°ƒæ•´è¿™äº›æ–¹æ³•ã€‚

*åœ¨* ***è¿™é‡Œå¯ä»¥æ‰¾åˆ°å®Œæ•´çš„å˜æ›´åˆ—è¡¨æˆ–å®˜æ–¹çš„ Express è¿ç§»æŒ‡å—ã€‚***

> ***æ„Ÿè°¢é˜…è¯»ã€‚å¦‚æœä½ è§‰å¾—è¿™ä¸ªå¸–å­æœ‰ç”¨ï¼Œè¯·ç‚¹å‡»*T3ğŸ’š**æŒ‰é’®*è¿™æ ·è¿™ä¸ªæ•…äº‹å°±èƒ½æ¥è§¦åˆ°æ›´å¤šçš„*è¯»è€…*ã€‚å¦‚æœä½ æƒ³è°ˆè®ºæ›´å¤šï¼Œè¯·åœ¨***[***Twitter***](https://twitter.com/amanhimself)***|***[***Goodreads***](https://goodreads.com/amandeepmittal)***|***[***ä¹¦åš***](https://amandeepmittal.wordpress.com/)***|*****

[![](img/50ef4044ecd4e250b5d50f368b775d38.png)](http://bit.ly/HackernoonFB)[![](img/979d9a46439d5aebbdcdca574e21dc81.png)](https://goo.gl/k7XYbx)[![](img/2930ba6bd2c12218fdbbf7e02c8746ff.png)](https://goo.gl/4ofytp)

> [é»‘å®¢ä¸­åˆ](http://bit.ly/Hackernoon)æ˜¯é»‘å®¢ä»¬å¦‚ä½•å¼€å§‹ä»–ä»¬çš„ä¸‹åˆã€‚æˆ‘ä»¬æ˜¯ [@AMI](http://bit.ly/atAMIatAMI) å®¶åº­çš„ä¸€å‘˜ã€‚æˆ‘ä»¬ç°åœ¨[æ¥å—æŠ•ç¨¿](http://bit.ly/hackernoonsubmission)å¹¶ä¹æ„[è®¨è®ºå¹¿å‘Š&èµåŠ©](mailto:partners@amipublications.com)æœºä¼šã€‚
> 
> å¦‚æœä½ å–œæ¬¢è¿™ä¸ªæ•…äº‹ï¼Œæˆ‘ä»¬æ¨èä½ é˜…è¯»æˆ‘ä»¬çš„[æœ€æ–°ç§‘æŠ€æ•…äº‹](http://bit.ly/hackernoonlatestt)å’Œ[è¶‹åŠ¿ç§‘æŠ€æ•…äº‹](https://hackernoon.com/trending)ã€‚ç›´åˆ°ä¸‹ä¸€æ¬¡ï¼Œä¸è¦æŠŠä¸–ç•Œçš„ç°å®æƒ³å½“ç„¶ï¼

![](img/be0ca55ba73a573dce11effb2ee80d56.png)